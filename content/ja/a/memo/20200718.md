---
title: "2020-07-18"
linkTitle: "2020-07-18"
date: 2020-07-18T14:40:19+09:00
---

## 7/18
### GoReleaserでHomebrewのFormulaを作るようにした

なんとそれができるということをつい昨日知った。

See [Golang > GoReleaser#Homebrew Formula生成]({{<ref "/a/program/go/ecosystem/goreleaser.md">}}#homebrew-formula生成)

ひとまずbinq-ghで試してみたところ、上手く行った。

- https://github.com/progrhyme/homebrew-taps/commit/fa4b730603f2a350220a4d345c4b2c4a245c60ca ... GoReleaserによるFormula更新
- [.goreleaser.ymlとGitHub Actionsの設定変更](https://github.com/binqry/binq-gh/commit/e7012eb2f8dc72777c2ee4ee0fbfc45151e90f41)

`homepage` の設定が漏れて空になってしまったが、修正済み。

この後、binqとshelpも同様の設定を入れたので、もう手動でFormulaを更新する必要はなくなると思われる。

NOTE:

- これ用に新しくPersonal Access Tokenを払い出した。公開リポジトリを更新するだけなので、権限は `repo:public_repo` のみでOK
  - 参考: [Understanding scopes for OAuth Apps | GitHub Developer Guide](https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/)
- Secretの設定でこのAccess Tokenの名前に初め `GITHUB_TOKEN_HOMEBREW_TAP` と付けようとしたら、エラーで設定できなかった。GitHubの仕様っぽい（？）
