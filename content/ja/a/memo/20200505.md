---
title: "2020-05-05"
linkTitle: "2020-05-05"
date: 2020-05-05T07:25:57+09:00
---

# 5/5
## Kubernetesのマニフェストは全部exportして管理した方がいいんじゃね？って思った

exportのやり方は調べて[kubectlのページ#全てのマニフェストを取得したい]({{< ref "/a/software/k8s/kubectl.md" >}}#全てのマニフェストを取得したい)に書いた。

…というか、exportしてないと不安である。

kustomizeで管理していても、野良のリソースがないことを保証できない。  
素のマニフェスト管理でも同様。

定期的にdumpして差分がないかチェックした方がいいんじゃないかな。  
特に、本番とstaging環境は。

逆に、export -> applyの運用にしていれば、staging環境の差分をそのまま本番に適用する運用が可能ではないだろうか。  
このやり方なら、仰々しいK8s対応のCI/CDツールなど使わなくても、kubectlとGitOpsだけで行けるかもしれない。

まだ試してないので、実際にやってみたら色々と課題も出てくるだろうけど。
