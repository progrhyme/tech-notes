<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>progrhyme's Tech Notes – progrhyme's Tech Notes</title><link>https://progrhy.me/tech-notes/a/</link><description>Recent content on progrhyme's Tech Notes</description><generator>Hugo -- gohugo.io</generator><language>ja</language><atom:link href="https://progrhy.me/tech-notes/a/index.xml" rel="self" type="application/rss+xml"/><item><title>A: Google Apps Script</title><link>https://progrhy.me/tech-notes/a/google/gas/</link><pubDate>Sat, 09 May 2020 21:08:42 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gas/</guid><description>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;ul>
&lt;li>ガイド: &lt;a href="https://developers.google.com/apps-script/overview">https://developers.google.com/apps-script/overview&lt;/a>&lt;/li>
&lt;li>APIリファレンス: &lt;a href="https://developers.google.com/apps-script/reference/">https://developers.google.com/apps-script/reference/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>入門系記事:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://libro.tuyano.com/index2?id=638001" title="初心者のためのGoogle Apps Scriptプログラミング入門">初心者のためのGoogle Apps Scriptプログラミング入門&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://uxmilk.jp/25775" title="【Google Apps Script入門】Google Apps Scriptとは？ | UX MILK">【Google Apps Script入門】Google Apps Scriptとは？ | UX MILK&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="features">Features&lt;/h2>
&lt;h3 id="webアプリケーションとして公開">Webアプリケーションとして公開&lt;/h3>
&lt;p>&lt;a href="https://developers.google.com/apps-script">HTML Service: Create and Serve HTML | Apps Script | Google Developers&lt;/a>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/hyt48/items/2534237d96f991f31966">Google Apps ScriptでWebアプリケーションをつくる - Qiita&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Concept</title><link>https://progrhy.me/tech-notes/a/software/k8s/concept/</link><pubDate>Mon, 27 Apr 2020 10:53:19 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/concept/</guid><description>
&lt;h2 id="このページについて">このページについて&lt;/h2>
&lt;p>何を書くか:&lt;/p>
&lt;ul>
&lt;li>Kubernetesの全体アーキテクチャーや構成要素の概要&lt;/li>
&lt;li>個別のオブジェクトによらない概念や機能等について&lt;/li>
&lt;/ul>
&lt;p>書かないこと:&lt;/p>
&lt;ul>
&lt;li>著しく個々のオブジェクトに紐づく文書のボリュームが大きくなったら、独立したページに切り出す&lt;/li>
&lt;/ul>
&lt;h2 id="アーキテクチャー概観">アーキテクチャー概観&lt;/h2>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/concepts/overview/components/">Kubernetesのコンポーネント - Kubernetes&lt;/a>より。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>クラスタ&lt;/strong> &amp;hellip; &lt;u>ノード&lt;/u>の集合
&lt;ul>
&lt;li>少なくとも1つの&lt;u>ワーカーノード&lt;/u>と少なくとも1つの&lt;u>マスターノード&lt;/u>がある&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ノード（Node）&lt;/strong> &amp;hellip; コンテナ化されたアプリケーションを実行するマシン
&lt;ul>
&lt;li>&lt;strong>マスターノード&lt;/strong> &amp;hellip; &lt;u>ワーカーノード&lt;/u>とPodを管理。複数台構成によって高可用性を実現できる&lt;/li>
&lt;li>&lt;strong>ワーカーノード&lt;/strong> &amp;hellip; Podを動かす&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>各ノードで実行され、Kubernetesのクラスタ機能を成り立たせる&lt;u>コンポーネント&lt;/u>を以下に記す。&lt;/p>
&lt;h3 id="master-components">Master Components&lt;/h3>
&lt;p>マスターコンポーネントは、クラスターのコントロールプレーンを提供する。&lt;br>
クラスタのどのマシンでも実行できるが、通常は全てのコンポーネントが同じマシンで起動され、そのマシンにはユーザーのPodをスケジュールしない。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kube-apiserver/">kube-apiserver&lt;/a>
&lt;ul>
&lt;li>Kubernetesを制御するフロントAPI. 水平スケール可能。参考: &lt;a href="https://kubernetes.io/docs/admin/high-availability/">Building High-Availability Clusters | Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/administer-cluster/configure-upgrade-etcd/">etcd&lt;/a> &amp;hellip; クラスタの管理データが保存されるので、バックアップすべし。&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kube-controller-manager/">kube-controller-manager&lt;/a>
&lt;ul>
&lt;li>Controllerをバックグラウンドのスレッドで動かす。&lt;/li>
&lt;li>個々のControllerは論理的には独立した存在だが、複雑性を避けるため同一のバイナリで単一プロセスとして動作している。&lt;/li>
&lt;li>以下のControllerが含まれる:
&lt;ul>
&lt;li>Node Controller&lt;/li>
&lt;li>Replication Controller&lt;/li>
&lt;li>Endpoints Controller&lt;/li>
&lt;li>Service Account &amp;amp; Token Controller&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cloud-controller-manager &amp;hellip; v1.6でalpha. クラウド基盤とやりとりするControllerを動かす。&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kube-scheduler/">kube-scheduler&lt;/a> &amp;hellip; 生成されるPodを監視し、Podを動作させるノードを決定する。&lt;/li>
&lt;li>addons &amp;hellip; クラスタの機能を提供するPod群。これらのPodは &lt;code>kube-system&lt;/code> という &lt;strong>Namespace&lt;/strong> に作られる。
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/">DNS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/">Web UI (Dashboard)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/debug-application-cluster/resource-usage-monitoring/">Container Resource Monitoring&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/cluster-administration/logging/">Cluster-level Logging&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="node-components">Node Components&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kubelet/">kubelet&lt;/a> &amp;hellip; マスターと通信するエージェントプロセス。&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kube-proxy/">kube-proxy&lt;/a> &amp;hellip; ノード上でKubernetes APIによって定義されたサービスを媒介するネットワークプロキシ。&lt;/li>
&lt;li>docker, rkt &amp;hellip; コンテナランタイム&lt;/li>
&lt;li>supervisord &amp;hellip; ノード上でdockerやkubeletを動かし続ける。&lt;/li>
&lt;li>fluentd &amp;hellip; cluster-level loggingを実現する。&lt;/li>
&lt;/ul>
&lt;h2 id="リソースオブジェクト">リソースオブジェクト&lt;/h2>
&lt;p>APIオブジェクトとも呼ばれるようだ。&lt;/p>
&lt;p>&lt;a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/">Kubernetes API Reference Docs (v1.18 at 2020-04-13)&lt;/a>に従い、カテゴライズして記す。&lt;/p>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>以下、「*」は本サイト内のページを表すとする。&lt;/li>
&lt;li>一旦、v1beta以下は省くか、versionを明記する&lt;/li>
&lt;/ul>
&lt;h3 id="workloads">Workloads&lt;/h3>
&lt;ul>
&lt;li>coreグループ:
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/container/">Container&lt;/a> *&lt;/li>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/pod/">Pod&lt;/a> *&lt;/li>
&lt;li>ReplicationContoller&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>appsグループ:
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/">ReplicaSet&lt;/a> &amp;hellip; &lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/">Replication Controller&lt;/a>の後継。&lt;/li>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/deployment/">Deployment&lt;/a> * &amp;hellip; PodやReplicaSetの状態を宣言的に記述することを可能にする。&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSet&lt;/a> &amp;hellip; v1.8でbeta. Deployment同様Podを管理するが、それぞれのPodを異なる個体と認識する。&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSet&lt;/a> &amp;hellip; ノード上でPodのコピーを動かす。典型的なユースケースとしては、cephやfluentd, collectdなどが挙げられる。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>batchグループ:
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/">Job&lt;/a> &amp;hellip; Podを実行し、正常に完了するまでをトラッキングする。定められた回数、正常に完了したら、Jobも完了となる。&lt;/li>
&lt;li>CronJob v1beta1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>MEMO:&lt;/p>
&lt;ul>
&lt;li>apps, batchグループのオブジェクトを &lt;strong>Controller&lt;/strong> と呼ぶことがあったようだ。&lt;/li>
&lt;/ul>
&lt;h3 id="discovery--lb-service-apis">Discovery &amp;amp; LB (Service APIs)&lt;/h3>
&lt;ul>
&lt;li>coreグループ:
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/service/">Service&lt;/a> *&lt;/li>
&lt;li>Endpoints&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>networking.k8s.ioグループ:
&lt;ul>
&lt;li>Ingress v1beta1&lt;/li>
&lt;li>IngressClass v1beta1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>discovery.k8s.ioグループ:
&lt;ul>
&lt;li>EndpointSlice v1beta1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="config--storage">Config &amp;amp; Storage&lt;/h3>
&lt;ul>
&lt;li>coreグループ:
&lt;ul>
&lt;li>ConfigMap&lt;/li>
&lt;li>Secret&lt;/li>
&lt;li>PersistentVolumeClaim&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/storage/volumes/">Volume&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>storage.k8s.ioグループ:
&lt;ul>
&lt;li>CSIDriver&lt;/li>
&lt;li>CSINode&lt;/li>
&lt;li>StorageClass&lt;/li>
&lt;li>VolumeAttachment&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="metadata">Metadata&lt;/h3>
&lt;ul>
&lt;li>coreグループ:
&lt;ul>
&lt;li>Event&lt;/li>
&lt;li>LimitRange&lt;/li>
&lt;li>PodTemplate&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>appsグループ:
&lt;ul>
&lt;li>ControllerRevision&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>autoscalingグループ:
&lt;ul>
&lt;li>&lt;a href="#horizontal-pod-autoscaler">HorizontalPodAutoscaler&lt;/a> * &amp;hellip; HPAと略されることが多い&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>scheduling.k8s.ioグループ:
&lt;ul>
&lt;li>PriorityClass &amp;hellip; See &lt;a href="https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass">Pod Priority and Preemption - Kubernetes#priorityclass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>admissionregistration.k8s.ioグループ:
&lt;ul>
&lt;li>MutatingWebhookConfiguration&lt;/li>
&lt;li>ValidatingWebhookConfiguration&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>apiextensions.k8s.ioグループ:
&lt;ul>
&lt;li>CustomResourceDefinition &amp;hellip; CRDと略されることが多い。K8sの機能拡張によく用いられる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>policyグループ:
&lt;ul>
&lt;li>PodDisruptionBudget v1beta1&lt;/li>
&lt;li>PodSecurityPolicy v1beta1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="cluster">Cluster&lt;/h3>
&lt;ul>
&lt;li>coreグループ:
&lt;ul>
&lt;li>Binding&lt;/li>
&lt;li>ComponentStatus&lt;/li>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/namespace/">Namespace&lt;/a> * &amp;hellip; Kubernetesでは、複数の仮想的なクラスタを同じ物理クラスタ上に構築することができる。この仮想クラスタのことを &lt;strong>Namespace&lt;/strong> と呼ぶ&lt;/li>
&lt;li>Node&lt;/li>
&lt;li>&lt;a href="#persistentvolume">PersistentVolume&lt;/a> *&lt;/li>
&lt;li>ResourceQuota&lt;/li>
&lt;li>ServiceAccount&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>authentication.k8s.ioグループ:
&lt;ul>
&lt;li>TokenRequest&lt;/li>
&lt;li>TokenReview&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>authorization.k8s.ioグループ:
&lt;ul>
&lt;li>LocalSubjectAccessReview&lt;/li>
&lt;li>SelfSubjectAccessReview&lt;/li>
&lt;li>SelfSubjectRulesReview&lt;/li>
&lt;li>SubjectAccessReview&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>rbac.authorization.k8s.ioグループ:
&lt;ul>
&lt;li>ClusterRole&lt;/li>
&lt;li>ClusterRoleBinding&lt;/li>
&lt;li>Role&lt;/li>
&lt;li>RoleBinding&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>apiregistration.k8s.ioグループ:
&lt;ul>
&lt;li>APIService&lt;/li>
&lt;li>AuditSink&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>certificates.k8s.ioグループ:
&lt;ul>
&lt;li>CertificateSigningRequest v1beta1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>networking.k8s.ioグループ:
&lt;ul>
&lt;li>NetworkPolicy&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>coordination.k8s.ioグループ:
&lt;ul>
&lt;li>Lease&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="認証認可">認証/認可&lt;/h2>
&lt;h3 id="rbac">RBAC&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">https://kubernetes.io/docs/reference/access-authn-authz/rbac/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Role &amp;hellip; 権限ロール。Namespace単位&lt;/li>
&lt;li>ClusterRole &amp;hellip; クラスタ全体に効く権限ロール&lt;/li>
&lt;li>RoleBinding &amp;hellip; Roleとユーザ/グループの紐付け&lt;/li>
&lt;li>ClusterRoleBinding &amp;hellip; ClusterRoleとユーザ/グループの紐付け&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-20/">Kubernetes道場 20日目 - Role / RoleBinding / ClusterRole / ClusterRoleBindingについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/sheepland/items/67a5bb9b19d8686f389d">KubernetesのRBACについて - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="オートスケール">オートスケール&lt;/h2>
&lt;h3 id="horizontal-pod-autoscaler">Horizontal Pod Autoscaler&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/">https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Podの水平オートスケーラー&lt;/p>
&lt;ul>
&lt;li>v1 &amp;hellip; CPU使用率(requestsの平均)でスケール&lt;/li>
&lt;li>v2
&lt;ul>
&lt;li>&lt;a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/autoscaling/hpa-v2.md">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/autoscaling/hpa-v2.md&lt;/a>&lt;/li>
&lt;li>カスタムメトリクス対応&lt;/li>
&lt;li>複数メトリクス対応&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>HorizontalPodAutoscaler&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>autoscaling/v2alpha1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>WebFrontend&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">scaleTargetRef&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>ReplicationController&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>WebFrontend&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">minReplicas&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">maxReplicas&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metrics&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Resource&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">resource&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>cpu&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">targetAverageUtilization&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Object&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">object&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">target&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Frontend&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metricName&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>hits-per-second&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">targetValue&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>1k&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/horizontal-pod-autoscaling">Configuring a Horizontal Pod Autoscaler - GKE&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/monitoring/kubernetes-engine/observing?hl=ja">GKE クラスタの観察 | Stackdriver Monitoring | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/k-hal/items/5f060fdbafa3d29b3499#hpa">GKEでPodとNodeをAutoscaling する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="cluster-autoscaler">Cluster Autoscaler&lt;/h3>
&lt;p>&lt;a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler">https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/FAQ.md">FAQ.md&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="storage">Storage&lt;/h2>
&lt;h3 id="persistentvolume">PersistentVolume&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">https://kubernetes.io/docs/concepts/storage/persistent-volumes/&lt;/a>&lt;/p>
&lt;p>永続化ボリューム&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-12/">Kubernetes道場 12日目 - PersistentVolume / PersistentVolumeClaim / StorageClassについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="リソース管理">リソース管理&lt;/h2>
&lt;h3 id="コンテナやpodへのcpuメモリの割当て">コンテナやPodへのCPU/メモリの割当て&lt;/h3>
&lt;p>基本:&lt;/p>
&lt;ul>
&lt;li>Podは、cpu/memory requests以上の空きリソースを持つノードにスケジュールされる&lt;/li>
&lt;li>コンテナのcpu利用量がlimit値を越えるとスロットルされる = パフォーマンス劣化する&lt;/li>
&lt;li>コンテナのmemory利用量がlimit値を越えるとOOM Killerで殺される。再起動できるときは再起動される&lt;/li>
&lt;li>Podが複数のコンテナで構成される場合、リソース指定値は全コンテナの合計値になる&lt;/li>
&lt;li>requestsを指定しないとデフォルト値になる&lt;/li>
&lt;li>limitsを指定しないとノードで利用可能な最大値になる&lt;/li>
&lt;/ul>
&lt;p>Tips:&lt;/p>
&lt;ul>
&lt;li>コンテナのcpu/memoryのrequestsより大きなlimitsを指定することで、突発的な負荷に耐えられるようになり、かつ、適切に制限をかけられる&lt;/li>
&lt;/ul>
&lt;p>ベストプラクティス:&lt;/p>
&lt;ul>
&lt;li>NamespaceでResourceQuotasやLimitRangeを設定すると良い
&lt;ul>
&lt;li>See &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/namespace/#resourcequotas">Namespace#resourcequotas&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/tasks/configure-pod-container/assign-cpu-resource/">コンテナおよびPodへのCPUリソースの割り当て - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/tasks/configure-pod-container/assign-memory-resource/">コンテナおよびPodへのメモリーリソースの割り当て - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.scsk.jp/sp/sysdig/blog/sysdig_monitor/kubernetes_118.html">例を交えてKubernetesのリミットとリクエストを理解する | Sysdigブログ - コンテナ・Kubernetes環境向けセキュリティ・モニタリング プラットフォーム&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-resource-requests-and-limits">Kubernetes best practices: Resource requests and limits | Google Cloud Blog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/ja-jp/azure/aks/developer-best-practices-resource-management">開発者のベスト プラクティス - Azure Kubernetes Service (AKS) でのリソース管理 | Microsoft Docs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="pod-eviction">Pod Eviction&lt;/h3>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/administer-cluster/out-of-resource/">https://kubernetes.io/docs/tasks/administer-cluster/out-of-resource/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>メモ:&lt;/p>
&lt;ul>
&lt;li>ノードのメモリが不足すると、Podがevictされることがある&lt;/li>
&lt;li>メモリ使用量の大きなPodからeviction対象になる&lt;/li>
&lt;li>memoryのrequets/limitsを適切に設定しておくこと&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.scsk.jp/sp/sysdig/blog/sysdig_monitor/kubernetes_pod_evicted.html">Kubernetes pod evictedとスケジューリングの問題を理解する | Sysdigブログ - コンテナ・Kubernetes環境向けセキュリティ・モニタリング プラットフォーム&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/concepts/architecture/nodes/">ノード - Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ロギング">ロギング&lt;/h2>
&lt;p>概念:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/cluster-administration/logging/">Logging Architecture - Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ソリューション:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/debug-application-cluster/logging-stackdriver/">Logging Using Stackdriver - Kubernetes&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: エコシステム</title><link>https://progrhy.me/tech-notes/a/software/k8s/ecosystem/</link><pubDate>Thu, 07 May 2020 11:10:18 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/ecosystem/</guid><description>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/cvusk/items/100dfb955150ef8964e5">Kubernetesのエコシステムをまとめる - Qiita&lt;/a> 2018年5月時点&lt;/li>
&lt;li>&lt;a href="https://qiita.com/ynott/items/89941c36c606a8384028">k3s と MicroK8s の違いを考える - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="マニフェスト管理">マニフェスト管理&lt;/h2>
&lt;p>※ * は当サイト内のページ&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/kustomize/">kustomize&lt;/a> *&lt;/li>
&lt;li>&lt;a href="https://helm.sh/">Helm&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ksonnet/ksonnet">ksonnet&lt;/a>
&lt;ul>
&lt;li>2019年2月で更新が止まっている。参考: &lt;a href="https://tanzu.vmware.com/content/blog/welcoming-heptio-open-source-projects-to-vmware">Welcoming Heptio Open Source Projects to VMware&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="クラスタ構築">クラスタ構築&lt;/h2>
&lt;ul>
&lt;li>kubeadm &amp;hellip; 公式&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://knowledge.sakura.ad.jp/20955/">2019年版・Kubernetesクラスタ構築入門 | さくらのナレッジ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="開発テスト用">開発・テスト用&lt;/h3>
&lt;ul>
&lt;li>Minikube（See below）&lt;/li>
&lt;li>&lt;a href="https://kind.sigs.k8s.io/">Kind&lt;/a>
&lt;ul>
&lt;li>参考:
&lt;ul>
&lt;li>&lt;a href="https://speakerdeck.com/ytaka23/cicd-test-night-5th">Kind で量産する使い捨て Kubernetes #cicd_test_night / CICD Test Night 5th - Speaker Deck&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/Hiroyuki_OSAKI/items/2395e6bbb98856df12f3">kindで軽量テスト用Kubernetesクラスタを作る＆運用する時のTIPS - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://microk8s.io/">MicroK8s&lt;/a> &amp;hellip; Canonical社が出してるやつ
&lt;ul>
&lt;li>参考: &lt;a href="https://gihyo.jp/admin/serial/01/ubuntu-recipe/0560">第560回 microk8sでお手軽Kubernetes環境構築：Ubuntu Weekly Recipe｜gihyo.jp … 技術評論社&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="minikube">Minikube&lt;/h4>
&lt;p>&lt;a href="https://github.com/kubernetes/minikube">https://github.com/kubernetes/minikube&lt;/a>&lt;/p>
&lt;p>ローカルでKubernetesを動かすためのツール。&lt;br>
Linuxのみだが、ハイパーバイザを噛まさず、ローカルのdocker上に直接クラスタを構築することもできる。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/getting-started-guides/minikube/">https://kubernetes.io/docs/getting-started-guides/minikube/&lt;/a> &amp;hellip; 導入ガイド
&lt;ul>
&lt;li>※先にkubectlをインストールしておくこと&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/mumoshu/items/8f55ee830d8e5c172dd4">minikubeでローカルKubernetesクラスタを5分でつくる方法 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.1q77.com/2016/10/setup-kubernetes-1-4-using-minikube/">minikube でローカルでのテスト用 Kubernetes を構築 – 1Q77&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://reiki4040.hatenablog.com/entry/2017/04/11/221122">ローカルでkubernetesを動かせるminikubeを試す - 年中アイス&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="クライアント">クライアント&lt;/h2>
&lt;p>kubectlと周辺ツールについては&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/kubectl/">kubectl&lt;/a>を見よ。&lt;/p>
&lt;ul>
&lt;li>K9s &amp;hellip; See below&lt;/li>
&lt;/ul>
&lt;h3 id="k9s">K9s&lt;/h3>
&lt;p>&lt;a href="https://k9scli.io/">K9s - Manage Your Kubernetes Clusters In Style&lt;/a>&lt;/p>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://k9scli.io/topics/install/">Install&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://k9scli.io/topics/commands/">Commands&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tech.enigmo.co.jp/entry/2019/12/17/090000">k9sで快適なk8sライフを送ろう！ - エニグモ開発者ブログ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="cli">CLI&lt;/h4>
&lt;p>オプション&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>オプション&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>--readonly&lt;/code>&lt;/td>
&lt;td>更新操作を無効にする&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>モニタリング用途で使う場合、 &lt;code>--readonly&lt;/code> をつけるべき&lt;/li>
&lt;/ul>
&lt;h4 id="インタラクティブモード">インタラクティブモード&lt;/h4>
&lt;p>&lt;code>k9s&lt;/code> コマンド起動後の操作&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>コマンド&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>:q[uit]&lt;/code>, &lt;code>Ctrl+c&lt;/code>&lt;/td>
&lt;td>終了&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;lt;Esc&amp;gt;&lt;/code>&lt;/td>
&lt;td>元の画面に戻る&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>:ctx&lt;/code>&lt;/td>
&lt;td>context選択&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>:ns&lt;/code>&lt;/td>
&lt;td>namespace選択&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/&lt;/code>&lt;/td>
&lt;td>リソースフィルタ。あいまい検索。 &lt;code>-l&lt;/code> でラベルセレクトも使える&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>d&lt;/code>, &lt;code>y&lt;/code>&lt;/td>
&lt;td>describe, YAMLを見る&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>e&lt;/code>&lt;/td>
&lt;td>編集&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>l&lt;/code>&lt;/td>
&lt;td>ログ表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+d&lt;/code>&lt;/td>
&lt;td>リソースを削除する&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+k&lt;/code>&lt;/td>
&lt;td>リソースを停止（Kill）する（&lt;strong>確認ダイアログはない&lt;/strong>）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="cicd">CI/CD&lt;/h2>
&lt;p>※ * は当サイト内のページ&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://argoproj.github.io/argo-cd/">Argo CD&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://concourse-ci.org/">Concourse&lt;/a>
&lt;ul>
&lt;li>参考: &lt;a href="https://www.atmarkit.co.jp/ait/articles/1909/04/news005.html">Kubernetesを前提としたCI/CDパイプラインの具体例と、本番運用に必要なもの (1/2)：コンテナベースのCI/CD本番事例大解剖（3） - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://jenkins-x.io/">Jenkins X&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/kubernetes/test-infra/tree/master/prow">Prow&lt;/a>
&lt;ul>
&lt;li>参考: &lt;a href="https://developers.cyberagent.co.jp/blog/archives/22072/">KubernetesベースのCI/CDシステムProwに入門してみた | CyberAgent Developers Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Skaffold（See below）&lt;/li>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/spinnaker/">Spinnaker&lt;/a> *&lt;/li>
&lt;li>&lt;a href="https://tekton.dev/">Tekton&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.inovex.de/blog/spinnaker-vs-argo-cd-vs-tekton-vs-jenkins-x/">Spinnaker vs. Argo CD vs. Tekton vs. Jenkins X: Cloud-Native CI/CD&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="skaffold">Skaffold&lt;/h3>
&lt;p>開発・本番向けにKubernetesクラスタに継続的デリバリーを実施するコマンドラインツール。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/GoogleContainerTools/skaffold">https://github.com/GoogleContainerTools/skaffold&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://skaffold.dev/">https://skaffold.dev/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="その他">その他&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://k3s.io/">K3s: Lightweight Kubernetes&lt;/a> &amp;hellip; Rancherが出してる軽量版K8s&lt;/li>
&lt;li>&lt;a href="https://ksync.github.io/ksync/">ksync | Sync files between your local system and a kubernetes cluster.&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: エディタ</title><link>https://progrhy.me/tech-notes/a/program/vim/edit/</link><pubDate>Tue, 05 May 2020 14:04:38 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/vim/edit/</guid><description>
&lt;p>エディタを起動した後の使い方。&lt;br>
主にファイル編集に関わる操作。&lt;/p>
&lt;h2 id="全行の削除">全行の削除&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-vim" data-lang="vim">&lt;span style="color:#8f5902;font-style:italic">&amp;#34; 全行削除&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>%&lt;span style="color:#000">d&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://makaaso.hatenablog.com/entry/2015/04/24/221955">vim - 全行削除コマンド - IT Notebook&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="全行のインデント">全行のインデント&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-vim" data-lang="vim">&lt;span style="color:#8f5902;font-style:italic">&amp;#34; ファイル全体をインデント&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">gg&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">G&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://cl.pocari.org/2002-12-06-9.html">cl.pocari.org - Vim でインデントを整える&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="テキスト検索">テキスト検索&lt;/h2>
&lt;ul>
&lt;li>ノーマルモードで &lt;code>/&lt;/code> を打って検索。&lt;/li>
&lt;li>&lt;code>/\c&lt;/code> で始めると大文字小文字を区別せずに検索&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/shoma2da/items/23009d4e1a90c5fe5c31">Vim内で検索するときに大文字小文字を気にしない（ignore case）する方法 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="タブ文字の入力">タブ文字の入力&lt;/h2>
&lt;p>&lt;code>:set expandtab&lt;/code> （ &lt;code>:set et&lt;/code> ）設定の時でも、 &lt;code>Ctrl+v Tab&lt;/code> で入力できる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://nanasi.jp/articles/howto/editing/et-inserttab.html">:set expandtab（:set et）設定の時に、タブ文字を挿入する — 名無しのvim使い&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="改行文字の置換挿入削除">改行文字の置換（挿入/削除）&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">; &lt;span style="color:#000">改行を削除&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">s&lt;/span>&lt;span style="color:#4e9a06">/\n/&lt;/span>/&lt;span style="color:#000">g&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>; &lt;span style="color:#000">改行を挿入&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">s&lt;/span>&lt;span style="color:#4e9a06">//&lt;/span>\&lt;span style="color:#000">r&lt;/span>/&lt;span style="color:#000">g&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>See &lt;a href="https://qiita.com/kiduki/items/df724a7a7ae50e70c08c">vimの置換で改行を(挿入|削除)する - Qiita&lt;/a>&lt;/p></description></item><item><title>A: IntelliJ IDEA</title><link>https://progrhy.me/tech-notes/a/program/idea/</link><pubDate>Wed, 29 Apr 2020 10:44:28 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/idea/</guid><description>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;ul>
&lt;li>画面分割 &amp;hellip; &lt;code>Window &amp;gt; Editor Tabs &amp;gt; (Split Vertically|Split Horizontally)&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/pipi_taro/items/859d445960bb79a3ac78">IntelliJの使い方 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="plugins">Plugins&lt;/h2>
&lt;h3 id="file-watchers">File Watchers&lt;/h3>
&lt;p>ファイルを監視して自動で実行されるアクションを設定できる。&lt;br>
例えば、ファイルの変更を監視してコードフォーマッタを適用するとか。&lt;/p>
&lt;p>&lt;a href="https://pleiades.io/help/idea/using-file-watchers.html">ファイル監視 - 公式ヘルプ | IntelliJ IDEA&lt;/a>&lt;/p>
&lt;h2 id="how-to-upgrade">How to Upgrade&lt;/h2>
&lt;h3 id="ubuntu">Ubuntu&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/memo/2020/20200429/#ubuntu-1804%E3%81%A7intellij-idea%E3%82%9220201%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88">2020年に2018年版から2020.1にアップデートしたときのログ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sites.google.com/site/progrhymetechwiki/home/memo/2018/20180331#TOC-Ubuntu-16.04-IntelliJ-IDEA-">2018年に2017年版から2018.1にアップデートしたときのログ&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: BIOS</title><link>https://progrhy.me/tech-notes/a/firmware/bios/</link><pubDate>Mon, 04 May 2020 08:43:11 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/firmware/bios/</guid><description>
&lt;p>&lt;a href="http://e-words.jp/w/BIOS.html">BIOS（Basic Input/Output System）とは - IT用語辞典 e-Words&lt;/a>より:&lt;/p>
&lt;blockquote>
&lt;p>パソコンなどの主基板（マザーボード）などに格納されたコンピュータプログラム（ファームウェア）の一種で、起動時のOSの読み込みや、接続された装置・機器に対する基本的な入出力制御などを行うもの。&lt;/p>
&lt;/blockquote></description></item><item><title>A: ConfigMap</title><link>https://progrhy.me/tech-notes/a/software/k8s/configmap/</link><pubDate>Mon, 04 May 2020 22:39:04 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/configmap/</guid><description>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/secret/">Secret&lt;/a>&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-11/">Kubernetes道場 11日目 - ConfigMap / Secretについて - Toku&amp;rsquo;s Blog&lt;/a>より&lt;/p>
&lt;blockquote>
&lt;p>ConfigMapやSecretはアプリケーションの設定やクレデンシャルをコンテナイメージから分離するために使われる。&lt;br>
ConfigMapやSecretをVolumeとして、または環境変数を通してPodに設定やクレデンシャルを渡す。&lt;/p>
&lt;/blockquote>
&lt;p>ConfigMapはSecretと違い、値をencodeせずに平文でYAMLに書くので、普通の設定ファイル的な位置づけ。&lt;/p>
&lt;blockquote>
&lt;p>A ConfigMap is an API object used to store non-confidential data in key-value pairs. Pods can consume ConfigMaps as environment variables, command-line arguments, or as configuration files in a volume .&lt;/p>
&lt;/blockquote>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/tkusumi/items/cf7b096972bfa2810800">Kubernetes: ConfigMap / Secret の内容を一度に環境変数として読み込む (envFrom) - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;p>公式サイトにいくつかのガイドやサンプルがある:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/">Configure a Pod to Use a ConfigMap - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tutorials/configuration/configure-redis-using-configmap/">Configuring Redis using a ConfigMap | Kubernetes&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Container</title><link>https://progrhy.me/tech-notes/a/software/k8s/container/</link><pubDate>Mon, 04 May 2020 22:14:09 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/container/</guid><description>
&lt;p>Kubernetesにおいて、基本的にコンテナはPod内で定義され、実行される（はず）。&lt;/p>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/pod/">Pod&lt;/a>&lt;/p>
&lt;h2 id="cpuメモリの割当て">CPU/メモリの割当て&lt;/h2>
&lt;p>考え方やベストプラクティスについては&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/concept/#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%84pod%E3%81%B8%E3%81%AEcpu%E3%83%A1%E3%83%A2%E3%83%AA%E3%81%AE%E5%89%B2%E5%BD%93%E3%81%A6">Concept#コンテナやpodへのcpuメモリの割当て&lt;/a>を見よ。&lt;/p>
&lt;h2 id="コマンド引数の定義">コマンド/引数の定義&lt;/h2>
&lt;p>See &lt;a href="https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#notes">https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#notes&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Pod&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>command-demo&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">labels&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">purpose&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>demonstrate-command&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">containers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>command-demo-container&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">image&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>debian&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">command&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;printenv&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">args&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;HOSTNAME&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">restartPolicy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>OnFailure&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="livenessreadiness-probes">liveness/readiness probes&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Configure Liveness, Readiness and Startup Probes - Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ヘルスチェック的なもの。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-10/">Kubernetes道場 10日目 - LivenessProbe / ReadinessProbeについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="lifecycle-hooks">Lifecycle Hooks&lt;/h2>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/">https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/&lt;/a>&lt;/p>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/pod/#%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB">Pod#ライフサイクル&lt;/a>&lt;/p>
&lt;p>以下のフックを仕込むことで、コマンド実行などが可能。&lt;/p>
&lt;ul>
&lt;li>PostStart&lt;/li>
&lt;li>PreStop &amp;hellip; 終了直前に実行される&lt;/li>
&lt;/ul>
&lt;p>詳細な仕様はAPIリファレンスを見よ。&lt;/p>
&lt;p>設定例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Pod&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>lifecycle-demo&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">containers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>lifecycle-demo-container&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">image&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>httpd&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">lifecycle&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">preStop&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">exec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">command&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;sh&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;-c&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;sleep 2; httpd -k graceful-stop; sleep 30&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">terminationGracePeriodSeconds&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">40&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://44smkn.hatenadiary.com/entry/2018/08/01/022312">pod(Kubernetes)のlifecycle.prestopの挙動 - １クール続けるブログ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-06/">Kubernetes道場 6日目 - Init Container / Lifecycleについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: vimrc</title><link>https://progrhy.me/tech-notes/a/program/vim/vimrc/</link><pubDate>Tue, 05 May 2020 14:34:07 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/vim/vimrc/</guid><description>
&lt;p>Vimの設定ファイルであるvimrcについて。&lt;/p>
&lt;h2 id="どのファイルが読み込まれるか">どのファイルが読み込まれるか&lt;/h2>
&lt;p>&lt;a href="https://vim-jp.org/vimdoc-ja/starting.html#initialization">https://vim-jp.org/vimdoc-ja/starting.html#initialization&lt;/a>&lt;/p>
&lt;p>&lt;code>vim -u ${file}&lt;/code> で任意の設定ファイルを指定できる。&lt;/p>
&lt;h2 id="filetype">filetype&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#8f5902;font-style:italic">&amp;#34;filetype検出の有効化&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">filetype&lt;/span> &lt;span style="color:#000">on&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; プラグインやインデントのロードも有効化&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">filetype&lt;/span> &lt;span style="color:#000">plugin&lt;/span> &lt;span style="color:#000">indent&lt;/span> &lt;span style="color:#000">on&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; 拡張子によるfiletype検出の追加の例&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">autocmd&lt;/span> &lt;span style="color:#000">BufNewFile&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#000">BufRead&lt;/span> *.&lt;span style="color:#000">rb&lt;/span> &lt;span style="color:#000">setfiletype&lt;/span> &lt;span style="color:#000">ruby&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://wonderwall.hatenablog.com/entry/2016/03/20/222308">Vimメモ : filetypeの確認 - もた日記&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="キーマッピング">キーマッピング&lt;/h2>
&lt;p>&lt;a href="https://vim-jp.org/vimdoc-ja/map.html">map - Vim日本語ドキュメント&lt;/a>&lt;/p>
&lt;h3 id="マップコマンド">マップコマンド&lt;/h3>
&lt;p>&lt;a href="https://vim-jp.org/vimdoc-ja/map.html#:map-commands">https://vim-jp.org/vimdoc-ja/map.html#:map-commands&lt;/a>&lt;/p>
&lt;p>構文:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#000">map&lt;/span> {&lt;span style="color:#000">lhs&lt;/span>} {&lt;span style="color:#000">rhs&lt;/span>} &lt;span style="color:#8f5902;font-style:italic">&amp;#34; キー入力 {lhs} を {rhs} に割り当てる&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">unmap&lt;/span> {&lt;span style="color:#000">lhs&lt;/span>} &lt;span style="color:#8f5902;font-style:italic">&amp;#34; キー入力 {lhs} のマッピングを削除&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>map, nmapなど（ &lt;code>noremap&lt;/code> じゃないやつ）:&lt;/p>
&lt;ul>
&lt;li>マップが使われたときに &lt;code>{rhs}&lt;/code> が評価され、再マップされる&lt;/li>
&lt;li>マップを入れ子にしたり、再帰的にできる&lt;/li>
&lt;/ul>
&lt;p>noremap, nnoremapなど:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{rhs}&lt;/code> は再マップされないので、入れ子になったり再帰的になったりしない&lt;/li>
&lt;li>コマンドを再定義するときによく使われる&lt;/li>
&lt;/ul>
&lt;h3 id="マップとモード">マップとモード&lt;/h3>
&lt;p>&lt;a href="https://vim-jp.org/vimdoc-ja/map.html#:map-modes">https://vim-jp.org/vimdoc-ja/map.html#:map-modes&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>コマンド&lt;/th>
&lt;th>モード&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>map&lt;/code>, &lt;code>noremap&lt;/code>, &lt;code>unmap&lt;/code>&lt;/td>
&lt;td>ノーマル、ビジュアル、選択、オペレータ待機&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>nmap&lt;/code>, &lt;code>nnoremap&lt;/code>, &lt;code>nunmap&lt;/code>&lt;/td>
&lt;td>ノーマル&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>他に &lt;code>vmap&lt;/code>, &lt;code>smap&lt;/code>, &lt;code>xmap&lt;/code> などある。&lt;/p>
&lt;p>「オペレータ待機モード」は、&lt;code>d&lt;/code>、&lt;code>y&lt;/code>、&lt;code>c&lt;/code>などの後で、後続の操作を待機しているとき。&lt;/p>
&lt;h3 id="キーマッピングを確認する方法">キーマッピングを確認する方法&lt;/h3>
&lt;p>&lt;a href="https://qiita.com/wakaba260/items/99ea1b8042c98fb7df93">Vimのキーマッピングを確認する - Qiita&lt;/a>より。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#8f5902;font-style:italic">&amp;#34; デフォルトキーバインドの一覧&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">help&lt;/span> &lt;span style="color:#000">index&lt;/span>.&lt;span style="color:#000">txt&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; 自分で割り当てたキーマップの確認&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">map&lt;/span> &lt;span style="color:#8f5902;font-style:italic">&amp;#34; すべて確認&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">imap&lt;/span> &lt;span style="color:#8f5902;font-style:italic">&amp;#34; インサートモードだけ&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#8f5902;font-style:italic">&amp;#34; ノーマルモードだけ&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">vmap&lt;/span> &lt;span style="color:#8f5902;font-style:italic">&amp;#34; ヴィジュアルモードだけ&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#000">verbose&lt;/span> &lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#8f5902;font-style:italic">&amp;#34; 定義元ファイル情報も表示&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>A: Deployment</title><link>https://progrhy.me/tech-notes/a/software/k8s/deployment/</link><pubDate>Mon, 04 May 2020 21:45:16 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/deployment/</guid><description>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/concepts/workloads/controllers/deployment/">https://kubernetes.io/ja/docs/concepts/workloads/controllers/deployment/&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>Deployment コントローラーはPodとReplicaSetの宣言的なアップデート機能を提供します。&lt;/p>
&lt;/blockquote>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>apps/v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Deployment&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>nginx-deployment&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">namespace&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>app&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">selector&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">matchLabels&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">app&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>nginx&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">replicas&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">template&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">labels&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">app&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>nginx&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">containers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>nginx&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">image&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>nginx&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">ports&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">containerPort&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-08/">Kubernetes道場 8日目 - ReplicaSet / Deploymentについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="spec">spec&lt;/h2>
&lt;h3 id="strategy">strategy&lt;/h3>
&lt;p>更新戦略。&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">strategy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">rollingUpdate&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">maxSurge&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">25&lt;/span>%&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">maxUnavailable&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">25&lt;/span>%&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>RollingUpdate&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上はデフォルト値。&lt;/p>
&lt;ul>
&lt;li>type &amp;hellip; &lt;code>Recreate&lt;/code> を選ぶと既存の全てのPodは新しいPodが作成される前に削除される&lt;/li>
&lt;li>&lt;code>maxSurge&lt;/code> &amp;hellip; 理想状態のPod数を超えて作成できる最大のPod数/割合。絶対数も指定可能&lt;/li>
&lt;li>&lt;code>maxUnavailable&lt;/code> &amp;hellip; 更新中に利用不可となる最大のPod数/割合。絶対数も指定可能
&lt;ul>
&lt;li>本番ではキャパシティが低下しないように &lt;code>0&lt;/code> にしておいた方が良さそう。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/TakiTake@github/items/bfc977baf4b909b1e118">KubernetesのRolling updateを安全に行う - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rahmonov.me/posts/zero-downtime-deployment-with-kubernetes/">Zero Downtime Deployment with Kubernetes&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: CLI</title><link>https://progrhy.me/tech-notes/a/google/gcp/cli/</link><pubDate>Wed, 29 Apr 2020 22:59:42 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/cli/</guid><description>
&lt;h2 id="cloud-sdk">Cloud SDK&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/sdk/docs?hl=ja">https://cloud.google.com/sdk/docs?hl=ja&lt;/a>&lt;/p>
&lt;p>&lt;code>gcloud&lt;/code>, &lt;code>gsutil&lt;/code>, &lt;code>bq&lt;/code> CLIもこれに含まれる。&lt;/p>
&lt;ul>
&lt;li>プロキシ設定
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/sdk/docs/proxy-settings?hl=ja">プロキシ / ファイアウォールの背後で Cloud SDK を使用する場合の構成 | Cloud SDK のドキュメント&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="gcloud">gcloud&lt;/h2>
&lt;ul>
&lt;li>Getting Started: &lt;a href="https://cloud.google.com/sdk/gcloud/?hl=ja">https://cloud.google.com/sdk/gcloud/?hl=ja&lt;/a>&lt;/li>
&lt;li>リファレンス: &lt;a href="https://cloud.google.com/sdk/gcloud/reference/?hl=ja">https://cloud.google.com/sdk/gcloud/reference/?hl=ja&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>新しめの機能の場合、 &lt;code>gcloud beta ...&lt;/code> や &lt;code>gcloud alpha ...&lt;/code> にしかコマンドがなかったり、 &lt;code>beta ...&lt;/code> や &lt;code>alpha ...&lt;/code> を付けることで結果が変わることがある&lt;/li>
&lt;/ul>
&lt;h3 id="認証">認証&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 初期設定(認証込)&lt;/span>
gcloud init
&lt;span style="color:#8f5902;font-style:italic">## ログイン認証&lt;/span>
gcloud auth login
&lt;span style="color:#8f5902;font-style:italic">## 現在認証済みのアカウント一覧&lt;/span>
gcloud auth list
&lt;span style="color:#8f5902;font-style:italic">## サービスアカウントの認証&lt;/span>
gcloud auth activate-service-account --key-file &amp;lt;KEYFILE&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## アクセストークンの表示&lt;/span>
gcloud auth print-access-token
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/sdk/docs/authorizing?hl=ja">Cloud SDK ツールの承認 | Cloud SDK のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="compute">compute&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/compute">https://cloud.google.com/sdk/gcloud/reference/compute&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## ssh&lt;/span>
gcloud compute ssh &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--project&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;PROJECT&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--zone&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;ZONE&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--internal-ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> --tunnel-through-iap&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &amp;lt;INSTANCE&amp;gt; &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>-- &amp;lt;SSH_ARGS&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## scp&lt;/span>
gcloud compute scp &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--project&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;PROJECT&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--zone&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;ZONE&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--internal-ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> --tunnel-through-iap&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--recurse&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> host:/path/to/dir path/to/local
&lt;span style="color:#8f5902;font-style:italic">## 証明書&lt;/span>
gcloud compute ssl-certificates
&lt;span style="color:#8f5902;font-style:italic">### 一覧表示&lt;/span>
gcloud compute ssl-certificates list
&lt;span style="color:#8f5902;font-style:italic">## イメージの作成&lt;/span>
gcloud compute images create my-image --source-disk my-vm-disk
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="instances">instances&lt;/h4>
&lt;p>VM操作&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/compute/instances">https://cloud.google.com/sdk/gcloud/reference/compute/instances&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/compute/instances/create">create&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 一覧&lt;/span>
gcloud compute instances list
&lt;span style="color:#8f5902;font-style:italic">## 起動&lt;/span>
gcloud compute instances start &amp;lt;INSTANCE&amp;gt; --zone&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;ZONE&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## 停止&lt;/span>
gcloud compute instances stop &amp;lt;INSTANCE&amp;gt; --zone&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;ZONE&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## 作成&lt;/span>
gcloud compute instances create my-instance &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --project&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-project --zone&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>asia-northeast1-b &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --no-address &lt;span style="color:#4e9a06">\ &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># 外部IPなし&lt;/span>
--custom-vm-type&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>n1 &lt;span style="color:#4e9a06">\ &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># N1インスタンス&lt;/span>
--custom-cpu&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> --custom-memory&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>8GB &lt;span style="color:#4e9a06">\ &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># リソースをカスタマイズする場合&lt;/span>
--image-project&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>another-project --image&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-image &lt;span style="color:#8f5902;font-style:italic"># 別プロジェクトのイメージを使う&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/images/sharing-images-across-projects?hl=ja">イメージとスナップショットの共有 | Compute Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="config">config&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/config">https://cloud.google.com/sdk/gcloud/reference/config&lt;/a>&lt;/p>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 設定値一覧表示&lt;/span>
gcloud config list
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/sky0621/items/597d4de7ed9ba7e31f6d">gcloud configで複数の設定を持って切り替える - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="configurations">configurations&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/config/configurations">https://cloud.google.com/sdk/gcloud/reference/config/configurations&lt;/a>&lt;/p>
&lt;p>設定プロファイルの管理&lt;/p>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## プロファイル一覧表示&lt;/span>
gcloud config configurations list
&lt;span style="color:#8f5902;font-style:italic">## 表示&lt;/span>
gcloud config configurations describe プロファイル名
&lt;span style="color:#8f5902;font-style:italic">## 作成&lt;/span>
gcloud config configurations create プロファイル名
&lt;span style="color:#8f5902;font-style:italic">## 削除&lt;/span>
gcloud config configurations delete プロファイル名
&lt;span style="color:#8f5902;font-style:italic">## 有効化&lt;/span>
gcloud config configurations activate プロファイル名
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/sdk/docs/configurations?hl=ja">SDK 構成の管理 | Cloud SDK のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="set">set&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/config/set">https://cloud.google.com/sdk/gcloud/reference/config/set&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gcloud config &lt;span style="color:#204a87">set&lt;/span> project my-project
gcloud config &lt;span style="color:#204a87">set&lt;/span> compute/region asia-northeast1
gcloud config &lt;span style="color:#204a87">set&lt;/span> compute/zone asia-northeast1-a
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="functions">functions&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/functions">https://cloud.google.com/sdk/gcloud/reference/functions&lt;/a>&lt;/p>
&lt;p>Cloud Functionsの操作&lt;/p>
&lt;h4 id="deploy">deploy&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/functions/deploy">https://cloud.google.com/sdk/gcloud/reference/functions/deploy&lt;/a>&lt;/p>
&lt;p>Cloud Functionのデプロイ（作成・更新）&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## cloud-buildsイベントをフックに動くFunctionのデプロイ&lt;/span>
gcloud functions deploy &amp;lt;Function Name&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --trigger-topic cloud-builds &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --runtime nodejs10 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --set-env-vars &lt;span style="color:#4e9a06">&amp;#34;FOO=foo,BAR=bar&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --project my-project
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="logging">logging&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/logging">https://cloud.google.com/sdk/gcloud/reference/logging&lt;/a>&lt;/p>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>&lt;code>read&lt;/code>, &lt;code>list&lt;/code>などのコマンド利用時には serviceusage.services.use 権限が必要&lt;/li>
&lt;/ul>
&lt;h4 id="read">read&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/logging/read">https://cloud.google.com/sdk/gcloud/reference/logging/read&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gcloud logging &lt;span style="color:#204a87">read&lt;/span> --format json
gcloud logging &lt;span style="color:#204a87">read&lt;/span> --limit&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> --order&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>asc
gcloud logging &lt;span style="color:#204a87">read&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;timestamp&amp;gt;=&amp;#34;2020-03-19T05:28:00Z&amp;#34; timestamp&amp;lt;=&amp;#34;2020-03-25T05:33:28Z&amp;#34;&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>※2020-04-20現在、 &lt;code>tail -f&lt;/code> 相当のオプションはなさそう&lt;/p>
&lt;h3 id="projects">projects&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/projects/">https://cloud.google.com/sdk/gcloud/reference/projects/&lt;/a>&lt;/p>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## プロジェクト一覧&lt;/span>
gcloud projects list
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="参考">参考&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/masaaania/items/7a83c5e44e351b4a3a2c">よく使うgcloudコマンドたち - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="gsutil">gsutil&lt;/h2>
&lt;p>Cloud Storage用のPython製CLI&lt;/p>
&lt;ul>
&lt;li>ドキュメント: &lt;a href="https://cloud.google.com/storage/docs/gsutil">https://cloud.google.com/storage/docs/gsutil&lt;/a>&lt;/li>
&lt;li>コマンドリファレンス: &lt;a href="https://cloud.google.com/storage/docs/gsutil/commands/help">https://cloud.google.com/storage/docs/gsutil/commands/help&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="mb">mb&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/storage/docs/gsutil/commands/mb">https://cloud.google.com/storage/docs/gsutil/commands/mb&lt;/a>&lt;/p>
&lt;p>バケット作成&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gsutil mb -l asia gs://mybucket
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>A: Bitbucket</title><link>https://progrhy.me/tech-notes/a/web-service/bitbucket/</link><pubDate>Tue, 28 Apr 2020 00:22:53 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/web-service/bitbucket/</guid><description>
&lt;p>Atlassian社が提供しているソースコードのホスティングサービス。&lt;br>
JIRAなど他のAtlassian製品との連携が強み（だと思う）。&lt;/p>
&lt;h2 id="提供形態">提供形態&lt;/h2>
&lt;ul>
&lt;li>クラウド &amp;hellip; Bitbucket Cloud&lt;/li>
&lt;li>セルフホスト &amp;hellip; オンプレミス
&lt;ul>
&lt;li>Bitbucket Server &amp;hellip; 単一サーバ&lt;/li>
&lt;li>Bitbucket Datacenter &amp;hellip; クラスタ構成&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://confluence.atlassian.com/bitbucket">Bitbucket Cloud documentation - Atlassian Documentation&lt;/a>&lt;/li>
&lt;li>邦訳: &lt;a href="https://ja.confluence.atlassian.com/bitbucket/bitbucket-cloud-documentation-221448814.html">Bitbucket Cloud ドキュメント - アトラシアン製品ドキュメント&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/manage-webhooks-735643732.html">Webhook を管理する - アトラシアン製品ドキュメント&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/publishing-a-website-on-bitbucket-cloud-221449776.html">Bitbucket Cloud で Web サイトを公開する - アトラシアン製品ドキュメント&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="pipelines">Pipelines&lt;/h2>
&lt;p>付属のCI/CDツール。&lt;/p>
&lt;p>&lt;a href="https://www.atlassian.com/ja/software/bitbucket/features/pipelines">製品ページ&lt;/a>&lt;/p>
&lt;h3 id="documentation-1">Documentation&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://confluence.atlassian.com/bitbucket/build-test-and-deploy-with-pipelines-792496469.html">Build, test, and deploy with Pipelines&lt;/a>&lt;/li>
&lt;li>邦訳: &lt;a href="https://ja.confluence.atlassian.com/bitbucket/build-test-and-deploy-with-pipelines-792496469.html">Pipelines を使用したビルド、テスト、およびデプロイ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/yaml-anchors-960154027.html">YAML アンカー&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/bitbucket-pipelines-faq-827104769.html">Bitbucket Pipelines の FAQ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>デモリポジトリ: &lt;a href="https://bitbucket.org/bitbucketpipelines/workspace/projects/DOC">https://bitbucket.org/bitbucketpipelines/workspace/projects/DOC&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/mochio/items/33584357e924f55f9023">【初心者向け】bitbucket-pipelinesのキーワードとTips - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="プルリクエストで実行する">プルリクエストで実行する&lt;/h3>
&lt;p>ドキュメント: &lt;a href="https://ja.confluence.atlassian.com/bitbucket/configure-bitbucket-pipelines-yml-792298910.html">bitbucket-pipelines.yml の設定 - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;p>&lt;code>pull-requests&lt;/code> というキーワードによって、PRをトリガーとするパイプライン処理を記述できる。&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">pipelines&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">pull-requests&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#39;**&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">#this runs as default for any branch not elsewhere defined&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">step&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- ...&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">feature/*&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">#any branch with a feature prefix&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">step&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- ...&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/deploy-with-pull-requests-856832274.html">プル リクエストを使用したデプロイ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ステップを手動実行する">ステップを手動実行する&lt;/h3>
&lt;p>ドキュメント: &lt;a href="https://ja.confluence.atlassian.com/bitbucket/configure-bitbucket-pipelines-yml-792298910.html">bitbucket-pipelines.yml の設定 - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;code>trigger: manual&lt;/code> をつける。&lt;/li>
&lt;li>※最初のステップは手動にはできない&lt;/li>
&lt;/ul>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">pipelines&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">step&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- ./run-test.sh&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">step&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trigger&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>manual&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- ./deploy.sh&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Tips:&lt;/p>
&lt;ul>
&lt;li>パイプライン全体を手動トリガーで実行する場合、customパイプラインを使う&lt;/li>
&lt;/ul>
&lt;h3 id="dockerイメージの利用">Dockerイメージの利用&lt;/h3>
&lt;p>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/use-docker-images-as-build-environments-792298897.html">Docker イメージをビルド環境として使用する - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;ul>
&lt;li>DockerHubでは認証情報を渡すことでプライベートイメージの利用も可能&lt;/li>
&lt;li>AWSのECRやGCPのGCRも利用可能&lt;/li>
&lt;/ul>
&lt;h3 id="パイプラインの変数">パイプラインの変数&lt;/h3>
&lt;p>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/variables-in-pipelines-794502608.html">パイプラインでの変数 - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;ul>
&lt;li>「secure」チェックをONにすると、パイプラインの実行ログ上でもマスクされ、表示されなくなる
&lt;ul>
&lt;li>&lt;code>$MY_SECRET&lt;/code> のように表示される&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="deployments">Deployments&lt;/h3>
&lt;p>Documentation:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/bitbucket-deployments-940695276.html">Bitbucket Deployments - アトラシアン製品ドキュメント&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/set-up-bitbucket-deployments-968683907.html">Bitbucket Deployments のセットアップ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/rollbacks-981147477.html">ロールバック&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>Deployments設定で、デプロイ先環境の管理ができる。&lt;/li>
&lt;li>bitbucket-pipelines.ymlのstep設定で &lt;code>deployment: Production&lt;/code> などと指定すると、そのstepのビルドがデプロイ先環境と紐付けられる。&lt;/li>
&lt;li>ダッシュボードで履歴が確認できる&lt;/li>
&lt;li>ロールバックもGUIぽちぽちで行ける&lt;/li>
&lt;/ul>
&lt;h3 id="パイプラインをトリガーせずにコミット">パイプラインをトリガーせずにコミット&lt;/h3>
&lt;p>コミットメッセージに &lt;code>[skip ci]&lt;/code> または &lt;code>[ci skip]&lt;/code> を含める。&lt;/p>
&lt;p>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/bitbucket-pipelines-faq-827104769.html">Bitbucket Pipelines の FAQ - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;h3 id="パイプラインからリポジトリを変更してプッシュする">パイプラインからリポジトリを変更してプッシュする&lt;/h3>
&lt;p>&lt;a href="https://ja.confluence.atlassian.com/bitbucket/push-back-to-your-repository-962352710.html">リポジトリにプッシュ バックする - アトラシアン製品ドキュメント&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">pipelines&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">step&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- echo&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Made a change in build ${BITBUCKET_BUILD_NUMBER}&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&amp;gt;&amp;gt;&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>changes.txt&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- git&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>add&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>changes.txt&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- git&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>commit&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-m&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[skip ci] Updating changes.txt with latest build number.&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- git&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>push&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>A: Cloud Functions</title><link>https://progrhy.me/tech-notes/a/google/gcp/function/</link><pubDate>Mon, 04 May 2020 09:26:37 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/function/</guid><description>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/functions/docs?hl=ja">https://cloud.google.com/functions/docs?hl=ja&lt;/a>&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="ログ出力">ログ出力&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/functions/docs/monitoring/logging">https://cloud.google.com/functions/docs/monitoring/logging&lt;/a>&lt;/p>
&lt;p>Cloud Loggingにログを送ることができる。&lt;br>
言語によってやり方が異なる。&lt;/p>
&lt;ul>
&lt;li>共通: 標準出力/標準エラー出力&lt;/li>
&lt;li>Node.js
&lt;ul>
&lt;li>&lt;code>console.log()&lt;/code> -&amp;gt; &lt;code>INFO&lt;/code> ログ&lt;/li>
&lt;li>&lt;code>console.error()&lt;/code> -&amp;gt; &lt;code>ERROR&lt;/code> ログ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/Sho2010@github/items/460900d16cdee7f3d2bd">Cloud FunctionsのlogをstackdriverにjsonPayloadで送りたい - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="vpc接続">VPC接続&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/functions/docs/connecting-vpc?hl=ja">VPC ネットワークへの接続 | Cloud Functions のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Cloud Identity and Access Management (IAM)</title><link>https://progrhy.me/tech-notes/a/google/gcp/iam/</link><pubDate>Mon, 04 May 2020 09:26:28 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/iam/</guid><description>
&lt;p>&lt;a href="https://cloud.google.com/iam/docs">https://cloud.google.com/iam/docs&lt;/a>&lt;/p>
&lt;p>Cloud IAM. Google IDベースのアクセス管理ができる。&lt;/p>
&lt;p>Googleグループを設定することもできる。&lt;/p>
&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/iam/docs/permissions-reference">IAM permissions reference&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="compute-engineへのアクセス権限">Compute Engineへのアクセス権限&lt;/h3>
&lt;p>関係するRoles:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Role&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>roles/compute.instanceAdmin.v1&lt;/td>
&lt;td>インスタンスの作成・削除・編集など&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>roles/iam.serviceAccountUser&lt;/td>
&lt;td>サービスアカウントの利用。インスタンス作成にも必要&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>roles/iap.tunnelResourceAccessor&lt;/td>
&lt;td>IAP経由でインスタンスにSSHするために必要&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/iap/docs/managing-access?hl=ja">IAP で保護されたリソースへのアクセスの管理 | Identity-Aware Proxy のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/iam/docs/faq?hl=ja" title="よくある質問 | Cloud Identity and Access Management のドキュメント | Google Cloud">よくある質問 | Cloud Identity and Access Management のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ameblo.jp/principia-ca/entry-12144854519.html" title="GCPのCloud IAMを試してみた | サイバーエージェント 公式エンジニアブログ">GCPのCloud IAMを試してみた | サイバーエージェント 公式エンジニアブログ&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: dpkg</title><link>https://progrhy.me/tech-notes/a/software/pkg-man/dpkg/</link><pubDate>Mon, 04 May 2020 17:18:57 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/pkg-man/dpkg/</guid><description>
&lt;p>ハイレベルのインタフェースとして &lt;strong>apt&lt;/strong>, &lt;strong>apt-get&lt;/strong>, &lt;strong>aptitude&lt;/strong> がある。&lt;br>
昔からあるのがaptitudeで、最近あまり使われてない気がするが、2017年11月18日現在、これにしかない機能もあるそうだ。&lt;br>
aptは最先端のようだが、すべてaptで賄えるというわけではまだなさそう。&lt;/p>
&lt;p>dpkg &amp;lt;=&amp;gt; aptの関係は、RHEL系におけるrpm &amp;lt;=&amp;gt; yumの関係と似ている。&lt;/p>
&lt;p>つまり、dpkgは低レベルのインタフェースであり、aptは内部的にdpkgを使っている。&lt;br>
…というようなことが &lt;a href="http://www.tkd55.net/?p=816">Debian系のファイル管理コマンドもまとめてみた | tkd55&lt;/a> に書いてあった。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://sites.google.com/site/progrhymetechwiki/home/memo/2016/20160604#TOC-apt-">https://sites.google.com/site/progrhymetechwiki/home/memo/2016/20160604#TOC-apt-&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ドキュメント">ドキュメント&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://debian-handbook.info/browse/ja-JP/stable/">Debian 管理者ハンドブック&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://debian-handbook.info/browse/ja-JP/stable/sect.apt-get.html">6.2. aptitude、apt-get、apt コマンド&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://linux.die.net/man/1/dpkg">dpkg(1): package manager for Debian - Linux man page&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://ja.manpages.org/apt/8">man apt (8): コマンドラインインターフェイス&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://linux.die.net/man/8/apt-get">apt-get(8) - Linux man page&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://linux.die.net/man/8/aptitude">aptitude(8) - Linux man page&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="コマンド">コマンド&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># パッケージリストの更新&lt;/span>
apt update
&lt;span style="color:#8f5902;font-style:italic"># パッケージの更新&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 最低限可能なアップグレードを行う&lt;/span>
apt upgrade
apt-get upgrade
aptitude safe-upgrade
&lt;span style="color:#8f5902;font-style:italic"># パッケージの検索&lt;/span>
apt search &lt;span style="color:#000">$QUERY&lt;/span>
apt-cache search &lt;span style="color:#000">$QUERY&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># パッケージの削除&lt;/span>
apt remove &lt;span style="color:#000">$PACKAGE&lt;/span>...
apt-get remove &lt;span style="color:#000">$PACKAGE&lt;/span>...
&lt;span style="color:#8f5902;font-style:italic">## 不要なパッケージを削除 ... 依存関係でインストールされたが、使われなくなったもの&lt;/span>
apt autoremove
&lt;span style="color:#8f5902;font-style:italic"># インストールされたパッケージの一覧&lt;/span>
dpkg -l
&lt;span style="color:#8f5902;font-style:italic"># パッケージがインストールされているか調べる&lt;/span>
dpkg -l &lt;span style="color:#000">$PACKAGE&lt;/span>
dpkg-query -l &lt;span style="color:#000">$PACKAGE&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># インストールされたパッケージに含まれるファイルリストを表示&lt;/span>
dpkg-query -L &lt;span style="color:#000">$PACKAGE&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="インストール">インストール&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">apt install &lt;span style="color:#000">$PACKAGE&lt;/span>...
apt-get install &lt;span style="color:#000">$PACKAGE&lt;/span>...
&lt;span style="color:#8f5902;font-style:italic"># バージョン指定&lt;/span>
apt-get install &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">PACKAGE&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">VERSION&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>...
&lt;span style="color:#8f5902;font-style:italic"># .debパッケージファイルをインストール&lt;/span>
dpkg -i foo.deb
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/isaoshimizu/items/e9c7fdc8efad66422cae">apt-getでversionを指定してインストールする方法 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="参考">参考&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.tkd55.net/?p=816">Debian系のファイル管理コマンドもまとめてみた | tkd55&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://d.hatena.ne.jp/bluerepliroid/20071205/1197288679">aptとdpkg - intrinsic feeling&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/SUZUKI_Masaya/items/1fd9489e631c78e5b007">aptコマンドチートシート - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://news.mynavi.jp/article/20100420-a053/">rpm、deb、depot、msiパッケージの展開と一覧表示コマンドまとめ | マイナビニュース&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: kubectl</title><link>https://progrhy.me/tech-notes/a/software/k8s/kubectl/</link><pubDate>Fri, 01 May 2020 12:15:07 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/kubectl/</guid><description>
&lt;p>Kubernetesクラスタを制御するCLI.&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubectl/overview/">https://kubernetes.io/docs/reference/kubectl/overview/&lt;/a>&lt;/li>
&lt;li>リファレンス: &lt;a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">kubectl Cheat Sheet - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubectl.docs.kubernetes.io/">https://kubectl.docs.kubernetes.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-23/">Kubernetes道場 23日目 - kubectlを網羅する - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="周辺ツール">周辺ツール&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://krew.sigs.k8s.io/">Krew&lt;/a> &amp;hellip; kubectl plugin manager&lt;/li>
&lt;li>&lt;a href="https://github.com/ahmetb/kubectx">kubectx&lt;/a> &amp;hellip; context, namespaceの切替を簡単にしてくれる&lt;/li>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/kustomize/">kustomize&lt;/a> &amp;hellip; Kubernetesのマニフェスト管理ツール。kubectl 1.14からkubectlに取り込まれた&lt;/li>
&lt;li>&lt;a href="https://github.com/lbolla/kube-secret-editor">lbolla/kube-secret-editor&lt;/a> &amp;hellip; secretをデコードした状態で編集することを可能にし、編集後にエンコードして保存してくれる&lt;/li>
&lt;/ul>
&lt;h2 id="設定">設定&lt;/h2>
&lt;h3 id="kubeconfig">kubeconfig&lt;/h3>
&lt;p>環境設定ファイルkubeconfigを参照する順番:&lt;/p>
&lt;blockquote>
&lt;ol>
&lt;li>&lt;code>--kubeconfig&lt;/code> フラグで指定されたパス&lt;/li>
&lt;li>&lt;code>$KUBECONFIG&lt;/code> 環境変数に指定されたパス一覧&lt;/li>
&lt;li>&lt;code>~/.kube/config&lt;/code>&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>See &lt;a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/">Organizing Cluster Access Using kubeconfig Files - Kubernetes&lt;/a>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/shoichiimamura/items/91208a9b30e701d1e7f2">kubectlの接続設定ファイル（kubeconfig）の概要 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ユースケース">ユースケース&lt;/h2>
&lt;h3 id="環境設定---config--context">環境設定 - config &amp;amp; context&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## kubeconfig 表示&lt;/span>
kubectl config view
&lt;span style="color:#8f5902;font-style:italic">## context&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">### 一覧表示&lt;/span>
kubectl config get-contexts
&lt;span style="color:#8f5902;font-style:italic">### 現在のcontext&lt;/span>
kubectl config current-context
&lt;span style="color:#8f5902;font-style:italic">### 変更&lt;/span>
kubectl config use-context &amp;lt;context-name&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl?hl=ja">kubectl 用のクラスタ アクセスの構成 | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="実行公開">実行・公開&lt;/h3>
&lt;ul>
&lt;li>run &amp;hellip; コンテナイメージを実行する。deploymentまたはjobが作られる。&lt;/li>
&lt;li>expose &amp;hellip; リソースをクラスタ外にServiceとして公開する。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## run&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">### 例&lt;/span>
kubectl run nginx --image&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>nginx
&lt;span style="color:#8f5902;font-style:italic">## expose&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">### 例&lt;/span>
kubectl expose deployment &amp;lt;deployment-name&amp;gt; --port&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span> --target-port&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8000&lt;/span>
kubectl run &amp;lt;deployment-name&amp;gt; --image&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;image-name&amp;gt; --port&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;port&amp;gt;
kubectl expose deployment &amp;lt;deployment-name&amp;gt; --type&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NodePort
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="app-management">App Management&lt;/h3>
&lt;ul>
&lt;li>autoscale&lt;/li>
&lt;li>scale &amp;hellip; 次のリソースのサイズを設定する:
&lt;ul>
&lt;li>Deployment, ReplicaSet, Replication Controller, StatefulSet&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## scale&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">### ReplicaSet &amp;#39;foo&amp;#39; を3に&lt;/span>
kubectl scale --replicas&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> rs/foo
kubectl scale --replicas&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> -f foo.yml
&lt;span style="color:#8f5902;font-style:italic">### 今のサイズが2だったら3にする&lt;/span>
kubectl scale --current-replicas&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> --replicas&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> deployment/mysql
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="リソース管理">リソース管理&lt;/h3>
&lt;h4 id="作成更新">作成・更新&lt;/h4>
&lt;ul>
&lt;li>create/apply/replace &amp;hellip; JSON or YAMLのリソース定義ファイルを適用して、リソースを作成/更新する。&lt;/li>
&lt;li>patch &amp;hellip; YAML/JSONのマージを用いて、リソース定義を差分更新する&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># create&lt;/span>
kubectl create -f &amp;lt;Path or URL of config file&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## ファイルから Secret を作成&lt;/span>
kubectl create secret generic my-secret --from-file&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>./secret/secret.json
&lt;span style="color:#8f5902;font-style:italic">## ファイルから ConfigMap を作成&lt;/span>
kubectl create configmap my-config --from-file&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>./config/config.json
&lt;span style="color:#8f5902;font-style:italic"># apply&lt;/span>
kubectl apply -f &amp;lt;Path or URL of config file&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## 例&lt;/span>
kubectl apply -f https://k8s.io/docs/tasks/run-application/deployment.yaml
kubectl apply -f ./pod.json
&lt;span style="color:#8f5902;font-style:italic"># replace&lt;/span>
kubectl replace -f &amp;lt;Path or URL of config file&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># patch&lt;/span>
kubectl patch &amp;lt;Resource Type&amp;gt; &amp;lt;Name&amp;gt; --patch &amp;lt;YAML Content&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## 例&lt;/span>
kubectl patch deployment patch-demo --patch &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>cat patch-file.yaml&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/">Update API Objects in Place Using kubectl patch - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tellme.tokyo/post/2018/08/07/kubernetes-configmaps-secrets/">Kubernetes 上で Credentials を扱う | tellme.tokyo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-23/">Kubernetes道場 23日目 - kubectlを網羅する - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://codeday.me/jp/qa/20190406/566540.html">kubectl applyとkubectl replaceの違いは何ですか - コードログ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="pod操作">Pod操作&lt;/h4>
&lt;ul>
&lt;li>exec &amp;hellip; コマンドをコンテナ内で実行する&lt;/li>
&lt;li>cp &amp;hellip; ファイルをクライアント環境とPod間でやりとり&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## exec&lt;/span>
kubectl &lt;span style="color:#204a87">exec&lt;/span> &amp;lt;pod&amp;gt; -- &amp;lt;command&amp;gt; &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>args...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">### podにbashでログイン&lt;/span>
kubectl &lt;span style="color:#204a87">exec&lt;/span> -it &amp;lt;pod&amp;gt; -- /bin/bash -l
&lt;span style="color:#8f5902;font-style:italic">## cp&lt;/span>
kubectl cp path/to/localfile &amp;lt;pod&amp;gt;:/path/to/remotefile
kubectl cp &amp;lt;pod&amp;gt;:/path/to/remotefile /path/to/localfile
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/suzukihi724/items/515654f54538a2103ee0">kubernetes: コンテナイメージにログインする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="node操作">Node操作&lt;/h4>
&lt;ul>
&lt;li>cordon &amp;hellip; ノードへのスケジュールを停止&lt;/li>
&lt;li>drain &amp;hellip; ノードからPodを削除&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## cordon&lt;/span>
kubectl cordon &amp;lt;node-name&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## drain&lt;/span>
kubectl drain &amp;lt;node-name&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">### DaemonSetで管理されてPodを停止するとき&lt;/span>
kubectl drain &amp;lt;node-name&amp;gt; --ignore-daemonsets
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://blog.applibot.co.jp/2016/12/27/kubernetes-zero-downtime/">kubernetesの無停止運用を意識した検証 – てっくぼっと！&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/toshihirock/items/d22fee20b1a561b9efea">Kubernetes の drain について検証した時のメモ - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="表示">表示&lt;/h4>
&lt;ul>
&lt;li>get &amp;hellip; 単一・複数リソースの情報を表示する。&lt;/li>
&lt;li>describe &amp;hellip; 単一リソース or グループの情報を表示&lt;/li>
&lt;li>diff &amp;hellip; リソースファイルとクラスタの状態を差分表示&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># get&lt;/span>
kubectl get deploy&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ments&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
kubectl get po&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ds&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>-o json&lt;span style="color:#000;font-weight:bold">|&lt;/span>yaml&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## フィルタの例&lt;/span>
kubectl get pods -l &lt;span style="color:#000">app&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>nginx
&lt;span style="color:#8f5902;font-style:italic"># describe&lt;/span>
kubectl describe pods &lt;span style="color:#8f5902;font-style:italic"># all pods&lt;/span>
kubectl describe pod &amp;lt;pod-name&amp;gt;
kubectl describe deploy&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ment&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &amp;lt;deployment-name&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># diff&lt;/span>
kubectl diff -f foo.yml
&lt;span style="color:#8f5902;font-style:italic">## kustomizeバージョン&lt;/span>
kubectl diff -k .
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="削除">削除&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## delete&lt;/span>
kubectl delete deployment &amp;lt;deployment-name&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="サブコマンド">サブコマンド&lt;/h2>
&lt;h3 id="apply">apply&lt;/h3>
&lt;p>基本的な利用イメージは&lt;a href="#%E4%BD%9C%E6%88%90%E6%9B%B4%E6%96%B0">ユースケース &amp;gt; リソース管理 &amp;gt; 作成更新&lt;/a>を見よ。&lt;/p>
&lt;p>オプション:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>オプション&lt;/th>
&lt;th>デフォルト&lt;/th>
&lt;th>機能&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>--prune&lt;/code>&lt;/td>
&lt;td>&lt;code>false&lt;/code>&lt;/td>
&lt;td>α in 2020-0505. &lt;br />指定されてないリソースを削除する。ただし、&lt;br /> &lt;code>--save-config&lt;/code> オプション付きで作られたものは除く。&lt;br /> &lt;code>-l&lt;/code> フィルタか &lt;code>--all&lt;/code> オプションと同時に使うべし&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>--prune-whitelist&lt;/code>&lt;/td>
&lt;td>&lt;code>[]&lt;/code>&lt;/td>
&lt;td>&lt;code>--prune&lt;/code> で使うデフォルトのホワイトリストを上書きする&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># app=nginxラベルのリソースにマニフェストを適用し、マニフェスト外のリソースを削除する&lt;/span>
kubectl apply --prune -f manifest.yaml -l &lt;span style="color:#000">app&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>nginx
&lt;span style="color:#8f5902;font-style:italic"># マニフェストに書かれていないConfigMapを全て削除&lt;/span>
kubectl apply --prune -f manifest.yaml --all --prune-whitelist&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>core/v1/ConfigMap
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="logs">logs&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 基本構文&lt;/span>
kubectl logs &amp;lt;Pod名&amp;gt; &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>Options&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 10行 tail -f&lt;/span>
kubectl logs &amp;lt;Pod名&amp;gt; --tail&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> -f
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="proxy">proxy&lt;/h3>
&lt;p>API Proxyサーバを起動する&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">kubectl proxy --port&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8080&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;amp;&lt;/span>
curl http://localhost:8080/api/
&lt;/code>&lt;/pre>&lt;/div>&lt;p>See &lt;a href="https://kubernetes.io/docs/tasks/administer-cluster/access-cluster-api/">https://kubernetes.io/docs/tasks/administer-cluster/access-cluster-api/&lt;/a>&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="全てのマニフェストを取得したい">全てのマニフェストを取得したい&lt;/h3>
&lt;p>これでよさそう:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">kubectl get all --export -o yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>※v1.14で &lt;code>--export&lt;/code> オプションはdeprecateされているが、2020-05-07, 代替手段は見つけられていない。&lt;/li>
&lt;li>上だとPodもexport対象になるので、使い勝手悪いかも？&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kubernetes/kubernetes/issues/24873">Is there a way to generate yml files that will produce the existing cluster? · Issue #24873 · kubernetes/kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/kubernetes/kubernetes/pull/73787">Deprecate &amp;ndash;export flag from get command by soltysh · Pull Request #73787 · kubernetes/kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/tkusumi/items/a824e040475fc47d311a">Kubernetes 1.14: Urgent Upgrade Notes, Deprecations, Removed and deprecated metrics, API Changes - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gist.github.com/negz/c3ee465b48306593f16c523a22015bec">Dump Kubernetes cluster resources as YAML&lt;/a> &amp;hellip; シェルスクリプトで頑張っている事例&lt;/li>
&lt;/ul></description></item><item><title>A: Halyard</title><link>https://progrhy.me/tech-notes/a/software/spinnaker/halyard/</link><pubDate>Tue, 05 May 2020 00:27:58 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/spinnaker/halyard/</guid><description>
&lt;p>Spinnakerの管理ツール。
daemon + CLI.&lt;/p>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://medium.com/oracledevs/install-spinnaker-with-halyard-on-kubernetes-88277bd61d59">Install Spinnaker with Halyard on Kubernetes - Oracle Developers - Medium&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="halコマンド">halコマンド&lt;/h2>
&lt;p>リファレンス: &lt;a href="https://www.spinnaker.io/reference/halyard/commands/">https://www.spinnaker.io/reference/halyard/commands/&lt;/a>&lt;/p>
&lt;h3 id="backup">backup&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># バックアップ作成。tarballが出来る&lt;/span>
hal backup create
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="config">config&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># Spinnakerのコンポーネントのリソース利用量を変更&lt;/span>
hal config deploy component-sizing &amp;lt;component&amp;gt; &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>delete&lt;span style="color:#000;font-weight:bold">|&lt;/span>edit&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>parameters&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># IAP認証を有効化&lt;/span>
hal config security authn iap &lt;span style="color:#204a87">enable&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 該当プロバイダのアカウント一覧&lt;/span>
hal config provider &lt;span style="color:#000">$PROVIDER&lt;/span> account list
&lt;span style="color:#8f5902;font-style:italic"># 該当プロバイダの該当アカウントにRBACのロール設定&lt;/span>
hal config provider &lt;span style="color:#000">$PROVIDER&lt;/span> account edit &lt;span style="color:#000">$ACCOUNT&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --read-permissions &lt;span style="color:#000">$ROLE1&lt;/span>,&lt;span style="color:#000">$ROLE2&lt;/span>,... &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --write-permissions &lt;span style="color:#000">$ROLE1&lt;/span>,&lt;span style="color:#000">$ROLE2&lt;/span>,...
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.spinnaker.io/setup/security/authorization/#accounts">https://www.spinnaker.io/setup/security/authorization/#accounts&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="deploy">deploy&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># Spinnakerの設定変更を適用する&lt;/span>
hal deploy apply
&lt;span style="color:#8f5902;font-style:italic"># Spinnakerに接続する&lt;/span>
hal deploy connect
&lt;span style="color:#8f5902;font-style:italic"># 各サービスのログを集める&lt;/span>
hal deploy collect-logs
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cookbooks">Cookbooks&lt;/h3>
&lt;h4 id="spinnakerのバージョン更新">Spinnakerのバージョン更新&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># 利用可能なバージョン一覧&lt;/span>
hal version list
&lt;span style="color:#8f5902;font-style:italic"># 現在のバージョン表示&lt;/span>
hal config version
&lt;span style="color:#8f5902;font-style:italic"># バージョン変更&lt;/span>
hal config version edit --version &lt;span style="color:#000">$NEW_VERSION&lt;/span>
hal deploy apply
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="複数のspinnaker環境を管理する">複数のSpinnaker環境を管理する&lt;/h3>
&lt;p>Halyardでは &lt;code>Deployment&lt;/code> という単位でconfigを分けることができる。「Deployment」という語はふつうのデプロイという意味やK8s用語としても使われるので、用語としてよくないと思う。 &lt;code>Environment&lt;/code> とかにしてほしかった気がする（Environmentも何かとかぶりそうだが）。&lt;/p>
&lt;p>See &lt;a href="https://www.spinnaker.io/reference/halyard/#deployments">https://www.spinnaker.io/reference/halyard/#deployments&lt;/a>&lt;/p>
&lt;p>新しいDeploymentを作るには下のコマンドを叩く:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">hal config --set-current-deployment &lt;span style="color:#000">$DEPLOYMENT&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>指定した &lt;code>$DEPLOYMENT&lt;/code> がなければ新規作成される。&lt;br>
ちなみに、デフォルトの &lt;code>$DEPLOYMENT&lt;/code> は &lt;code>default&lt;/code> である。&lt;/p>
&lt;p>このコマンドによって新しく作ったDeploymentはまっさらな状態なので、一通りセットアップしなければならない。&lt;br>
（日記はここで終わっている。）&lt;/p></description></item><item><title>A: kustomize</title><link>https://progrhy.me/tech-notes/a/software/k8s/kustomize/</link><pubDate>Mon, 04 May 2020 17:54:50 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/kustomize/</guid><description>
&lt;p>Kubernetesのマニフェスト管理ツール。&lt;/p>
&lt;p>リポジトリ: &lt;a href="https://github.com/kubernetes-sigs/kustomize">https://github.com/kubernetes-sigs/kustomize&lt;/a>&lt;/p>
&lt;p>kubectl 1.14からkustomizeが統合されている。&lt;/p>
&lt;h2 id="ドキュメント情報リソース">ドキュメント/情報リソース&lt;/h2>
&lt;ul>
&lt;li>Reference: &lt;a href="https://kubectl.docs.kubernetes.io/pages/reference/kustomize.html">https://kubectl.docs.kubernetes.io/pages/reference/kustomize.html&lt;/a>&lt;/li>
&lt;li>Examples: &lt;a href="https://github.com/kubernetes-sigs/kustomize/tree/master/examples">https://github.com/kubernetes-sigs/kustomize/tree/master/examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="cli-usage">CLI Usage&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">kubectl kustomize
&lt;span style="color:#8f5902;font-style:italic"># kustomization.yaml を含むディレクトリで&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## Apply the Resource Config&lt;/span>
kubectl apply -k .
&lt;span style="color:#8f5902;font-style:italic">## View the Resources&lt;/span>
kubectl get -k .
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubectl.docs.kubernetes.io/pages/app_management/apply.html">https://kubectl.docs.kubernetes.io/pages/app_management/apply.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="configmapの管理">ConfigMapの管理&lt;/h3>
&lt;ol>
&lt;li>configMapGeneratorで生成&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>(2020-03-18) &lt;code>behavior&lt;/code> を &lt;code>create&lt;/code>, &lt;code>replace&lt;/code>, &lt;code>merge&lt;/code> から選べるのだが、 &lt;code>create&lt;/code> 以外だとdiffでエラーが出るのだが…&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>resourcesで管理&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>ConfigMapをYAMLで管理することになる。こっちの方が扱いやすいように感じた&lt;/li>
&lt;/ul>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://deeeet.com/writing/2018/07/10/kustomize/">KustomizeでKubernetes YAMLを管理する | SOTA&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.mosuke.tech/entry/2019/06/21/kustomize/">Kustomizeで環境ごとに異なるマニフェストを作る | Goldstine研究所&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Homebrew</title><link>https://progrhy.me/tech-notes/a/software/pkg-man/brew/</link><pubDate>Mon, 04 May 2020 17:19:03 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/pkg-man/brew/</guid><description>
&lt;p>かねてからmacOSでユーザーランドで動くパッケージ管理ソフトとして開発者に親しまれてきたツールだが、2019年にLinuxにも正式に対応した。&lt;/p>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;ul>
&lt;li>インストール &amp;hellip; &lt;a href="https://brew.sh/">https://brew.sh/&lt;/a> に従う&lt;/li>
&lt;/ul>
&lt;h2 id="macos">macOS&lt;/h2>
&lt;ul>
&lt;li>デフォルトで &lt;code>/usr/local&lt;/code> にインストールされる&lt;/li>
&lt;/ul>
&lt;h2 id="linux">Linux&lt;/h2>
&lt;p>&lt;a href="https://docs.brew.sh/Homebrew-on-Linux">https://docs.brew.sh/Homebrew-on-Linux&lt;/a>&lt;/p>
&lt;ul>
&lt;li>デフォルトで &lt;code>/home/linuxbrew/.linuxbrew&lt;/code> にインストールされる&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tech-progrhyme.hatenablog.com/entry/2020/04/29/222302">UbuntuにHomebrewを入れてHomebrew Bundleでパッケージ管理することにした - progrhyme&amp;rsquo;s tech blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="homebrew-bundle">Homebrew Bundle&lt;/h2>
&lt;p>&lt;a href="https://github.com/Homebrew/homebrew-bundle">https://github.com/Homebrew/homebrew-bundle&lt;/a>&lt;/p>
&lt;p>Rubyのbundlerのように、brewでインストールするパッケージをBrewfileという構成ファイルにまとめる。&lt;/p>
&lt;p>オプションなしで実行した場合、カレントディレクトリの &lt;code>Brewfile&lt;/code> を参照する。&lt;/p>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># Brewfileに基づいてパッケージインストール&lt;/span>
brew bundle &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>install&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTIONS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># Brewfileに入ってないパッケージを削除する&lt;/span>
brew bundle cleanup &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--force&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTIONS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># インストールされているパッケージリストをBrewfileに書き出す&lt;/span>
brew bundle dump &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTIONS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>オプション:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>オプション&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>--global&lt;/code>&lt;/td>
&lt;td>&lt;code>~/.Brewfile&lt;/code> を見に行く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>--file &amp;lt;File&amp;gt;&lt;/code>&lt;/td>
&lt;td>Brewfileを指定する&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kiririmode.hatenablog.jp/entry/20200103/1578033722">Macでのアプリケーションインストールの自動化 - 理系学生日記&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Compute Engine</title><link>https://progrhy.me/tech-notes/a/google/gcp/gce/</link><pubDate>Mon, 04 May 2020 09:10:38 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/gce/</guid><description>
&lt;h2 id="仮想マシン">仮想マシン&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/compute/docs/machine-types?hl=ja">マシンタイプ | Compute Engine ドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;h3 id="プリエンプティブルvmインスタンス">プリエンプティブルVMインスタンス&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/compute/docs/instances/preemptible">https://cloud.google.com/compute/docs/instances/preemptible&lt;/a>&lt;/p>
&lt;p>Preemptible VM Instance. AWSでいうところのスポットインスタンス。&lt;/p>
&lt;ul>
&lt;li>いつでも停止される可能性がある&lt;/li>
&lt;li>24時間実行したら必ず停止される&lt;/li>
&lt;/ul>
&lt;h4 id="プリエンプト処理">プリエンプト処理&lt;/h4>
&lt;ol>
&lt;li>プリエンプション通知を&lt;a href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface#Power_states">ACPI G2 ソフトオフ&lt;/a>形式でインスタンスに送信&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/instances/create-start-preemptible-instance?hl=ja#handle_preemption">シャットダウンスクリプト&lt;/a>によってプリエンプションを処理。インスタンス停止前にクリーンアップ操作を実施できる&lt;/li>
&lt;li>インスタンスが30秒以内に停止しないと、&lt;a href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface#Power_states">ACPI G3 メカニカルオフ&lt;/a>信号がOSに送信される&lt;/li>
&lt;li>インスタンスは &lt;code>TERMINATED&lt;/code> 状態になる&lt;/li>
&lt;/ol>
&lt;h4 id="プリエンプトされたかどうか調べる">プリエンプトされたかどうか調べる&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/compute/docs/instances/create-start-preemptible-instance?hl=ja#detecting_if_an_instance_was_preempted">https://cloud.google.com/compute/docs/instances/create-start-preemptible-instance?hl=ja#detecting_if_an_instance_was_preempted&lt;/a>&lt;/p>
&lt;p>Cloud Loggingで &lt;code>compute.instances.preempted&lt;/code> で検索。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://stackoverflow.com/questions/58256153/gcp-vm-consistently-shutting-down-without-warning">ssh - GCP VM consistently shutting down without warning - Stack Overflow&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="参考">参考&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.marketechlabo.com/gce-preemptible-instance/">格安に使えるGCEのプリエンプティブインスタンスの勝手に停止対策 | marketechlabo&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="インスタンスグループ">インスタンスグループ&lt;/h3>
&lt;ul>
&lt;li>マネージド &amp;hellip; オートスケールする。インスタンステンプレートを使う&lt;/li>
&lt;li>非マネージド &amp;hellip; 自前でインスタンスを登録して管理
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/instance-groups/creating-groups-of-unmanaged-instances?hl=ja">非マネージド インスタンス グループの作成 | Compute Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="shielded-vm">Shielded VM&lt;/h3>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/security/shielded-cloud/shielded-vm?hl=ja">Shielded VM | ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Features:&lt;/p>
&lt;ul>
&lt;li>セキュアブート&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/instances/integrity-monitoring?hl=ja">整合性モニタリング&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>整合性チェックに引っかかると、インスタンスが起動しない（起動直後にシャットダウンする）ことがある&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/firmware/uefi/#%E3%82%BB%E3%82%AD%E3%83%A5%E3%82%A2%E3%83%96%E3%83%BC%E3%83%88">UEFI#セキュアブート&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://stackoverflow.com/questions/56100268/why-my-google-cloud-instance-often-shut-down-automatically-by-itself">why my google cloud instance often shut down automatically by itself - Stack Overflow&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="machine-images">Machine Images&lt;/h2>
&lt;p>Beta at 2020-04-16現在&lt;/p>
&lt;p>&lt;a href="https://cloud.google.com/compute/docs/machine-images">https://cloud.google.com/compute/docs/machine-images&lt;/a>&lt;/p>
&lt;p>最近リリースされたやつ。&lt;br>
従来のImageとの違いは↑に書いてある。&lt;/p>
&lt;h2 id="images">Images&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/compute/docs/images?hl=ja">https://cloud.google.com/compute/docs/images?hl=ja&lt;/a>&lt;/p>
&lt;p>AWS AMIみたいなもの&lt;/p>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/images/sharing-images-across-projects?hl=ja">イメージとスナップショットの共有 | Compute Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>VMからカスタムイメージを作る場合は、VMを停止しないと駄目みたい&lt;/li>
&lt;/ul></description></item><item><title>A: Git</title><link>https://progrhy.me/tech-notes/a/software/git/</link><pubDate>Mon, 27 Apr 2020 23:03:01 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/git/</guid><description>
&lt;h2 id="gitコマンド">gitコマンド&lt;/h2>
&lt;h3 id="参考資料">参考資料&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/konweb/items/621722f67fdd8f86a017">【Git】基本コマンド - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="apply">apply&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## git diffコマンドで作ったpatchを適用する&lt;/span>
git apply file.patch
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://maku77.github.io/git/git-patch.html">Git でパッチファイルを作成する | まくまくGitノート&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="archive">archive&lt;/h3>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>tar を使わないとファイルに実行ビットがついてしまうようだ。&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/usamik26/items/9a2d14aea30cb01a60c6" title="Git リポジトリの内容を zip ファイルにする - Qiita">Git リポジトリの内容を zip ファイルにする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="branch">branch&lt;/h3>
&lt;p>&lt;a href="https://git-scm.com/docs/git-branch">https://git-scm.com/docs/git-branch&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># ローカルのbranchを表示&lt;/span>
git branch
&lt;span style="color:#8f5902;font-style:italic">## マージ済みのbranchを表示&lt;/span>
git branch --merged
&lt;span style="color:#8f5902;font-style:italic">## 出力フォーマット指定&lt;/span>
git branch --format&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;lt;FORMAT&amp;gt;&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 今のbranchを元に新しいbranchを作る&lt;/span>
git branch &amp;lt;newbranch&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># 既存のbranchを元に新しいbranchを作る&lt;/span>
git branch &amp;lt;oldbranch&amp;gt; &amp;lt;newbranch&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>--format&lt;/code> オプションで指定できるフォーマットについては&lt;a href="#for-each-ref">git-for-each-ref&lt;/a>を見よ。&lt;/p>
&lt;h3 id="checkout">checkout&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## topicブランチを作成&lt;/span>
git checkout -b topic
&lt;span style="color:#8f5902;font-style:italic">## remoteブランチからローカルブランチを作成&lt;/span>
git checkout -b foo origin/foo
&lt;span style="color:#8f5902;font-style:italic">## 空ブランチを作る&lt;/span>
git checkout --orphan empty
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/akiko-pusu/items/7c0a99b8cb37882d2cfe" title="gitの空ブランチを作る - Qiita">gitの空ブランチを作る - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="cherry-pick">cherry-pick&lt;/h3>
&lt;p>別ブランチで開発中の機能などをコミット単位で取り込むときに使う。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">git cherry-pick &amp;lt;SHA1&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## マージコミットのcherry-pick&lt;/span>
git cherry-pick -m &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &amp;lt;SHA1&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/takc923/items/8e2d87d692f840b14464" title="merge commitをcherry-pickする - Qiita">merge commitをcherry-pickする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="clone">clone&lt;/h3>
&lt;p>&lt;a href="https://git-scm.com/docs/git-clone">https://git-scm.com/docs/git-clone&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 深さ1の shallow clone&lt;/span>
git clone --depth &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &amp;lt;URL&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## ブランチ指定&lt;/span>
git clone --branch BRANCH URL
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="commit">commit&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 変更点を表示してコミット&lt;/span>
git commit -v
&lt;span style="color:#8f5902;font-style:italic">## 空コミット&lt;/span>
git commit --allow-empty
&lt;span style="color:#8f5902;font-style:italic">## コミットメッセージを変更&lt;/span>
git commit --amend
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="diff">diff&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## スペース等の差分を無視&lt;/span>
git diff -w
&lt;span style="color:#8f5902;font-style:italic">## ファイル名のみ表示&lt;/span>
git diff --name-only
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="fetch">fetch&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## remote で削除された branch について、local のトラッキングブランチも消す&lt;/span>
git fetch -p&lt;span style="color:#000;font-weight:bold">|&lt;/span>--prune
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="for-each-ref">for-each-ref&lt;/h3>
&lt;p>&lt;a href="https://git-scm.com/docs/git-for-each-ref">https://git-scm.com/docs/git-for-each-ref&lt;/a>&lt;/p>
&lt;p>local branch, remote branchのHEAD, tagの情報を表示。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># A simple example showing the use of shell eval on the output, demonstrating the use of --shell.&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># List the prefixes of all heads:&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">#!/bin/sh&lt;/span>
git &lt;span style="color:#204a87;font-weight:bold">for&lt;/span>-each-ref --shell --format&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;ref=%(refname)&amp;#34;&lt;/span> refs/heads &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">while&lt;/span> &lt;span style="color:#204a87">read&lt;/span> entry&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span>
&lt;span style="color:#204a87">eval&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000">$entry&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">`&lt;/span>dirname &lt;span style="color:#000">$ref&lt;/span>&lt;span style="color:#4e9a06">`&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>FORMATで指定できるフィールド:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>フィールド&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>refname&lt;/code>&lt;/td>
&lt;td>The name of the ref (the part after $GIT_DIR/).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>refname:short&lt;/code>&lt;/td>
&lt;td>branch, tagなど明らかな名前がついているものはこれで参照できる&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>objecttype&lt;/code>&lt;/td>
&lt;td>blob, tree, commit, tag&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>objectsize&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>objectname&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="log">log&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 過去のコミットから対象文字列を含むコミットを検索&lt;/span>
git log -S 文字列
&lt;span style="color:#8f5902;font-style:italic">## 1行で表示&lt;/span>
git log --pretty&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>oneline
git log --oneline --graph --decorate
&lt;span style="color:#8f5902;font-style:italic">## フォーマット指定&lt;/span>
git log --format&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;%H&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># full commit hash のみ&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://git-scm.com/book/ja/v1/Git-%E3%81%AE%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E3%83%84%E3%83%BC%E3%83%AB-%E3%83%AA%E3%83%93%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%AE%E9%81%B8%E6%8A%9E" title="Git - リビジョンの選択">Git - リビジョンの選択&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://heart-shaped-chocolate.hatenablog.jp/entry/2013/07/16/035104" title="git logのオプションあれこれ - 煙と消えるその前に">git logのオプションあれこれ - 煙と消えるその前に&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://qiita.com/key-amb/items/9ee8339d2da971581cfb" title="git log をいい感じに alias して色付きで見やすくしておく - Qiita">git log をいい感じに alias して色付きで見やすくしておく - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="pull">pull&lt;/h3>
&lt;p>&lt;a href="https://git-scm.com/docs/git-pull">https://git-scm.com/docs/git-pull&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># リファレンスには書いてないが、fetch時に--pruneしてくれるらしい&lt;/span>
git pull --prune
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/yuichielectric/items/84cd61915a1236f19221">リモートで消されたブランチが手元で残ってしまう件を解消する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="rebase">rebase&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 過去のNコミットを編集&lt;/span>
git rebase -i HEAD~N
&lt;span style="color:#8f5902;font-style:italic">## 1st コミットから編集&lt;/span>
git rebase -i --root
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://d.hatena.ne.jp/ken_c_lo/20130421/1366558065" title="First commit が git rebase -i できない問題 → git rebase -i --root でできる - 納豆には卵を入れる派です。">First commit が git rebase -i できない問題 → git rebase -i &amp;ndash;root でできる - 納豆には卵を入れる派です。&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="remote">remote&lt;/h3>
&lt;p>リモートリポジトリの管理。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## リモートリポジトリ一覧&lt;/span>
git remote
git remote -v
&lt;span style="color:#8f5902;font-style:italic">## リモートリポジトリ追加&lt;/span>
git remote add &amp;lt;リポジトリ名&amp;gt; &amp;lt;URL&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## リモートリポジトリ削除&lt;/span>
git remote rm &amp;lt;リポジトリ名&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## URL変更&lt;/span>
git remote set-url &amp;lt;リポジトリ名&amp;gt; &amp;lt;URL&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## リポジトリ名変更&lt;/span>
git remote rename &amp;lt;リポジトリ名&amp;gt; &amp;lt;新しいリポジトリ名&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.sejuku.net/blog/71492">これで完璧! git remoteでリポジトリを【追加,削除,確認,変更】 | 侍エンジニア塾ブログ（Samurai Blog） - プログラミング入門者向けサイト&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="revert">revert&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">git revert &amp;lt;SHA1&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## マージコミットの取消し&lt;/span>
git revert -m &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &amp;lt;SHA1&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt">https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://d.hatena.ne.jp/koba04/20121122/1353512656" title="gitのmerge-commitをrevertする - 車輪を再発明 / koba04の日記">gitのmerge-commitをrevertする - 車輪を再発明 / koba04の日記&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="submodule">submodule&lt;/h3>
&lt;p>&lt;a href="https://git-scm.com/docs/git-submodule">https://git-scm.com/docs/git-submodule&lt;/a>&lt;/p>
&lt;p>なんだかんだで割りと使っている。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic"># submodule追加&lt;/span>
git submodule add &amp;lt;git-url&amp;gt; &amp;lt;local-path&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># 全submodule更新&lt;/span>
git submodule foreach git pull origin master
&lt;/code>&lt;/pre>&lt;/div>&lt;p>sumobuleの削除 =&amp;gt; &lt;a href="https://github.com/progrhyme/git-wraps/blob/master/bin/git-submodule-delete">https://github.com/progrhyme/git-wraps/blob/master/bin/git-submodule-delete&lt;/a>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/sotarok/items/0d525e568a6088f6f6bb" title="Git submodule の基礎 - Qiita">Git submodule の基礎 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://qiita.com/kshimo69/items/ac22d414d756ea08943f" title="git submoduleしてるリポジトリをリモートの最新に更新する - Qiita">git submoduleしてるリポジトリをリモートの最新に更新する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="向き先url変更">向き先url変更&lt;/h4>
&lt;ol>
&lt;li>&lt;code>.gitmodules&lt;/code> の向き先を新urlに変更&lt;/li>
&lt;li>&lt;code>git submodule sync&lt;/code> で反映
&lt;ul>
&lt;li>&lt;code>.git/config&lt;/code> に変更が反映される&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git submodule update&lt;/code> とかで更新&lt;/li>
&lt;/ol>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/8mamo10/items/fd11d8c7a2d928b39173" title="submodule の向き先 url を変更する - Qiita">submodule の向き先 url を変更する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="tag">tag&lt;/h3>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 作成&lt;/span>
git tag &amp;lt;タグ名&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">### 注釈付き&lt;/span>
git tag -a &amp;lt;タグ名&amp;gt; -m &amp;lt;メッセージ&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## 表示&lt;/span>
git show &amp;lt;タグ名&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">### 一覧&lt;/span>
git tag
&lt;span style="color:#8f5902;font-style:italic">## 削除&lt;/span>
git tag -d &amp;lt;タグ名&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## リモートに反映&lt;/span>
git push &amp;lt;リモート&amp;gt; &amp;lt;タグ名&amp;gt;
git push --tags
&lt;span style="color:#8f5902;font-style:italic">### 削除反映&lt;/span>
git push &amp;lt;リモート&amp;gt; :&amp;lt;タグ名&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/chihiro/items/cba40015b1aa2c73b78a">【Git】tag関連コマンド - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="config">config&lt;/h2>
&lt;h3 id="aliasの設定">aliasの設定&lt;/h3>
&lt;p>Examples:&lt;/p>
&lt;pre>&lt;code>[alias]
st = status
dfc = diff --cached
&lt;/code>&lt;/pre>&lt;p>Tips:&lt;/p>
&lt;ul>
&lt;li>右辺を &lt;code>!&lt;/code> から記述すると外部コマンドを記述できる&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/peccul/items/90dd469e2f72babbc106">gitで便利なエイリアス達 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/akirashi/items/2b5cf0f32777aaaf6287">git aliasで外部コマンドを呼び出して便利にしてみる - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="committerとauthorを変更する">CommitterとAuthorを変更する&lt;/h3>
&lt;p>HEADのcommitを修正する場合:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">git config --local user.name &lt;span style="color:#4e9a06">&amp;#34;YOUR NAME&amp;#34;&lt;/span>
git config --local user.email your-address@example.com
git commit --amend --reset-author
&lt;/code>&lt;/pre>&lt;/div>&lt;p>過去の履歴についても変更したい場合:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">git rebase -i &amp;lt;commit hash&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># 該当するコミットを `e` で選ぶ&lt;/span>
git commit --amend --reset-author
git rebase --continue
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://tech-1natsu.hatenablog.com/entry/2018/10/19/021855">過去のgitコミットのCommitとAuthor情報を修正する - ひと夏の技術&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/sea_mountain/items/d70216a5bc16a88ed932">Git の Commit Author と Commiter を変更する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="歴史を改ざんする">歴史を改ざんする&lt;/h3>
&lt;p>See &lt;a href="https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E3%83%84%E3%83%BC%E3%83%AB-%E6%AD%B4%E5%8F%B2%E3%81%AE%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88">Git - 歴史の書き換え&lt;/a>&lt;/p>
&lt;h4 id="特定のファイルディレクトリの履歴を完全に削除">特定のファイル・ディレクトリの履歴を完全に削除&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## file&lt;/span>
git filter-branch --tree-filter &lt;span style="color:#4e9a06">&amp;#39;rm -f path/to/file&amp;#39;&lt;/span> HEAD
&lt;span style="color:#8f5902;font-style:italic">## directory&lt;/span>
git filter-branch --tree-filter &lt;span style="color:#4e9a06">&amp;#39;rm -rf path/to/dir/&amp;#39;&lt;/span> HEAD
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gist.github.com/ktx2207/3167fa69531bdd6b44f1">Git ファイルの履歴を完全に削除する&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="マージコミットを-cherry-pick">マージコミットを cherry-pick&lt;/h3>
&lt;p>merge commit を cherry-pick&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">git cherry-pick -m &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &amp;lt;merge commit のハッシュ&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/takc923/items/8e2d87d692f840b14464" title="merge commitをcherry-pickする - Qiita">merge commitをcherry-pickする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="マージ済みブランチを掃除する">マージ済みブランチを掃除する&lt;/h3>
&lt;p>色んな人がやっていて、aliasに設定したりサブコマンドを作ったりしている。&lt;/p>
&lt;p>自分でも&lt;a href="https://progrhy.me/tech-notes/a/memo/20200504/#git-pull---prune%E3%81%97%E3%81%A6%E3%83%9E%E3%83%BC%E3%82%B8%E6%B8%88%E3%81%BF%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%82%92%E6%8E%83%E9%99%A4%E3%81%99%E3%82%8Bgit%E3%81%AE%E3%82%B5%E3%83%96%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F">2020-05-04に作った&lt;/a>。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/kenshiroh/items/44dcf4b094e841bb42a2">gitでbranchをお掃除する際のチートシート - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="特定のファイルを-git-管理対象から除外する">特定のファイルを Git 管理対象から除外する&lt;/h3>
&lt;h4 id="1-gitignore-や-gitinfoexclude-を使う">1) &lt;code>.gitignore&lt;/code> や &lt;code>.git/info/exclude&lt;/code> を使う&lt;/h4>
&lt;h4 id="2-既に-git-管理下にあるファイルをワーキングツリーで敢えて除外する">2) 既に Git 管理下にあるファイルをワーキングツリーで敢えて除外する&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">git update-index —assume-unchanged &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ファイル名&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
git update-index —skip-worktree &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ファイル名&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 確認&lt;/span>
git ls-files -v
&lt;span style="color:#8f5902;font-style:italic">## 取り消し&lt;/span>
git update-index —no-assume-unchanged &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ファイル名&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
git update-index —no-skip-worktree &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>ファイル名&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>git ls-files -v の表示:&lt;/p>
&lt;ul>
&lt;li>assume-unchanged 設定のファイルは、状態が小文字で表示される&lt;/li>
&lt;li>skip-worktree 設定のファイルは、状態が S と表示される&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/usamik26/items/56d0d3ba7a1300625f92">既に git 管理しているファイルをあえて無視したい - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="リポジトリをサブディレクトリで分割">リポジトリをサブディレクトリで分割&lt;/h3>
&lt;h4 id="サブディレクトリが1つの場合">サブディレクトリが1つの場合&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">git clone original_dir new_dir
&lt;span style="color:#204a87">cd&lt;/span> new_dir
git filter-branch --subdirectory-filter sub_dir_name HEAD
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://akio0911.net/archives/3421">gitリポジトリのサブディレクトリを別のリポジトリとして抽出する方法 - 拡張現実ライフ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="サブディレクトリが複数の場合">サブディレクトリが複数の場合&lt;/h4>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://stackoverflow.com/questions/2982055/detach-many-subdirectories-into-a-new-separate-git-repository">git filter branch - Detach many subdirectories into a new, separate Git repository - Stack Overflow&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: CLI</title><link>https://progrhy.me/tech-notes/a/software/terraform/cli/</link><pubDate>Sun, 26 Apr 2020 23:06:08 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terraform/cli/</guid><description>
&lt;p>&lt;a href="https://www.terraform.io/docs/commands/">https://www.terraform.io/docs/commands/&lt;/a>&lt;/p>
&lt;h2 id="import">import&lt;/h2>
&lt;p>&lt;a href="https://www.terraform.io/docs/import/usage.html">https://www.terraform.io/docs/import/usage.html&lt;/a>&lt;/p>
&lt;p>&lt;code>terraform import&lt;/code> コマンドにより、既存インフラをTerraform管理下に置くことができる。&lt;/p>
&lt;p>一部インフラを手動で作った後、リソースのidを指定して取り込む、といった使い方ができる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/tyasu/items/32b23dd76d25f7af712f" title="terraform importの使い方メモ - Qiita">terraform importの使い方メモ - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="plan">plan&lt;/h2>
&lt;p>&lt;a href="https://www.terraform.io/docs/commands/plan.html">https://www.terraform.io/docs/commands/plan.html&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># 対象を限定する&lt;/span>
terraform plan -target&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource_type1.identifier1 -target&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource_type2.identifier2
&lt;span style="color:#8f5902;font-style:italic"># planファイルを書き出す&lt;/span>
terraform plan -out&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>path/to/tfplan
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="state">state&lt;/h2>
&lt;p>&lt;a href="https://www.terraform.io/docs/commands/state/">https://www.terraform.io/docs/commands/state/&lt;/a>&lt;/p>
&lt;p>stateの管理・編集を行うコマンド。&lt;/p>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">terraform state list &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>filtering-arg&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># terraform管理下のリソース一覧&lt;/span>
terraform state pull &lt;span style="color:#8f5902;font-style:italic"># リモートのstateファイルをダウンロードして標準出力に表示&lt;/span>
terraform state push &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTION&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> PATH &lt;span style="color:#8f5902;font-style:italic"># ローカルのstateファイルをリモートにアップロード&lt;/span>
terraform state mv SOURCE DESTINATION &lt;span style="color:#8f5902;font-style:italic"># リソースの名称変更。module化も可能&lt;/span>
terraform state rm リソース &lt;span style="color:#8f5902;font-style:italic"># リソースをterraform管理から除く = tfstateファイルから削除&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>A: Container Registry</title><link>https://progrhy.me/tech-notes/a/google/gcp/gcr/</link><pubDate>Thu, 07 May 2020 16:23:49 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/gcr/</guid><description>
&lt;p>Dockerコンテナレジストリ。&lt;/p>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;p>Documentation:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/container-registry/docs">https://cloud.google.com/container-registry/docs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/container-registry/docs?hl=ja">リソース&lt;/a> &amp;hellip; 料金、クォータ、リリースノートなど&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="認証">認証&lt;/h3>
&lt;p>dockerコマンドでGCRにアクセスできるようにする:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gcloud auth configure-docker
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://cloud.google.com/container-registry/docs/advanced-authentication">https://cloud.google.com/container-registry/docs/advanced-authentication&lt;/a>&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="pubsub通知">Pub/Sub通知&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/container-registry/docs/configuring-notifications?hl=ja">Pub/Sub 通知の構成 | Container Registry のドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>イメージが push、タグ付け、削除されたときなど、Container Registry リポジトリに変更が加えられた場合、Pub/Sub を使用して通知を受け取ることができます&lt;/p>
&lt;/blockquote></description></item><item><title>A: Google Kubernetes Engine</title><link>https://progrhy.me/tech-notes/a/google/gcp/gke/</link><pubDate>Mon, 27 Apr 2020 11:01:49 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/gke/</guid><description>
&lt;p>関連ページ:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/k8s/">Software &amp;gt; Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/tutorials?hl=ja">チュートリアル | Kubernetes Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to?hl=ja">入門ガイド | Kubernetes Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="documentation">Documentation&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/?hl=ja">https://cloud.google.com/kubernetes-engine/docs/?hl=ja&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/quotas?hl=ja">https://cloud.google.com/kubernetes-engine/quotas?hl=ja&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ベストプラクティス">ベストプラクティス&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/solutions/best-practices-for-operating-containers">Best Practices for Operating Containers | Architectures | Google Cloud&lt;/a>
&lt;ul>
&lt;li>Logging, etc.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/blog/products/gcp/kubernetes-best-practices-terminating-with-grace">Kubernetes best practices: terminating with grace | Google Cloud Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="仕様">仕様&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler?hl=ja">クラスタ オートスケーラー | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-autoscaler?hl=ja">クラスタの自動スケーリング | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="quota">Quota&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/quotas">https://cloud.google.com/kubernetes-engine/quotas&lt;/a>&lt;/p>
&lt;p>Last updated at 2020-04-13&lt;/p>
&lt;ul>
&lt;li>GKEクラスタごと
&lt;ul>
&lt;li>クラスタあたりの最大ノード数: 5,000&lt;/li>
&lt;li>ノードプールあたりの最大ノード数: 1,000&lt;/li>
&lt;li>ノードあたりの最大ポッド数: 110&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="限定公開クラスタ">限定公開クラスタ&lt;/h3>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/private-clusters?hl=ja">限定公開クラスタの設定 | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/container/clusters/create?hl=ja">https://cloud.google.com/sdk/gcloud/reference/container/clusters/create?hl=ja&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/nat/docs/gke-example">Example GKE Setup | Cloud NAT | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>要点:&lt;/p>
&lt;ul>
&lt;li>ノードは内部IPアドレスのみを持つため、インターネットから隔離される&lt;/li>
&lt;li>限定公開クラスタでは、マスターへのアクセスを制御できる&lt;/li>
&lt;li>LB経由で受信トラフィックを受けられる。また、内部LB経由でVPC内のトラフィックを受けることもできる&lt;/li>
&lt;li>外と通信したいときは、上記の「Example GKE Setup」にあるように、Cloud NAT + Cloud Routerをセットアップする&lt;/li>
&lt;/ul>
&lt;p>Tips:&lt;/p>
&lt;ul>
&lt;li>(2019-12-02現在) &lt;code>gcloud container clusters create&lt;/code> コマンドでは &lt;code>--enable-private-nodes --master-ipv4-cidr &amp;lt;CIDR&amp;gt;&lt;/code> オプションをつける&lt;/li>
&lt;/ul>
&lt;h4 id="制限事項">制限事項&lt;/h4>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/private-clusters?hl=ja#req_res_lim">限定公開クラスタの作成 | Kubernetes Engine ドキュメント | Google Cloud#要件、制約、制限&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/vpc/docs/alias-ip?hl=ja">エイリアスIP範囲&lt;/a>が有効なVPCネイティブクラスタである必要がある
&lt;ul>
&lt;li>See &lt;a href="#vpc%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%BF%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B">VPCネイティブクラスタを作成する&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="負荷分散">負荷分散&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/ingress">https://cloud.google.com/kubernetes-engine/docs/concepts/ingress&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="https-負荷分散">HTTP(S) 負荷分散&lt;/h4>
&lt;p>Ingressで複数のバックエンドServiceを設定できる。設定例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>extensions/v1beta1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Ingress&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-ingress&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">rules&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">http&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">paths&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">path&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>/*&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">backend&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">serviceName&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-products&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">servicePort&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">60000&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">path&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>/discounted&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">backend&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">serviceName&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-discounted-products&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">servicePort&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="managed-ssl-certificateを使う">Managed SSL certificateを使う&lt;/h5>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/managed-certs">https://cloud.google.com/kubernetes-engine/docs/how-to/managed-certs&lt;/a>&lt;/p>
&lt;ul>
&lt;li>GCPの静的IPを払い出し、対象のDNSレコードに設定する必要がある&lt;/li>
&lt;/ul>
&lt;p>See also &lt;a href="https://sites.google.com/site/progrhymetechwiki/cloud/gcp/gclb#TOC-SSL-">https://sites.google.com/site/progrhymetechwiki/cloud/gcp/gclb#TOC-SSL-&lt;/a>&lt;/p>
&lt;h5 id="httpの無効化">HTTPの無効化&lt;/h5>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/ingress?hl=ja#disabling_http">https://cloud.google.com/kubernetes-engine/docs/concepts/ingress?hl=ja#disabling_http&lt;/a>&lt;/p>
&lt;p>HTTPSのみを使うときはアノテーション &lt;code>kubernetes.io/ingress.allow-http&lt;/code> の値を &lt;code>&amp;quot;false&amp;quot;&lt;/code> に設定する。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>extensions/v1beta1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Ingress&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-ingress&lt;span style="color:#0000cf;font-weight:bold">-2&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">annotations&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">kubernetes.io/ingress.allow-http&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;false&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">tls&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">secretName&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-secret&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>...&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>※2020-03-04現在、K8sのバージョンによっては、マネージドSSL証明書を使う場合は、 &lt;code>ingress.gcp.kubernetes.io/pre-shared-cert&lt;/code> アノテーションの値に証明書名を入れる必要がある。1.15.x-gke.y の場合は自動でアノテーション付けてくれるっぽい。&lt;br>
See &lt;a href="https://github.com/kubernetes/ingress-gce/issues/1001">https://github.com/kubernetes/ingress-gce/issues/1001&lt;/a>&lt;/p>
&lt;h3 id="内部tcpudp負荷分散">内部TCP/UDP負荷分散&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/internal-load-balancing?hl=ja">内部 TCP / UDP 負荷分散 | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;p>2020-03-25現在、β版&lt;/p>
&lt;ul>
&lt;li>Serviceを &lt;code>type: LoadBalancer&lt;/code> で作成し、所定のannotationを入れる&lt;/li>
&lt;li>内部LBが作成される&lt;/li>
&lt;li>Ingressは不要&lt;/li>
&lt;li>Compute InstanceGroupで振り分けされる
&lt;ul>
&lt;li>2020-03-25現在、ネットワークエンドポイントグループには対応していない&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>同じDeploymentで、内部LBのServiceと外部HTTP(S)負荷分散用の2つのServiceを持つことができる&lt;/li>
&lt;/ul>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>ilb-service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">annotations&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cloud.google.com/load-balancer-type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Internal&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">labels&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">app&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>hello&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>LoadBalancer&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">selector&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">app&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>hello&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">ports&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">port&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">targetPort&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8080&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">protocol&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>TCP&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="backendconfigβ-on-2020-04-27">BackendConfig（β on 2020-04-27）&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/backendconfig?hl=en">https://cloud.google.com/kubernetes-engine/docs/concepts/backendconfig?hl=en&lt;/a>&lt;/p>
&lt;p>GKE固有のcustom resource.&lt;/p>
&lt;p>BackendConfigによって、HTTP(S) Load Balancingに以下の機能を設定できる:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cdn-backendconfig">Cloud CDN&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cloud-armor-backendconfig">Cloud Armor&lt;/a>&lt;/li>
&lt;li>Identity-Aware Proxy (IAP)&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/configure-backend-service">Timeout, Connection draining timeout, Session affinity, User-defined request headers&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Example:&lt;/p>
&lt;ul>
&lt;li>タイムアウトを40秒に設定&lt;/li>
&lt;li>接続ドレインタイムアウトを60秒に設定&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>cloud.google.com/v1beta1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>BackendConfig&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-bsc-backendconfig&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">timeoutSec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">40&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">connectionDraining&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">drainingTimeoutSec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">60&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="horizontal-pod-autoscaler">Horizontal Pod Autoscaler&lt;/h3>
&lt;p>HPA.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/horizontalpodautoscaler?hl=ja">水平ポッド自動スケーリング | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/tutorials/external-metrics-autoscaling?hl=ja">外部指標によるデプロイの自動スケーリング | Kubernetes Engine のチュートリアル | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/tutorials/custom-metrics-autoscaling?hl=ja">カスタム指標でのデプロイの自動スケーリング | Kubernetes Engine のチュートリアル | Google Cloud&lt;/a>&lt;/li>
&lt;li>いずれもCloud Monitoringメトリクスでスケール設定を行う&lt;/li>
&lt;li>&lt;a href="https://github.com/GoogleCloudPlatform/k8s-stackdriver/tree/master/custom-metrics-stackdriver-adapter">https://github.com/GoogleCloudPlatform/k8s-stackdriver/tree/master/custom-metrics-stackdriver-adapter&lt;/a> をクラスタにデプロイする&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://sites.google.com/site/progrhymetechwiki/software/k8s#TOC-Horizontal-Pod-Autoscaler">https://sites.google.com/site/progrhymetechwiki/software/k8s#TOC-Horizontal-Pod-Autoscaler&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.doit-intl.com/autoscaling-k8s-hpa-with-google-http-s-load-balancer-rps-stackdriver-metric-92db0a28e1ea">Autoscaling K8s HPA with Google HTTP/S Load-Balancer RPS EXTERNAL Stackdriver Metrics&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="アップグレード">アップグレード&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/upgrading-a-cluster">https://cloud.google.com/kubernetes-engine/docs/how-to/upgrading-a-cluster&lt;/a>&lt;/p>
&lt;p>Tips:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/release-channels">リリースチャネル&lt;/a>を指定することで、自動アップグレードできる&lt;/li>
&lt;/ul>
&lt;h3 id="kubeconfigエントリを生成">kubeconfigエントリを生成&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gcloud container clusters get-credentials &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>CLUSTER_NAME&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--project PROJECT&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--region REGION&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>↑のコマンドは更に、クラスタをデフォルトのkubectlのcontextに設定する。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl?hl=ja">kubectl 用のクラスタ アクセスの構成 | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="gkeのノードにssh">GKEのノードにSSH&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/compute/docs/instances/connecting-advanced#sshbetweeninstances">高度な方法によるインスタンスへの接続 | Compute Engine ドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/inductor/items/bc0ff7d761e0cc7e9394">限定公開クラスターのGKEノードにサクッとSSHする方法 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/sonots/items/6e2a57af945cf0daedd4">GKE で k8s クラスタの node に ssh する - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://acloud.guru/forums/gcp-certified-associate-cloud-engineer/discussion/-Lh3ET0aNrv3FwNbNvh6/Insufficient%20Permission:%20Request%20had%20insufficient%20authentication%20scopes.">Insufficient Permission: Request had insufficient authentication scopes. - Course: Google Certified Associate Cloud Engineer 2020&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="コンテナネイティブの負荷分散を使う">コンテナネイティブの負荷分散を使う&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/container-native-load-balancing?hl=ja">コンテナ ネイティブの負荷分散を使用する | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;p>TL;DR:&lt;/p>
&lt;ul>
&lt;li>ネットワークエンドポイントグループ(NEG)を作成して、Podに均等にトラフィックを分配できる&lt;/li>
&lt;li>従来の方式だとインスタンスグループ経由のアクセスで、iptablesを介してPodにアクセスしており、余分なネットワークオーバーヘッドが発生していた&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/container-native-load-balancing#known_issues">既知の問題&lt;/a>（2020-04-27時点）:&lt;/p>
&lt;ul>
&lt;li>GKEのガベージコレクションが2分間隔なので、LBが完全に削除される前にクラスタが削除された場合、NEGを手動で削除する必要がある&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/container-native-load-balancing#pod_readiness">Podのreadinessフィードバック&lt;/a>を&lt;u>使っていない場合&lt;/u>、ワークロードをデプロイするときや再起動するときに、ワークロードの更新完了に要する時間よりも、新しいエンドポイントの伝播に要する時間のほうが長くなる場合がある&lt;/li>
&lt;/ul>
&lt;h3 id="vpcネイティブクラスタを作成する">VPCネイティブクラスタを作成する&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/alias-ips?hl=ja">VPC ネイティブ クラスタを作成する | Kubernetes Engine ドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;p>2020-05-04現在、GCPコンソールから作成する場合はデフォルトでVPCネイティブクラスタになるが、REST APIやgcloudコマンドでは&lt;a href="https://cloud.google.com/vpc/docs/routes?hl=ja">ルートベースクラスタ&lt;/a>になるので注意。&lt;/p>
&lt;p>2つのやり方がある:&lt;/p>
&lt;ol>
&lt;li>既存のサブネットにクラスタを作成する。アドレス範囲の割り当て方は下の2つ:
&lt;ul>
&lt;li>GKE管理のセカンダリ範囲割り当て&lt;/li>
&lt;li>ユーザー管理のセカンダリ範囲割り当て&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>クラスタとサブネットを同時に作成する。セカンダリアドレス範囲の割り当てはGKE管理となる&lt;/li>
&lt;/ol>
&lt;h3 id="メンテナンス時間枠と除外枠の設定">メンテナンス時間枠と除外枠の設定&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/how-to/maintenance-windows-and-exclusions?hl=ja">メンテナンスの時間枠と除外の構成 | Kubernetes Engine ドキュメント | Google Cloud&lt;/a>&lt;/p>
&lt;ul>
&lt;li>クラスタやノードのアップグレードが行われる時間枠を設定可能。&lt;/li>
&lt;li>（たぶん）最短4時間&lt;/li>
&lt;/ul>
&lt;h3 id="docker-hubのイメージを使うには">Docker Hubのイメージを使うには？&lt;/h3>
&lt;p>公開イメージだったら普通に使える。&lt;/p>
&lt;p>プライベートなイメージでも認証情報を渡せば普通に使えるんじゃないかな。&lt;/p>
&lt;p>MEMO:&lt;/p>
&lt;ul>
&lt;li>日本語の記事だとミラーしたり、GCRにpushしてる例が多い&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://stackoverflow.com/questions/50826766/google-cloud-kubernetes-accessing-private-docker-hub-hosted-images">Google Cloud Kubernetes accessing private Docker Hub hosted images - Stack Overflow&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/containers/images/">Images - Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gist.github.com/toddlers/bb09002ffdc27fba6b7cef920fda2041">docker hub with kubernetes in GKE&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://estl.tech/using-images-from-a-private-registry-on-gke-b3bfb2562b16">Using Images from a Private Registry on GKE - Engineering Tomorrow’s Systems&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hawksnowlog.blogspot.com/2017/02/dockerhub-image-deploy-on-gke.html">hawksnowlog: Google Container Engine に Dockerhub で公開しているイメージをデプロイする方法&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="topics">Topics&lt;/h2>
&lt;h3 id="logging">Logging&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/solutions/customizing-stackdriver-logs-fluentd?hl=ja">Google Kubernetes Engine の Stackdriver ログを Fluentd でカスタマイズする | ソリューション&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://medium.com/@rshimma/rails-on-gke-with-stackdriver-logging-63163c72934">GKE上RailsのアプリケーションログをStackdriver Loggingで運用する方法 - Riki Shimma - Medium&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Google Groups</title><link>https://progrhy.me/tech-notes/a/google/group/</link><pubDate>Sat, 09 May 2020 09:42:46 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/group/</guid><description>
&lt;p>メーリングリスト、フォーラムを提供してくれる。&lt;br>
GCPなどでアカウント管理にも使える。&lt;/p>
&lt;h2 id="features">Features&lt;/h2>
&lt;h3 id="g-suite特有の機能">G Suite特有の機能&lt;/h3>
&lt;h4 id="グループアドレスの追加エイリアス">グループアドレスの追加(エイリアス)&lt;/h4>
&lt;p>&lt;a href="https://support.google.com/a/answer/2727156?hl=ja" title="グループのアドレスを追加する - G Suite 管理者 ヘルプ">グループのアドレスを追加する - G Suite 管理者 ヘルプ&lt;/a>&lt;/p></description></item><item><title>A: GitBook</title><link>https://progrhy.me/tech-notes/a/software/static-site-generator/gitbook/</link><pubDate>Sat, 25 Apr 2020 23:52:08 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/static-site-generator/gitbook/</guid><description>
&lt;p>Markdownで管理されたドキュメントからHTML, PDF, ePUBに簡単に製本できるツール。&lt;br>
ただし、2020-04-25現在、クラウドサービスに注力するそうで、OSSのツールチェインは不活発になっていくようだ。&lt;/p>
&lt;p>&lt;a href="https://github.com/GitbookIO/gitbook">https://github.com/GitbookIO/gitbook&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>⚠️ Deprecation warning&lt;/strong>&lt;/p>
&lt;p>As the efforts of the GitBook team are focused on the &lt;a href="https://www.gitbook.com">GitBook.com&lt;/a> platform, the CLI is no longer under active development.&lt;br>
All content supported by the CLI are mostly supported by our &lt;a href="https://docs.gitbook.com/integrations/github">GitBook.com / GitHub integration&lt;/a>.&lt;br>
Content hosted on the &lt;a href="https://legacy.gitbook.com">legacy.gitbook.com&lt;/a> will continue working until further notice. For differences with the new vesion, check out our &lt;a href="https://docs.gitbook.com/v2-changes/important-differences">documentation&lt;/a>.&lt;/p>
&lt;/blockquote>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://docs.gitbook.com/">https://docs.gitbook.com/&lt;/a> &amp;hellip; クラウドサービス向け&lt;/li>
&lt;li>&lt;a href="https://gitbookio.gitbooks.io/documentation/">Introduction | GitBook.com Documentation&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/GitbookIO/gitbook/tree/master/docs">https://github.com/GitbookIO/gitbook/tree/master/docs&lt;/a> &amp;hellip; たぶんOSSツールチェインのドキュメントはもうここを読むしかない。&lt;/li>
&lt;/ul>
&lt;h2 id="plugins">Plugins&lt;/h2>
&lt;p>目次生成系:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://developer.aliyun.com/mirror/npm/package/gitbook-plugin-page-toc">Package - gitbook-plugin-page-toc&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/zanfab/gitbook-plugin-intopic-toc">zanfab/gitbook-plugin-intopic-toc: GitBook Plugin to add inline table of contents (TOC) to each page using sticky and scrollspy effects.&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/billryan/gitbook-plugin-etoc">billryan/gitbook-plugin-etoc: Elegant toc plugin for GitBook&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/mebiusbox2/items/938af4b0d0bf7a4d3e33#gitbook-cli">GitBookによるドキュメント作成 - Qiita&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: GNU make</title><link>https://progrhy.me/tech-notes/a/software/make/</link><pubDate>Mon, 04 May 2020 19:50:02 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/make/</guid><description>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;p>公式リファレンスは↑&lt;/p>
&lt;p>サードパーティーのリファレンス的資料:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.ecoop.net/coop/translated/GNUMake3.77/make_toc.jp.html">GNU make 日本語訳(Coop編) - 目次&lt;/a> &amp;hellip; 1998年ぐらい。古い&lt;/li>
&lt;li>&lt;a href="http://qiita.com/chibi929/items/b8c5f36434d5d3fbfa4a">Makefileの関数 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="quickstart">Quickstart&lt;/h2>
&lt;p>使えるMakefileの例&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">.PHONY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">default&lt;/span> &lt;span style="color:#000">build&lt;/span> &lt;span style="color:#000">clean&lt;/span>
&lt;span style="color:#000">default&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">build&lt;/span>
&lt;span style="color:#000">clean&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>
rm -rf dist/
&lt;span style="color:#000">timestamp&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>
date +%s &amp;gt; timestamp
&lt;span style="color:#000">build&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">timestamp&lt;/span> &lt;span style="color:#000">another&lt;/span>-&lt;span style="color:#000">file&lt;/span>
some_build_command
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>ターゲットの依存ターゲットは複数記すことができる。&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.html">- 自動化のためのGNU Make入門講座 - Makefileの基本：ルール&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="makefile-構文">Makefile 構文&lt;/h2>
&lt;h3 id="変数">変数&lt;/h3>
&lt;p>変数定義のやり方について。&lt;/p>
&lt;p>&amp;ldquo;=&amp;rdquo; と &amp;ldquo;:=&amp;rdquo; は違う。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">src&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> foo.c
&lt;span style="color:#000">ymd&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>shell date +%Y%m%d&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://quruli.ivory.ne.jp/document/make_3.79.1/make-jp_5.html" title="GNU make: 6. 変数の使用法">GNU make: 6. 変数の使用法&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="curdir">$(CURDIR)&lt;/h4>
&lt;p>makeを実行しているプロセスのカレントディレクトリを返す。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gnu.org/software/make/manual/html_node/Recursion.html">https://www.gnu.org/software/make/manual/html_node/Recursion.html&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://d.hatena.ne.jp/m-hiyama/20080805/1217915354" title="今日のMake Tips：CURDIR変数 - 檜山正幸のキマイラ飼育記">今日のMake Tips：CURDIR変数 - 檜山正幸のキマイラ飼育記&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="関数">関数&lt;/h3>
&lt;h4 id="foreach-name-list-command">$(foreach name, LIST, command)&lt;/h4>
&lt;p>ループ実行&lt;/p>
&lt;h3 id="phonyターゲット">.PHONYターゲット&lt;/h3>
&lt;p>&lt;a href="https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html">https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html&lt;/a>&lt;/p>
&lt;p>ファイルを生成しないやつ&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">.PHONY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">clean&lt;/span>
&lt;span style="color:#000">clean&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>
rm *.o tmp
&lt;/code>&lt;/pre>&lt;/div>&lt;p>複数の.PHONYターゲットをまとめて記述することもできる&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">.PHONY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">all&lt;/span> &lt;span style="color:#000">clean&lt;/span> &lt;span style="color:#000">deps&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="条件分岐">条件分岐&lt;/h3>
&lt;p>&lt;a href="https://www.gnu.org/software/make/manual/make.html#Conditionals">7 Conditional Parts of Makefiles&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">libs_for_gcc&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> -lgnu
&lt;span style="color:#000">normal_libs&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>
&lt;span style="color:#000">foo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">objects&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#a40000">ifeq&lt;/span> &lt;span style="color:#a40000">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">CC&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">,gcc)&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">CC&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span> &lt;span style="color:#a40000">-o&lt;/span> &lt;span style="color:#a40000">foo&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">objects&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">libs_for_gcc&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#a40000">else&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">CC&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span> &lt;span style="color:#a40000">-o&lt;/span> &lt;span style="color:#a40000">foo&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">objects&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">normal_libs&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#a40000">endif&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="makeコマンド">makeコマンド&lt;/h2>
&lt;p>公式マニュアル:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gnu.org/software/make/manual/make.html#Running">9 How to Run make&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://www.gnu.org/software/make/manual/make.html#Overriding">9.5 Overriding Variables&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.gnu.org/software/make/manual/make.html#Options-Summary">9.7 Summary of Options&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>SYNOPSIS:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># デフォルトのタスク（＝最上部で定義されたタスク）を実行&lt;/span>
make
&lt;span style="color:#8f5902;font-style:italic"># タスク名を指定して実行。複数指定可&lt;/span>
make task1 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>task2 ...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># Makefileを指定する&lt;/span>
make -f&lt;span style="color:#000;font-weight:bold">|&lt;/span>--file &amp;lt;Makefile&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># dry-run&lt;/span>
make -n&lt;span style="color:#000;font-weight:bold">|&lt;/span>--dry-run
&lt;span style="color:#8f5902;font-style:italic"># 変数の設定&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># Makefile内で定義されていれば、オーバーライドする&lt;/span>
make &lt;span style="color:#000">CFLAGS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>-g
&lt;/code>&lt;/pre>&lt;/div>&lt;p>その他のオプション:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>オプション&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>-j|--jobs[=N]&lt;/code>&lt;/td>
&lt;td>同時実行数を指定。See &lt;a href="https://www.gnu.org/software/make/manual/make.html#Parallel">5.4 Parallel Execution&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-e|--environment-overrides&lt;/code>&lt;/td>
&lt;td>環境変数をオーバーライドする&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-d&lt;/code>&lt;/td>
&lt;td>デバッグ情報を表示。 &lt;code>--debug=a&lt;/code> と同じ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>--trace&lt;/code>&lt;/td>
&lt;td>実行時のトレース情報を表示する&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-s|--silent|--quiet&lt;/code>&lt;/td>
&lt;td>実行されるタスクをプリントしない&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-h|--help&lt;/code>&lt;/td>
&lt;td>ヘルプ表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-v|--version&lt;/code>&lt;/td>
&lt;td>バージョン表示&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="tips">Tips&lt;/h2>
&lt;h3 id="必要なディレクトリを作ってタスク実行">必要なディレクトリを作ってタスク実行&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="color:#000">BUILD_DIR&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> path/to/build
&lt;span style="color:#000">$(BUILD_DIR)&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>
mkdir -p &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>BUILD_DIR&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#000">all&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>&lt;span style="color:#000">BUILD_DIR&lt;/span>&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#204a87">cd&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>BUILD_DIR&lt;span style="color:#204a87;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> some_commands
&lt;span style="color:#000">.PHONY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">all&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="環境変数の取扱い">環境変数の取扱い&lt;/h3>
&lt;p>環境変数はMakeの変数として参照できる。例: &lt;code>$(CFLAGS)&lt;/code>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/kojiohta/items/54b1a9f7d482c35dc4fa">GNU Make のふたつの変数の使い分け - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.ecoop.net/coop/translated/GNUMake3.77/make_6.jp.html">GNU make 日本語訳(Coop編) - 変数の利用法&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="コマンドに引数を渡したい">コマンドに引数を渡したい&lt;/h3>
&lt;p>&lt;code>make CFAGS=-g&lt;/code> みたいに変数経由で渡すことになりそう。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/liubin/items/69d9faf804e82ddec376">Makefileにパラメータを渡す方法と条件文 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="http://itchyny.hatenablog.com/entry/20120213/1329135107">Makefileで遊ぼう 〜 階乗, フィボナッチ数, Brainfuck処理系まで - プログラムモグモグ&lt;/a>
&lt;ul>
&lt;li>入門レベルで割とよく使う感じの機能がまとまってる。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>A: jq</title><link>https://progrhy.me/tech-notes/a/cli/jq/</link><pubDate>Thu, 07 May 2020 11:44:41 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/cli/jq/</guid><description>
&lt;p>JSONにクエリしてフィルタできるCLIツール。&lt;/p>
&lt;h2 id="documents">Documents&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://stedolan.github.io/jq/tutorial/">https://stedolan.github.io/jq/tutorial/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://stedolan.github.io/jq/manual/">https://stedolan.github.io/jq/manual/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="チートシート">チートシート&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># オブジェクトの特定キーの要素を抽出&lt;/span>
cat foo.json &lt;span style="color:#000;font-weight:bold">|&lt;/span> jq &lt;span style="color:#4e9a06">&amp;#39;.some_key&amp;#39;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 配列の特定要素を抽出&lt;/span>
cat foo.json &lt;span style="color:#000;font-weight:bold">|&lt;/span> jq &lt;span style="color:#4e9a06">&amp;#39;.[0]&amp;#39;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 配列の個々のオブジェクトの特定キーを抽出&lt;/span>
cat foo.json &lt;span style="color:#000;font-weight:bold">|&lt;/span> jq &lt;span style="color:#4e9a06">&amp;#39;.[] | .some_key&amp;#39;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 配列の個々のオブジェクトからいくつかの要素を選んでそれぞれ配列に格納&lt;/span>
cat foo.json &lt;span style="color:#000;font-weight:bold">|&lt;/span> jq &lt;span style="color:#4e9a06">&amp;#39;.[] | [.keyA, .keyB, .keyC.keyAinC]&amp;#39;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># 配列の個々のオブジェクトからいくつかの要素を選んで新たなオブジェクトを作り、それぞれ出力&lt;/span>
cat foo.json &lt;span style="color:#000;font-weight:bold">|&lt;/span> jq &lt;span style="color:#4e9a06">&amp;#39;.[] | {a: .keyA, b: .keyB, ca: .keyC.keyAinC}&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.qoosky.io/techs/1ee07c140f">jq チートシート - Qoosky&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Cloud Load Balancing</title><link>https://progrhy.me/tech-notes/a/google/gcp/lb/</link><pubDate>Mon, 27 Apr 2020 10:48:40 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/gcp/lb/</guid><description>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/load-balancing/docs/">https://cloud.google.com/load-balancing/docs/&lt;/a>&lt;/p>
&lt;h2 id="概要">概要&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/load-balancing/docs/https/?hl=ja">HTTP(S) 負荷分散のコンセプト | 負荷分散 | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/load-balancing/docs/backend-service?hl=ja">バックエンド サービスについて | 負荷分散 | Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="spec">Spec&lt;/h2>
&lt;ul>
&lt;li>IP anycast対応&lt;/li>
&lt;li>アーキテクチャ:
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/solutions/about-capacity-optimization-with-global-lb?hl=ja">グローバル負荷分散によるアプリケーションの処理能力の改善 | アーキテクチャ | Google Cloud&lt;/a> &amp;hellip; IP anycast, GFE&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="ssl証明書">SSL証明書&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/load-balancing/docs/ssl-certificates">https://cloud.google.com/load-balancing/docs/ssl-certificates&lt;/a>&lt;/p>
&lt;ul>
&lt;li>マネージド証明書
&lt;ul>
&lt;li>Let&amp;rsquo;s Encrypt&lt;/li>
&lt;li>DV&lt;/li>
&lt;li>自動更新&lt;/li>
&lt;li>ワイルドカードドメインは不可&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="接続ドレイン">接続ドレイン&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/load-balancing/docs/enabling-connection-draining?hl=ja">コネクション ドレインの有効化 | 負荷分散 | Google Cloud&lt;/a>&lt;/p>
&lt;p>コネクションドレインとも表記される。（公式ドキュメント統一してくれ）&lt;/p>
&lt;blockquote>
&lt;p>コネクション ドレインとは、VM がインスタンス グループから除外されたときに、既存の進行中リクエストに完了までの時間が確実に与えられるようにするプロセスです。&lt;/p>
&lt;p>コネクション ドレインを有効にするには、バックエンド サービスでコネクション ドレイン タイムアウトを設定します。タイムアウト時間は 1～3,600 秒に設定してください。&lt;/p>
&lt;/blockquote>
&lt;p>デフォルトONでいいんじゃないかと思うのだが、2020-04-27現在は、上記のように設定が必要。&lt;/p>
&lt;p>次のLBのバックエンドサービスで使える:&lt;/p>
&lt;ul>
&lt;li>HTTP(S) ロードバランサ&lt;/li>
&lt;li>TCP プロキシ ロードバランサ&lt;/li>
&lt;li>SSL プロキシ ロードバランサ&lt;/li>
&lt;li>内部 HTTP(S) ロードバランサ&lt;/li>
&lt;li>内部 TCP / UDP ロードバランサ&lt;/li>
&lt;/ul>
&lt;h2 id="外部https負荷分散">外部HTTP(S)負荷分散&lt;/h2>
&lt;h3 id="バックエンドバケット">バックエンドバケット&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/load-balancing/docs/https/adding-backend-buckets-to-load-balancers?hl=ja">ロードバランサへの Cloud Storage バケットの追加 | 負荷分散 | Google Cloud&lt;/a>&lt;/p>
&lt;p>Cloud Storageバケットをバックエンドに追加し、パスで振り分けることができる。&lt;/p>
&lt;h2 id="logging">Logging&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/load-balancing/docs/https/https-logging-monitoring?hl=ja">HTTP(S) 負荷分散のロギングとモニタリング | Google Cloud&lt;/a>&lt;/p>
&lt;h2 id="topics">Topics&lt;/h2>
&lt;h3 id="gclbとcdnによる動的サイト高速化">GCLBとCDNによる動的サイト高速化&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/solutions/about-capacity-optimization-with-global-lb?hl=ja">グローバル負荷分散によるアプリケーションの処理能力の改善 | アーキテクチャ | Google Cloud&lt;/a>にあるように、GCLBを前段に置いたサービスでは、GFEによるネットワーク経路最適化やTLS終端の恩恵を得られる。&lt;br>
従って、APIの&lt;a href="https://docs.microsoft.com/ja-jp/azure/cdn/cdn-dynamic-site-acceleration">動的サイト高速化&lt;/a>をねらいとしてCDNを入れる意味は薄い。&lt;br>
特に、全くキャッシュをしない場合、CDNを入れても入れなくてもほとんど変わらない、とGoogle Cloudの中の人が言っていた。（無意味ではないけど、ネットワークのゆらぎぐらいの差らしい）&lt;/p></description></item><item><title>A: Backends</title><link>https://progrhy.me/tech-notes/a/software/terraform/backend/</link><pubDate>Sun, 26 Apr 2020 23:05:57 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terraform/backend/</guid><description>
&lt;blockquote>
&lt;p>A &amp;ldquo;backend&amp;rdquo; in Terraform determines how state is loaded and how an operation such as &lt;code>apply&lt;/code> is executed. This abstraction enables non-local file state storage, remote execution, etc.&lt;/p>
&lt;/blockquote>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.terraform.io/docs/backends/config.html">Configuration&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.terraform.io/docs/backends/init.html">Init&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.terraform.io/docs/backends/state.html">State Storage &amp;amp; Locking&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="gcs">gcs&lt;/h2>
&lt;p>&lt;a href="https://www.terraform.io/docs/backends/types/gcs.html">https://www.terraform.io/docs/backends/types/gcs.html&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-HCL" data-lang="HCL">&lt;span style="color:#204a87;font-weight:bold">terraform&lt;/span> {
&lt;span style="color:#204a87;font-weight:bold">backend&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;gcs&amp;#34;&lt;/span> {
&lt;span style="color:#000"> bucket&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;tf-state-prod&amp;#34;&lt;/span>
&lt;span style="color:#000"> prefix&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;terraform/state&amp;#34;&lt;/span>
}
}
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>認証用の &lt;code>credentials&lt;/code> または &lt;code>access_token&lt;/code> が必要。&lt;/li>
&lt;/ul>
&lt;h3 id="config-variables">config variables&lt;/h3>
&lt;ul>
&lt;li>&lt;code>credentials&lt;/code> &amp;hellip; GCPのサービスアカウントキー（JSON）のパスを指定する
&lt;ul>
&lt;li>環境変数 &lt;code>GOOGLE_BACKEND_CREDENTIALS&lt;/code> or &lt;code>GOOGLE_CREDENTIALS&lt;/code> によってパスを指定することもできる&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/sdk/gcloud/reference/auth/application-default/login">https://cloud.google.com/sdk/gcloud/reference/auth/application-default/login&lt;/a> で作成できるユーザの&lt;a href="https://cloud.google.com/docs/authentication/production">Application Default Credentials&lt;/a>でも良い&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gcloud auth application-default login
&lt;/code>&lt;/pre>&lt;/div>&lt;p>See also:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/software/terraform/provider/google/#configuration">Providers &amp;gt; Google&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="s3">s3&lt;/h2>
&lt;p>&lt;a href="https://www.terraform.io/docs/backends/types/s3.html">https://www.terraform.io/docs/backends/types/s3.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>ロックしたいときはDynamoDBを使う。
&lt;ul>
&lt;li>オプション &lt;code>dynamodb_table&lt;/code> を指定する&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>A: mdBook</title><link>https://progrhy.me/tech-notes/a/software/static-site-generator/mdbook/</link><pubDate>Wed, 06 May 2020 13:52:21 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/static-site-generator/mdbook/</guid><description>
&lt;p>Rust製のGitBookみたいなもの。&lt;br>
高速でよさそう。&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;p>上のサイトがドキュメントを兼ねている。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://rust-lang.github.io/mdBook/cli/">CLI&lt;/a>
&lt;ul>
&lt;li>インストール方法はこちら&lt;/li>
&lt;li>サブコマンド:
&lt;ul>
&lt;li>&lt;a href="https://rust-lang.github.io/mdBook/cli/init.html">init&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rust-lang.github.io/mdBook/cli/build.html">build&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rust-lang.github.io/mdBook/cli/serve.html">serve&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="cli--quickstart">CLI &amp;amp; Quickstart&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># 新しくブックのディレクトリを作り、初期セットアップを行う&lt;/span>
mdbook init &amp;lt;your-book-directory&amp;gt;
&lt;span style="color:#8f5902;font-style:italic"># デフォルトでHTMLを ./book にビルド&lt;/span>
mdbook build &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTIONS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># デフォルトで ./book 以下のHTMLを元にHTTPサーバを起動&lt;/span>
mdbook serve &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>OPTIONS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>2020-05-06現在、 &lt;code>serve&lt;/code> コマンドはHTML表示のテスト用で、Webサイト用の完全なサーバ機能を目指したものではないとのこと&lt;/li>
&lt;/ul>
&lt;h2 id="memo">MEMO&lt;/h2>
&lt;h3 id="2020-04-29">2020-04-29&lt;/h3>
&lt;ul>
&lt;li>config: &lt;a href="https://rust-lang.github.io/mdBook/format/config.html">https://rust-lang.github.io/mdBook/format/config.html&lt;/a>&lt;/li>
&lt;li>サイドバーに目次ツリーが表示されているが、 &lt;code>[output.html.fold]&lt;/code> で挙動を変えられそう。
&lt;ul>
&lt;li>&lt;a href="https://github.com/rust-lang/mdBook/pull/1027">https://github.com/rust-lang/mdBook/pull/1027&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>目次（Table of Contents）は公式サポートないのかも。イシューになってる
&lt;ul>
&lt;li>&lt;code>{{#toc}}{{/toc}}&lt;/code> で行けるんじゃないのかな？
&lt;ul>
&lt;li>&lt;a href="https://rust-lang.github.io/mdBook/format/theme/index-hbs.html#1-toc">https://rust-lang.github.io/mdBook/format/theme/index-hbs.html#1-toc&lt;/a>&lt;/li>
&lt;li>（2020-05-06追記）愚直に書き足したところ、駄目だった&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://github.com/rust-lang/mdBook/issues/153">https://github.com/rust-lang/mdBook/issues/153&lt;/a>&lt;/li>
&lt;li>自作している人がいる
&lt;ul>
&lt;li>&lt;a href="https://github.com/badboy/mdbook-toc">https://github.com/badboy/mdbook-toc&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>A: Namespace</title><link>https://progrhy.me/tech-notes/a/software/k8s/namespace/</link><pubDate>Mon, 04 May 2020 21:45:30 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/namespace/</guid><description>
&lt;p>&lt;a href="https://kubernetes.io/docs/tasks/administer-cluster/namespaces/">https://kubernetes.io/docs/tasks/administer-cluster/namespaces/&lt;/a>&lt;/p>
&lt;p>Kubernetesでは、複数の仮想的なクラスタを同じ物理クラスタ上に構築することができる。この仮想クラスタのことを &lt;strong>Namespace&lt;/strong> と呼ぶ。&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Namespace&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>myapp&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-15/">Kubernetes道場 15日目 - Namespace / Resource QoS / ResourceQuota / LimitRangeについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="リソース管理">リソース管理&lt;/h2>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/concept/#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%84pod%E3%81%B8%E3%81%AEcpu%E3%83%A1%E3%83%A2%E3%83%AA%E3%81%AE%E5%89%B2%E5%BD%93%E3%81%A6">Concept#コンテナやpodへのcpuメモリの割当て&lt;/a>&lt;/p>
&lt;p>ResourceQuotasやLimitRangeを設定することで、リソース管理をよりいい感じに行えるっぽい。（が、逆に面倒ではないかという気もする。）&lt;/p>
&lt;h3 id="resourcequotas">ResourceQuotas&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/policy/resource-quotas/">https://kubernetes.io/docs/concepts/policy/resource-quotas/&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>ResourceQuota&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>compute-resources&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">hard&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">requests.cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">requests.memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>1Gi&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">limits.cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;2&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">limits.memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>2Gi&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>適用例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">kubectl create -f ./compute-resources.yaml --namespace&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>myspace
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note:&lt;/p>
&lt;ul>
&lt;li>ResourceQuotaを設定したnamespaceに属する全Podの合計値が上限になる&lt;/li>
&lt;li>cpu, memory以外も色々ある&lt;/li>
&lt;/ul>
&lt;h3 id="limitrange">LimitRange&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/policy/limit-range/">https://kubernetes.io/docs/concepts/policy/limit-range/&lt;/a>&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>LimitRange&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>limit-mem-cpu-per-container&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">limits&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">max&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;800m&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1Gi&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">min&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;100m&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;99Mi&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;700m&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;900Mi&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">defaultRequest&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cpu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;110m&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;111Mi&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Container&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>namespaceに対して設定する&lt;/li>
&lt;li>cpu/memoryのrequests/limitsの下限、上限、デフォルト値を設定できる&lt;/li>
&lt;/ul></description></item><item><title>A: Vim Plugins</title><link>https://progrhy.me/tech-notes/a/program/vim/plugin/</link><pubDate>Tue, 05 May 2020 11:23:51 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/vim/plugin/</guid><description>
&lt;h2 id="plugins">Plugins&lt;/h2>
&lt;p>次節以降で紹介していないもの:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/ervandew/supertab">ervandew/supertab&lt;/a> &amp;hellip; タブ補完を可能にしてくれる
&lt;ul>
&lt;li>補完リストのスクロールを上から下にしたい場合、vimrcに&lt;br>
&lt;code>let g:SuperTabDefaultCompletionType = &amp;quot;&amp;lt;c-n&amp;gt;&amp;quot;&lt;/code>&lt;br>
を設定する&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://github.com/cespare/vim-toml">cespare/vim-toml&lt;/a> &amp;hellip; TOMLのシンタックスハイライト&lt;/li>
&lt;li>&lt;a href="https://github.com/kana/vim-operator-user">kana/vim-operator-user&lt;/a> &amp;hellip; 後掲のvim-operator-replaceなどが依存している
&lt;ul>
&lt;li>ドキュメント: &lt;a href="http://kana.github.io/config/vim/operator-user.html">Vim: operator-user - Define your own operator easily&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://sy-base.com/myrobotics/vim/vim-my-plugins/">vim – 強力なおすすめプラグイン – MY ROBOTICS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://liginc.co.jp/469142">僕がVimで愛用しているプラグイン30連発 | 東京のWeb制作会社LIG&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ctrlpvim">ctrlp.vim&lt;/h2>
&lt;p>&lt;a href="https://github.com/ctrlpvim/ctrlp.vim">https://github.com/ctrlpvim/ctrlp.vim&lt;/a>&lt;/p>
&lt;p>ディレクトリ下のファイルからファイル名をインクリメンタル検索して開いたり、バッファ一覧から検索したり、開いてるバッファの該当行を探してジャンプしたりできる。&lt;/p>
&lt;p>vimrc設定例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#8f5902;font-style:italic">&amp;#34; &amp;lt;C-p&amp;gt;で実行するフィーチャーをCtrlPMixedに変更&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; カレントディレクトリ下のファイル検索 + バッファ一覧 + 最後に開いたファイルリスト&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span> &lt;span style="color:#000">g&lt;/span>:&lt;span style="color:#000">ctrlp_cmd&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;CtrlPMixed&amp;#39;&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; &amp;lt;C-p&amp;gt;で実行するコマンドを変更&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&amp;#34; git下じゃないときはvimのglobとかにフォールバックしてくれる&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span> &lt;span style="color:#000">g&lt;/span>:&lt;span style="color:#000">ctrlp_user_command&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span> \ [&lt;span style="color:#4e9a06">&amp;#39;.git&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;cd %s &amp;amp;&amp;amp; git ls-files -co --exclude-standard&amp;#39;&lt;/span>]&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nnoremap&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Leader&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>/ &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">ESC&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>:&lt;span style="color:#000">CtrlPLine&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Return&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/oahiroaki/items/d71337fb9d28303a54a8">ctrlp.vimの使い方まとめ - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sy-base.com/myrobotics/vim/vim_ctrlp/">vimのファイル検索プラグインctrlp.vimの設定 – MY ROBOTICS&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="nerdtree">NERDTree&lt;/h2>
&lt;p>&lt;a href="https://github.com/scrooloose/nerdtree">https://github.com/scrooloose/nerdtree&lt;/a>&lt;/p>
&lt;p>有名なVimのファイラプラグイン。&lt;/p>
&lt;h3 id="usage">Usage&lt;/h3>
&lt;p>ツリービューの操作:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>キー&lt;/th>
&lt;th>用途&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>?&lt;/code>&lt;/td>
&lt;td>help表示（トグル）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>I&lt;/code>&lt;/td>
&lt;td>隠しファイルの表示（トグル）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="ファイルディレクトリを作成">ファイル・ディレクトリを作成&lt;/h4>
&lt;p>ファイルツリーの任意の位置で &lt;code>m&lt;/code> を押すとメニューが表示されるので、 &lt;code>(a)dd a childnode&lt;/code> を選ぶ。&lt;br>
ディレクトリを作る場合は末尾に &lt;code>/&lt;/code> を入力すること。&lt;br>
でないと、空のファイルが作られる。&lt;/p>
&lt;p>&lt;code>Ctrl-C&lt;/code> でメニューを抜けることができた。(Macで)&lt;/p>
&lt;h2 id="vim-operator-replace">vim-operator-replace&lt;/h2>
&lt;p>&lt;a href="https://github.com/kana/vim-operator-replace">https://github.com/kana/vim-operator-replace&lt;/a>&lt;/p>
&lt;p>ドキュメント:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://kana.github.io/config/vim/operator-replace.html">Vim: operator-replace - Operator to replace text with register content&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ヤンクしているテキストでカーソル下のテキストを置き換える。&lt;/p>
&lt;p>vimrc設定例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Space&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">operator&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">replace&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>※ドキュメントでは &lt;code>map&lt;/code> になっているが、 &lt;code>nmap&lt;/code> でも動いた。&lt;/p>
&lt;p>下のようなテキストを編集する:&lt;/p>
&lt;pre>&lt;code>foo
bar
baz
&lt;/code>&lt;/pre>&lt;p>3行とも &lt;code>foo&lt;/code> にしたいときは次のように操作すればいい:&lt;/p>
&lt;ol>
&lt;li>カーソルを先頭行 &lt;code>f&lt;/code> 位置に置き、「ye」とタイプして &lt;code>foo&lt;/code> をヤンク&lt;/li>
&lt;li>「j」を押して2行目の行頭にカーソルを移動し、「&lt;Space>e」とタイプする&lt;/li>
&lt;li>「j^」とタイプして3行目の行頭に移動し、「.」をタイプする&lt;/li>
&lt;/ol>
&lt;p>（参考記事の通りにやるのは難しかった。。）&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://kazuph.hateblo.jp/entry/2013/01/04/005030">vim-operator-replaceでコピペを簡単に - 僕のYak Shavingは終わらない&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="yankroundvim">yankround.vim&lt;/h2>
&lt;p>&lt;a href="https://github.com/LeafCage/yankround.vim">https://github.com/LeafCage/yankround.vim&lt;/a>&lt;/p>
&lt;p>レジスタ履歴を取得・再利用する。&lt;/p>
&lt;p>vimrc設定例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Vim" data-lang="Vim">&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000">p&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">p&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">xmap&lt;/span> &lt;span style="color:#000">p&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">p&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000">P&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">P&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000">gp&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">gp&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">xmap&lt;/span> &lt;span style="color:#000">gp&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">gp&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000">gP&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">gP&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">C&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">p&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">prev&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nmap&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">C&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">n&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Plug&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;(&lt;/span>&lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">next&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#000">nnoremap&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Leader&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000">y&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">ESC&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>:&lt;span style="color:#000">Unite&lt;/span> &lt;span style="color:#000">yankround&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Return&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>p&lt;/code> や &lt;code>P&lt;/code> でヤンクを貼り付けた後、 &lt;code>&amp;lt;C-p&amp;gt;&lt;/code> や &lt;code>&amp;lt;C-n&amp;gt;&lt;/code> で順に操作して選べる。&lt;/p>
&lt;p>&lt;code>:Unite yankround&lt;/code> でUniteの小画面を開いてレジスタを一覧できる。
この小画面内で &lt;code>d&lt;/code> でレジスタを消したり、 &lt;code>x&lt;/code> で素早く対象を選んだりできる。（Unite全然使い倒してない）&lt;/p>
&lt;p>ctrlp.vimと組み合わせると &lt;code>:CtrlPYankRound&lt;/code> というコマンドが使えるようになって、これもレジスタを一覧できるのだけど、レジスタの内容でインクリメンタル検索できないので、 &lt;code>:Unite yankround&lt;/code> の方が使いやすい。&lt;br>
（GitHubにイシューが挙がっている。）&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://engineerspirit.com/2017/07/01/post-1427/">vimの便利なPlugin（その26）yankround | 技術者魂&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Pod</title><link>https://progrhy.me/tech-notes/a/software/k8s/pod/</link><pubDate>Mon, 04 May 2020 21:45:01 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/pod/</guid><description>
&lt;p>1つ以上のコンテナを内包する、ワークロードの基本単位。&lt;/p>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/container/">Container&lt;/a>&lt;/p>
&lt;h2 id="スケジューリング">スケジューリング&lt;/h2>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/concepts/configuration/assign-pod-node/">Node上へのPodのスケジューリング - Kubernetes&lt;/a>&lt;/p>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>Podが起動できない理由:
&lt;ul>
&lt;li>OutOfMemory, OutOfCpu &amp;hellip; Nodeのリソースが足りない&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="affinity">Affinity&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/ja/docs/concepts/configuration/assign-pod-node/#affinity-%e3%81%a8-anti-affinity">Node上へのPodのスケジューリング - Kubernetes#AffinityとAnti-Affinity&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-18/#affinity-anti-affinity">Kubernetes道場 18日目 - Affinity / Anti-Affinity / Taint / Tolerationについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.1915keke.com/entry/2018/09/26/163447">KubernetesのNode AffinityとInternal Pod Affinityを使ってPodを高度スケジューリングする - Kekeの日記&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/sheepland/items/ed12b3dc4a8f1df7c4ec">KubernetesのNode Affinity, Inter-Pod Affinityについて - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="taintsとtolerations">TaintsとTolerations&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">Taints and Tolerations - Kubernetes&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://qiita.com/sheepland/items/8fedae15e157c102757f">KubernetesのTaintsとTolerationsについて - Qiita&lt;/a>より:&lt;/p>
&lt;blockquote>
&lt;p>Node SelectorやNode Affinityが特定のノードに特定のPodをスケジュールするための仕組みに対し、TaintsとTolerationsは特定のノードにPodをスケジュールしないための仕組み&lt;/p>
&lt;/blockquote>
&lt;h2 id="ライフサイクル">ライフサイクル&lt;/h2>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/concepts/workloads/pods/pod-lifecycle/">Podのライフサイクル - Kubernetes&lt;/a>&lt;/p>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/container/#lifecycle-hooks">Container#lifecycle-hooks&lt;/a>&lt;/p>
&lt;h3 id="podの終了">Podの終了&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods">https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods&lt;/a>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/superbrothers/items/3ac78daba3560ea406b2">Kubernetes: 詳解 Pods の終了 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tech-lab.sios.jp/archives/18730">KubernetesでRollingUpdateするためのPodの安全な終了 | SIOS Tech. Lab&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="topics">Topics&lt;/h2>
&lt;h3 id="crashloopbackoff">CrashLoopBackOff&lt;/h3>
&lt;p>発生条件:&lt;/p>
&lt;ul>
&lt;li>memory limits以上を使おうとしてOOMで殺され、繰り返し再起動されるとき
&lt;ul>
&lt;li>再起動間隔はexponential backoffで延びる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/sheepland/items/eb0e4c65aaae70ec4e2f">KubernetesのResource RequestsとResource Limitsについて - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="pod-eviction">Pod Eviction&lt;/h3>
&lt;p>See &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/concept/#pod-eviction">Concept#pod-eviction&lt;/a>&lt;/p></description></item><item><title>A: Perl</title><link>https://progrhy.me/tech-notes/a/program/lang/perl/</link><pubDate>Fri, 08 May 2020 22:34:00 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/lang/perl/</guid><description>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;p>&lt;a href="https://perldoc.perl.org/">https://perldoc.perl.org/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>邦訳: &lt;a href="https://perldoc.jp/">https://perldoc.jp/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="podの書き方">PODの書き方&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://perldoc.perl.org/5.30.0/perlpod.html">https://perldoc.perl.org/5.30.0/perlpod.html&lt;/a>&lt;/li>
&lt;li>邦訳: &lt;a href="https://perldoc.jp/docs/perl/5.26.1/perlpod.pod">https://perldoc.jp/docs/perl/5.26.1/perlpod.pod&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="history">History&lt;/h2>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ja.wikipedia.org/wiki/Perl">Perl - Wikipedia&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://history.perl.org/PerlTimeline.html">http://history.perl.org/PerlTimeline.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="cpan">CPAN&lt;/h2>
&lt;h3 id="cpanモジュールのメンテに関する備忘録">CPANモジュールのメンテに関する備忘録&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://d.hatena.ne.jp/gfx/20140823/1408750107">comaint(1)でCPAN moduleのcomaintainerを追加する - Islands in the byte stream&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://keyamb.hatenablog.com/entry/2014/03/15/204118">Minilla を使って CPAN にモジュールを上げてみた - weblog of key_amb&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sites.google.com/site/progrhymetechwiki/home/memo/2017/20170509#TOC-CPAN-">久しぶりにCPANリリース / 20170509 - progrhyme&amp;rsquo;s Tech Wiki&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Pipelines</title><link>https://progrhy.me/tech-notes/a/software/spinnaker/pipeline/</link><pubDate>Tue, 05 May 2020 00:28:05 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/spinnaker/pipeline/</guid><description>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;p>Guides:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.spinnaker.io/guides/user/pipeline/managing-pipelines/">Managing Pipelines&lt;/a> &amp;hellip; 作成、実行、無効化、削除、編集、設定の復元、etc.&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://www.spinnaker.io/reference/pipeline/">Reference&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.spinnaker.io/reference/pipeline/stages/">Stages&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;h3 id="automated-triggers">Automated Triggers&lt;/h3>
&lt;p>パイプラインを外部から実行するためのトリガー設定。&lt;/p>
&lt;h4 id="docker-registry">Docker Registry&lt;/h4>
&lt;p>&lt;a href="https://www.spinnaker.io/setup/install/providers/docker-registry/">https://www.spinnaker.io/setup/install/providers/docker-registry/&lt;/a> で設定しているリポジトリに新しいイメージがpushされたときに発火する。&lt;br>
※タグが更新されないと発火しない&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.armory.io/spinnaker-user-guides/docker/">Working with Docker Images - Armory Spinnaker Documentation&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tech.virtualtech.jp/entry/2018/06/25/180834">Spinnakerのパイプラインによる自動デプロイ - 仮想化通信&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="webhooks">Webhooks&lt;/h4>
&lt;p>&lt;a href="https://www.spinnaker.io/guides/user/pipeline/triggers/webhooks/">https://www.spinnaker.io/guides/user/pipeline/triggers/webhooks/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;spinnaker-url&amp;gt;/webhooks/webhook/$key&lt;/code> な任意のURLを発行して、対象のパイプラインのトリガーにできる&lt;/li>
&lt;li>Spinnaker for GCPな環境でも外から叩けるURLが発行できそうだった&lt;/li>
&lt;/ul>
&lt;h3 id="manual-judgement">Manual Judgement&lt;/h3>
&lt;p>Documents:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.spinnaker.io/guides/tutorials/codelabs/safe-deployments/">Safe Deployments - Spinnaker&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>Manual Judgement&lt;/code> stageを追加することで、人間による手動判断のプロセスを追加できる。&lt;/p>
&lt;p>MEMO:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Manual Judgement&lt;/code> stageでは通知を飛ばすことができる。これによってパイプラインの実行権限のある人に判断を促す&lt;/li>
&lt;li>&lt;code>Manual Judgement&lt;/code> の結果によって処理を分岐させたい場合、続くstageで &lt;code>Conditional on Expression&lt;/code> にチェックを入れ、条件として &lt;code>${ #(&amp;quot;Manual Judgementのstage名&amp;quot;).equals(&amp;quot;選択肢&amp;quot;)}&lt;/code> を入れる&lt;/li>
&lt;/ul>
&lt;h4 id="propagate-authentication">Propagate Authentication&lt;/h4>
&lt;p>これにチェックを入れると、認証機能によって許可されたユーザにしか判断が下せないようになる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.armory.io/spinnaker/authorization/">Authentication and Authorization - Armory Spinnaker Documentation&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.spinnaker.io/workshops/lab-5.html">Lab 5: Deployment Safeguards | workshops&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Secret</title><link>https://progrhy.me/tech-notes/a/software/k8s/secret/</link><pubDate>Mon, 04 May 2020 22:39:15 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/secret/</guid><description>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/software/k8s/configmap/">ConfigMap&lt;/a>&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>ConfigMapと同じような使い方ができるが、暗号化機構が備わっており、クレデンシャルなど機微情報を扱うのに向いている。&lt;/p>
&lt;p>Podから環境変数として読み込むという使い方をすることが多いようだ。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ubiteku.oinker.me/2017/03/01/kubernetes-secrets/">Kubernetes Secrets の紹介 – データベースのパスワードやその他秘密情報をどこに保存するか？ – ゆびてく&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="documents">Documents&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/auth/secrets.md">design-proposals/secrets.md - kubernetes/community&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="secretsの作成">Secretsの作成&lt;/h2>
&lt;p>例1) テキストファイルから作成&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Bash" data-lang="Bash">&lt;span style="color:#204a87">echo&lt;/span> -n &lt;span style="color:#4e9a06">&amp;#39;admin&amp;#39;&lt;/span> &amp;gt; ./username.txt
&lt;span style="color:#204a87">echo&lt;/span> -n &lt;span style="color:#4e9a06">&amp;#39;1f2d1e2e67df&amp;#39;&lt;/span> &amp;gt; ./password.txt
kubectl create secret generic db-user-pass --from-file&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>./username.txt --from-file&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>./password.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;p>例2) 自分で定義ファイル(YAML)を作る&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Bash" data-lang="Bash">&lt;span style="color:#204a87">echo&lt;/span> -n &lt;span style="color:#4e9a06">&amp;#39;admin&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> base64
&lt;span style="color:#000">YWRtaW4&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>
&lt;span style="color:#204a87">echo&lt;/span> -n &lt;span style="color:#4e9a06">&amp;#39;1f2d1e2e67df&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> base64
MWYyZDFlMmU2N2Rm
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#8f5902;font-style:italic">## secret.yaml&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Secret&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>mysecret&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Opaque&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">data&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">username&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>YWRtaW4=&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">password&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>MWYyZDFlMmU2N2Rm&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Bash" data-lang="Bash">kubectl apply -f ./secret.yaml
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>A: Service</title><link>https://progrhy.me/tech-notes/a/software/k8s/service/</link><pubDate>Mon, 04 May 2020 21:45:23 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/k8s/service/</guid><description>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/services-networking/service/">https://kubernetes.io/docs/concepts/services-networking/service/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/service">https://cloud.google.com/kubernetes-engine/docs/concepts/service&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>Podの集合で実行されている持続的なワークロードをネットワークサービスとして公開する抽象的な手法。&lt;/p>
&lt;p>Serviceを使用すると、メンバーPodのIPアドレスが変更されても、Serviceが存続している間に固定のIPアドレスを取得できる。&lt;/p>
&lt;p>Service定義ファイルのサンプル:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">selector&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">app&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>MyApp&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">ports&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">protocol&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>TCP&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">port&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">targetPort&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">9376&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これはKubernetesクラスタ内で &lt;code>my-service&lt;/code> という名前でアクセスできる。&lt;/p>
&lt;h2 id="仕様">仕様&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors">Label Selector&lt;/a> &amp;hellip; サービスを識別するためのラベルとそのセレクタ。&lt;/li>
&lt;li>&lt;strong>Endpoints&lt;/strong> API &amp;hellip; Service内のPodの変更に伴って更新される。&lt;/li>
&lt;/ul>
&lt;h2 id="serviceのtype">Serviceのtype&lt;/h2>
&lt;p>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/service?hl=ja#types_of_services">https://cloud.google.com/kubernetes-engine/docs/concepts/service?hl=ja#types_of_services&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;code>ClusterIP&lt;/code> （デフォルト） &amp;hellip; クラスタ内で固定IPアドレスを獲得&lt;/li>
&lt;li>&lt;code>NodePort&lt;/code> &amp;hellip; 指定された1つ以上の &lt;code>nodePort&lt;/code> 値を利用して、ノードのIPアドレスを通じてアクセス可能になる&lt;/li>
&lt;li>&lt;code>LoadBalancer&lt;/code> &amp;hellip; ネットワークロードバランサを介したアクセスを提供&lt;/li>
&lt;li>&lt;code>ExternalName&lt;/code> &amp;hellip; See below&lt;/li>
&lt;li>&lt;code>Headless&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="externalname">ExternalName&lt;/h3>
&lt;p>&lt;a href="https://kubernetes.io/ja/docs/concepts/services-networking/service/#externalname">https://kubernetes.io/ja/docs/concepts/services-networking/service/#externalname&lt;/a>&lt;/p>
&lt;p>外部から参照できるDNS名を提供する。&lt;br>
この機能を使うには、GKEなどのように、KubernetesにDNSコンポーネントが導入されている必要がある。&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-YAML" data-lang="YAML">&lt;span style="color:#204a87;font-weight:bold">apiVersion&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>v1&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">kind&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>Service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my-service&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">namespace&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>prod&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">spec&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>ExternalName&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">externalName&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>my.database.example.com&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="参考記事など">参考記事など&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/service?hl=ja">Service | Kubernetes Engine のドキュメント | Google Cloud&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cstoku.dev/posts/2018/k8sdojo-09/">Kubernetes道場 9日目 - Serviceについて - Toku&amp;rsquo;s Blog&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: UEFI</title><link>https://progrhy.me/tech-notes/a/firmware/uefi/</link><pubDate>Mon, 04 May 2020 08:45:22 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/firmware/uefi/</guid><description>
&lt;h2 id="about">About&lt;/h2>
&lt;p>&lt;a href="http://e-words.jp/w/UEFI.html">UEFI（EFI）とは - IT用語辞典 e-Words&lt;/a>より:&lt;/p>
&lt;blockquote>
&lt;p>コンピュータ内の各装置を制御するファームウェアとオペレーティングシステム（OS）の間の通信仕様を定めた標準規格の一つ。従来のBIOSに代わるもの。UEFI対応ファームウェアを指してUEFIと呼ぶこともある。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>業界団体: UEFIフォーラム &lt;a href="https://uefi.org/">https://uefi.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ja.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface">Unified Extensible Firmware Interface - Wikipedia&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="仕様">仕様&lt;/h2>
&lt;p>&lt;a href="https://uefi.org/specifications">https://uefi.org/specifications&lt;/a>&lt;/p>
&lt;p>2020-05-04時点の最新版: &lt;a href="https://uefi.org/sites/default/files/resources/UEFI_Spec_2_8_A_Feb14.pdf">UEFI Specification Version 2.8 (Errata A) (released February 2020)&lt;/a>&lt;/p>
&lt;h3 id="セキュアブート">セキュアブート&lt;/h3>
&lt;p>&lt;a href="https://cloud.google.com/security/shielded-cloud/shielded-vm?hl=ja">Shielded VM | ドキュメント | Google Cloud&lt;/a>より:&lt;/p>
&lt;blockquote>
&lt;p>すべてのブートコンポーネントのデジタル署名を検証し、署名検証が失敗した場合にブートプロセスを停止することで、システムが正規のソフトウェアのみを実行することを保証します。&lt;/p>
&lt;/blockquote>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/ja-jp/windows-hardware/design/device-experiences/oem-secure-boot">セキュア ブート | Microsoft Docs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="歴史">歴史&lt;/h2>
&lt;p>&lt;a href="http://e-words.jp/w/UEFI.html">UEFI（EFI）とは - IT用語辞典 e-Words&lt;/a>より:&lt;/p>
&lt;blockquote>
&lt;p>従来使われてきたBIOSは、16ビットマイクロプロセッサの時代に設計されたもので、マルチタスク環境で利用されることを想定していない点や、メインメモリの位置640KB〜1MBわずか384KBの領域にしか配置できない点など、現在のハードウェアやOSから見ると時代遅れで窮屈な制約が多い。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>これを克服するため、64ビット環境を想定して新たに設計された近代的で拡張可能なファームウェアのインターフェース仕様としてUEFIの開発が始まった。&lt;/p>
&lt;/blockquote>
&lt;p>MEMO:&lt;/p>
&lt;ul>
&lt;li>開発当初は「EFI」（Extensible Firmware Interface）という名称だった。&lt;/li>
&lt;li>2005年、業界団体のUEFIフォーラムへ移管され、同時に名称もUEFI（Unified EFI）に改められた。&lt;/li>
&lt;/ul></description></item><item><title>A: UNIX系コマンド</title><link>https://progrhy.me/tech-notes/a/cli/unix-cmd/</link><pubDate>Mon, 27 Apr 2020 19:37:41 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/cli/unix-cmd/</guid><description>
&lt;p>筆者はLinuxかmacOSを使うことが多い。&lt;/p>
&lt;h2 id="about">About&lt;/h2>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/List_of_Unix_commands">List of Unix commands - Wikipedia&lt;/a> &amp;hellip; IEEE規格らしい。&lt;/li>
&lt;/ul>
&lt;h2 id="日付時刻時間">日付・時刻・時間&lt;/h2>
&lt;h3 id="date">date&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 書式指定&lt;/span>
date +%Y%m%d &lt;span style="color:#8f5902;font-style:italic"># YYYYMMDD&lt;/span>
date +%FT%T &lt;span style="color:#8f5902;font-style:italic"># ISO8601風&lt;/span>
date +%s &lt;span style="color:#8f5902;font-style:italic"># unixtime&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 日時指定/相対&lt;/span>
date -d tomorrow &lt;span style="color:#8f5902;font-style:italic"># 明日&lt;/span>
date -d &lt;span style="color:#4e9a06">&amp;#39;1 hour&amp;#39;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 1時間後&lt;/span>
date -d &lt;span style="color:#4e9a06">&amp;#39;1 days ago&amp;#39;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 昨日&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 日時指定/絶対&lt;/span>
date -d @1530675922 &lt;span style="color:#8f5902;font-style:italic"># unixtime&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>Mac だと &lt;code>-d '〜'&lt;/code> オプションが使えない&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://shellscript.sunone.me/date.html" title="日付を取得する | UNIX &amp;amp; Linux コマンド・シェルスクリプト リファレンス">日付を取得する | UNIX &amp;amp; Linux コマンド・シェルスクリプト リファレンス&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hydrocul.github.io/wiki/commands/date.html">date コマンド | コマンドの使い方(Linux) | hydroculのメモ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ファイル操作">ファイル操作&lt;/h2>
&lt;h3 id="tee">tee&lt;/h3>
&lt;p>標準出力に書きつつファイルにも書く、ということをやりたいときに使う。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">./a.sh &lt;span style="color:#000;font-weight:bold">|&lt;/span> tee a.log
./a.sh &lt;span style="color:#000;font-weight:bold">|&lt;/span> tee -a a.log &lt;span style="color:#8f5902;font-style:italic"># 追記&lt;/span>
./a.sh 2&amp;gt;&lt;span style="color:#000;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> tee a.log &lt;span style="color:#8f5902;font-style:italic"># 標準エラーもファイルに書く&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/wnoguchi/items/2fc3ec11043d139dc6bb" title="teeコマンドの使い方 - Qiita">teeコマンドの使い方 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="touch">touch&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">touch -t &lt;span style="color:#0000cf;font-weight:bold">201807040100&lt;/span> path/to/file &lt;span style="color:#8f5902;font-style:italic"># mtimeを2018/7/4 01:00に変更&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1606/14/news013.html">【 touch 】コマンド――タイムスタンプを変更する／新規ファイルを作成する：Linux基本コマンドTips（23） - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="アーカイブ">アーカイブ&lt;/h2>
&lt;h3 id="zipunzip">zip/unzip&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## dir/ を再帰的に圧縮&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 展開すると dir/ も出来る&lt;/span>
zip -r foo.zip dir/
&lt;span style="color:#8f5902;font-style:italic">## 中身を bar/ に展開&lt;/span>
unzip foo.zip -d bar/
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231001/?rt=nocnt" title="Linuxコマンド集 - 【 zip 】 ファイルを圧縮する（拡張子.zip）：ITpro">Linuxコマンド集 - 【 zip 】 ファイルを圧縮する（拡張子.zip）：ITpro&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1607/26/news014.html" title="Linux基本コマンドTips（35）：unzipコマンド――ZIPファイルからファイルを取り出す - ＠IT">Linux基本コマンドTips（35）：unzipコマンド――ZIPファイルからファイルを取り出す - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="テキスト処理">テキスト処理&lt;/h2>
&lt;h3 id="grep">grep&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## ファイル名だけ表示&lt;/span>
grep -l PATTERN &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>PATH&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="head">head&lt;/h3>
&lt;p>&lt;a href="https://linuxjm.osdn.jp/html/GNU_textutils/man1/head.1.html">https://linuxjm.osdn.jp/html/GNU_textutils/man1/head.1.html&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 先頭1行を表示&lt;/span>
head -1 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>file...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 先頭20行を表示&lt;/span>
head -n &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>file...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 先頭256Bを表示&lt;/span>
head -c &lt;span style="color:#0000cf;font-weight:bold">256&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>file...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## 先頭256KBを表示&lt;/span>
head --bytes 256k &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>file...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="sort">sort&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic">## 第2フィールドで数値の降順ソート&lt;/span>
cat file &lt;span style="color:#000;font-weight:bold">|&lt;/span> sort -nr -k2
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://linuxjm.osdn.jp/html/gnumaniak/man1/sort.1.html">https://linuxjm.osdn.jp/html/gnumaniak/man1/sort.1.html&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hydrocul.github.io/wiki/commands/sort.html" title="sort コマンド | コマンドの使い方(Linux) | hydroculのメモ">sort コマンド | コマンドの使い方(Linux) | hydroculのメモ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ファイルシステム">ファイルシステム&lt;/h2>
&lt;h3 id="exportfs">exportfs&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">exportfs -a &lt;span style="color:#8f5902;font-style:italic"># /etc/exports の全てのディレクトリをエクスポート&lt;/span>
exportfs -v &lt;span style="color:#8f5902;font-style:italic"># 現在エクスポート中のディレクトリ一覧&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.ibm.com/support/knowledgecenter/ja/ssw_aix_71/com.ibm.aix.cmds2/exportfs.htm">exportfs コマンド&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="mount">mount&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## uid, gid指定&lt;/span>
mount -o &lt;span style="color:#000">uid&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>1000,gid&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span> /dev/sdb1 /mnt
&lt;/code>&lt;/pre>&lt;/div>&lt;p>※NFSの場合、uid/gid指定は不可&lt;/p>
&lt;p>See also:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://sites.google.com/site/progrhymetechwiki/linux/fs">https://sites.google.com/site/progrhymetechwiki/linux/fs&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1802/15/news035.html">【 mount 】コマンド――ファイルシステムをマウントする：Linux基本コマンドTips（183） - ＠IT&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/fwin2k/productreview/sfu35-01/sfu35_01_03.html">製品レビュー：企業ユーザーのためのSFU 3.5活用ガイダンス　第1回　SFU 3.5の概要とNFS機能　2．NFSとユーザー名マッピング - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="umount">umount&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">umount &amp;lt;mount先&amp;gt;
umount &amp;lt;mount元&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ユーザ管理">ユーザ管理&lt;/h2>
&lt;h3 id="getent">getent&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">getent group &amp;lt;group&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># グループに属しているユーザをリスト&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/niiyz/items/53aa4195dcc69db2052b">Linuxコマンドでユーザーのグループ確認・変更。 - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="gpasswd">gpasswd&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">gpasswd -a &amp;lt;login&amp;gt; &amp;lt;group&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># ユーザをグループに所属させる&lt;/span>
gpasswd -d &amp;lt;login&amp;gt; &amp;lt;group&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># ユーザをグループから削除&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1612/12/news016.html" title="【 gpasswd 】コマンド――ユーザーが所属するグループを管理する：Linux基本コマンドTips（72） - ＠IT">【 gpasswd 】コマンド――ユーザーが所属するグループを管理する：Linux基本コマンドTips（72） - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="groupadd">groupadd&lt;/h3>
&lt;p>グループ作成。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">groupadd newgroup
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://webkaru.net/linux/groupadd-command/" title="Linuxコマンド【 groupadd 】新規グループの作成 - Linux入門 - Webkaru">Linuxコマンド【 groupadd 】新規グループの作成 - Linux入門 - Webkaru&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="passwd">passwd&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">passwd -l &amp;lt;login&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># アカウントをロック&lt;/span>
passwd -u &amp;lt;login&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># アンロック&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ロックされたアカウントはログインできず、利用不可になる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://kazmax.zpp.jp/linux/account_lock.html" title="Linux ユーザーアカウントをロック・アンロックする">Linux ユーザーアカウントをロック・アンロックする&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="useradd">useradd&lt;/h3>
&lt;p>ユーザ追加。オプション多数&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>オプション&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>-m&lt;/code>&lt;/td>
&lt;td>ホームディレクトリ作成&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-s &amp;lt;SHELL&amp;gt;&lt;/code>&lt;/td>
&lt;td>ログインシェルを指定&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-Bash" data-lang="Bash">&lt;span style="color:#8f5902;font-style:italic">## ホームディレクトリ作成&lt;/span>
useradd -m &amp;lt;login&amp;gt;
&lt;span style="color:#8f5902;font-style:italic">## ログインシェルを/bin/bashに&lt;/span>
useradd -s /bin/bash &amp;lt;login&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://eng-entrance.com/linux-command-useradd">useraddコマンドについて詳しくまとめました 【Linuxコマンド集】&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="usermod">usermod&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">usermod -g admin &amp;lt;login&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># 主グループを変更&lt;/span>
usermod -aG ops,app,... &amp;lt;login&amp;gt; &lt;span style="color:#8f5902;font-style:italic"># 副グループ追加&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://eng-entrance.com/linux-command-usermod" title="usermodコマンドについて詳しくまとめました 【Linuxコマンド集】">usermodコマンドについて詳しくまとめました 【Linuxコマンド集】&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="リソース管理">リソース管理&lt;/h2>
&lt;h3 id="ps">ps&lt;/h3>
&lt;p>&lt;a href="https://linuxjm.osdn.jp/html/procps/man1/ps.1.html">Man page of PS&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">ps aux
ps aufxwww
ps auxwww -L
ps -ef
ps -efL
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Options:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>option&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>f&lt;/code>&lt;/td>
&lt;td>forest, プロセスをツリー状に表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-L&lt;/code>&lt;/td>
&lt;td>スレッド表示。 &lt;code>f&lt;/code> と同時に指定はできない&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="top1">top(1)&lt;/h3>
&lt;p>&lt;a href="https://linux.die.net/man/1/top">top(1): tasks - Linux man page&lt;/a>&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic"># インタラクティブモード&lt;/span>
top
&lt;span style="color:#8f5902;font-style:italic">## 描画間隔を5秒に変更&lt;/span>
top -d &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># バッチモードで1回だけ実行&lt;/span>
top -b -n &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## CPUコアごとの負荷も表示&lt;/span>
top -b -n &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> -1
&lt;/code>&lt;/pre>&lt;/div>&lt;p>インタラクティブモードの主な操作:&lt;/p>
&lt;ul>
&lt;li>&lt;code>M&lt;/code> &amp;hellip; メモリ使用率順にソート&lt;/li>
&lt;li>&lt;code>P&lt;/code> &amp;hellip; CPU使用率順にソート&lt;/li>
&lt;li>&lt;code>1&lt;/code> &amp;hellip; CPUコアごとの負荷を表示&lt;/li>
&lt;li>&lt;code>c&lt;/code> &amp;hellip; プロセス名詳細を表示（トグル）&lt;/li>
&lt;li>&lt;code>q&lt;/code> &amp;hellip; 終了&lt;/li>
&lt;li>&lt;code>F&lt;/code> or &lt;code>O&lt;/code> &amp;hellip; ソートするフィールドを選ぶ&lt;/li>
&lt;li>&lt;code>R&lt;/code> &amp;hellip; ソートの昇順/降順を切り替え&lt;/li>
&lt;/ul>
&lt;p>Mac版の違い:&lt;/p>
&lt;ul>
&lt;li>&lt;code>-b&lt;/code> オプションやバッチモードがなさそう&lt;/li>
&lt;li>CPUコアごとに負荷を見る方法がわからん&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://bashalog.c-brains.jp/11/05/24-220315.php">[Linux] top コマンドをインタラクティブに操作する | バシャログ。&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ユーティリティー">ユーティリティー&lt;/h2>
&lt;h3 id="watch">watch&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">watch -n &amp;lt;N&amp;gt; &lt;span style="color:#204a87">command&lt;/span> args...
&lt;/code>&lt;/pre>&lt;/div>&lt;p>N秒ごとにコマンドを実行して出力を表示。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hydrocul.github.io/wiki/commands/watch.html" title="watch コマンド | コマンドの使い方(Linux) | hydroculのメモ">watch コマンド | コマンドの使い方(Linux) | hydroculのメモ&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Google Sheets</title><link>https://progrhy.me/tech-notes/a/google/sheet/</link><pubDate>Sat, 09 May 2020 09:38:09 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/google/sheet/</guid><description>
&lt;h2 id="関数">関数&lt;/h2>
&lt;p>&lt;a href="https://support.google.com/docs/table/25273?hl=ja">Google スプレッドシートの関数リスト - ドキュメント エディタ ヘルプ&lt;/a>&lt;/p>
&lt;h3 id="sumifs">SUMIFS&lt;/h3>
&lt;p>&lt;a href="https://support.google.com/docs/answer/3238496?hl=ja">https://support.google.com/docs/answer/3238496?hl=ja&lt;/a>&lt;/p>
&lt;p>SUMIFの条件部を複数指定できるバージョン。&lt;/p>
&lt;p>Format: &lt;code>SUMIFS(合計範囲, 条件範囲1, 条件1, [条件範囲2, 条件2, ...])&lt;/code>&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="日時の差を計算">日時の差を計算&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://support.google.com/docs/answer/6055612?hl=ja">DATEDIF&lt;/a> &amp;hellip; 日付、月数、年数に対応&lt;/li>
&lt;/ul>
&lt;pre>&lt;code>=(B2-A2) * 86400 // 秒数
&lt;/code>&lt;/pre>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://support.office.com/ja-jp/article/2-%e3%81%a4%e3%81%ae%e6%99%82%e5%88%bb%e3%81%ae%e5%b7%ae%e3%82%92%e8%a8%88%e7%ae%97%e3%81%99%e3%82%8b-e1c78778-749b-49a3-b13e-737715505ff6">2 つの時刻の差を計算する - Excel&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="数値によって分類する">数値によって分類する&lt;/h3>
&lt;p>LOOKUP系の関数（ &lt;code>[VH]LOOKUP&lt;/code> ）の最後の引数に &lt;code>true&lt;/code> を与えると、「検索値以下で最も近い値」を取り出すことができる。&lt;br>
これによって、「点数によってランクを付ける」といったことが可能。&lt;/p>
&lt;p>例:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>\&lt;/th>
&lt;th>A&lt;/th>
&lt;th>B&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>1&lt;/strong>&lt;/td>
&lt;td>下限値&lt;/td>
&lt;td>等級&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>2&lt;/strong>&lt;/td>
&lt;td>0&lt;/td>
&lt;td>D&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>3&lt;/strong>&lt;/td>
&lt;td>26&lt;/td>
&lt;td>C&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>4&lt;/strong>&lt;/td>
&lt;td>51&lt;/td>
&lt;td>B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>5&lt;/strong>&lt;/td>
&lt;td>76&lt;/td>
&lt;td>A&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>上のような表があり、 &lt;code>=VLOOKUP(検索値, $A$2:$B$5, 2, TRUE)&lt;/code> とやると、次のようになる:&lt;/p>
&lt;ul>
&lt;li>検索値が &lt;code>(-∞, 0)&lt;/code> =&amp;gt; &lt;code>#N/A&lt;/code>&lt;/li>
&lt;li>検索値が &lt;code>[0, 26)&lt;/code> =&amp;gt; D&lt;/li>
&lt;li>検索値が &lt;code>[26, 51)&lt;/code> =&amp;gt; C&lt;/li>
&lt;li>検索値が &lt;code>[51, 76)&lt;/code> =&amp;gt; B&lt;/li>
&lt;li>検索値が &lt;code>[76, ∞)&lt;/code> =&amp;gt; A&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://dekiru.net/article/12612/">ExcelのVLOOKUP関数で「○以上△未満」の条件で表を検索する方法 | できるネット&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Zsh</title><link>https://progrhy.me/tech-notes/a/cli/shell/zsh/</link><pubDate>Tue, 28 Apr 2020 00:14:04 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/cli/shell/zsh/</guid><description>
&lt;p>&lt;a href="http://www.zsh.org/">http://www.zsh.org/&lt;/a>&lt;/p>
&lt;h2 id="source-code">Source Code&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://sourceforge.net/p/zsh/code/ci/master/tree/">https://sourceforge.net/p/zsh/code/ci/master/tree/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/zsh-users/zsh">https://github.com/zsh-users/zsh&lt;/a> &amp;hellip; Mirror&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">&lt;span style="color:#8f5902;font-style:italic"># history -i でコマンドの実行時間表示&lt;/span>
setopt extended_history
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://orumin.blogspot.com/2017/10/unix-os.html">Unix 系 OS でコマンド実行間にタイムスタンプを付ける&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: Visual Studio Code</title><link>https://progrhy.me/tech-notes/a/program/vscode/</link><pubDate>Mon, 27 Apr 2020 22:33:58 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/program/vscode/</guid><description>
&lt;p>Micfosoftが提供するOSSのクロスプラットフォームなコードエディタ。&lt;br>
Electronをベースにしており、IDE並の機能を持つ。&lt;/p>
&lt;p>3rd Partyの拡張機能も多数あり、機能を拡充することができる。&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://code.visualstudio.com/docs">https://code.visualstudio.com/docs&lt;/a>
&lt;ul>
&lt;li>Get Started:
&lt;ul>
&lt;li>&lt;a href="https://code.visualstudio.com/docs/getstarted/keybindings">Visual Studio Code Key Bindings&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>User Guide:
&lt;ul>
&lt;li>&lt;a href="https://code.visualstudio.com/docs/editor/extension-gallery">Managing Extensions in Visual Studio Code&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="features">Features&lt;/h2>
&lt;h3 id="スニペット機能">スニペット機能&lt;/h3>
&lt;ul>
&lt;li>ユーザ定義のスニペットを作成可能
&lt;ul>
&lt;li>&lt;code>File &amp;gt; Preferences &amp;gt; User Snippets&lt;/code>&lt;/li>
&lt;li>コメント付きJSON形式で書く&lt;/li>
&lt;li>グローバルなスニペット&lt;/li>
&lt;li>ワークスペースごとのスニペット&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>スニペットが有効になると、補完で選択可能になる&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://vscode-doc-jp.github.io/docs/userguide/userdefinedsnippets.html">独自のスニペットを作成 | 非公式 - Visual Studio Code Docs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.lisz-works.com/entry/vscode-snippets">VS Codeをスニペット作成は簡単で便利だった！ - lisz-works&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="preferences">Preferences&lt;/h2>
&lt;p>昔はJSON設定ファイルを直接編集するようなスタイルだったが、2018年9月現在、GUIで設定できる項目も増えてきたようだ。&lt;/p>
&lt;p>2種類の設定がある。&lt;/p>
&lt;ul>
&lt;li>ユーザ設定 &amp;hellip; ワークスペースによらない、ユーザ環境で常に有効になる設定。&lt;/li>
&lt;li>ワークスペース設定 &amp;hellip; ワークスペースの &lt;code>.vscode/settings.json&lt;/code> に保存される。&lt;/li>
&lt;/ul>
&lt;p>Quick Reference:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>config&lt;/th>
&lt;th>値（*）&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>editor.insertSpaces&lt;/code>&lt;/td>
&lt;td>true, false&lt;/td>
&lt;td>ソフトタブ（タブキーで半角スペースを挿入）のon/off&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>editor.renderWhitespace&lt;/code>&lt;/td>
&lt;td>none, all, boundary&lt;/td>
&lt;td>スペースやタブを描画するかどうか。 &lt;code>boundary&lt;/code> では単語境界は描画しない&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>（*）デフォルト値は太字&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/spica/items/cfae8492804b8d3f8726">VSCodeのエディター設定の話 - タブ文字がなぜか半角スペースになってしまう - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="言語ごとの設定を行う">言語ごとの設定を行う&lt;/h3>
&lt;p>インデントなどの設定を言語ごとに変えることができる。&lt;/p>
&lt;p>settings.jsonで &lt;code>&amp;quot;[ruby]&amp;quot;: {}&lt;/code> などのエントリを作って、その中に設定を記述すればいい。&lt;br>
コマンドパレットで &lt;code>Preferences: Configure language specific settings&lt;/code> と入力し、設定したい言語を選ぶやり方もある。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ja.stackoverflow.com/questions/34014/visual-studio-code%E3%81%A7%E8%A8%80%E8%AA%9E%E3%81%94%E3%81%A8%E3%81%AB%E3%82%A4%E3%83%B3%E3%83%87%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E3%81%97%E3%81%9F%E3%81%84">vscode - Visual Studio Codeで言語ごとにインデントの設定をしたい - スタック・オーバーフロー&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="自動フォーマット">自動フォーマット&lt;/h3>
&lt;p>&lt;a href="https://code.visualstudio.com/docs/editor/codebasics#_formatting">https://code.visualstudio.com/docs/editor/codebasics#_formatting&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>config&lt;/th>
&lt;th>値（*）&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>editor.formatOnSave&lt;/code>&lt;/td>
&lt;td>true, &lt;strong>false&lt;/strong>&lt;/td>
&lt;td>保存時にコードフォーマッタをかける&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>（*）デフォルト値は太字&lt;/p>
&lt;h3 id="インデント設定">インデント設定&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>config&lt;/th>
&lt;th>値（*）&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>editor.detectIndentation&lt;/code>&lt;/td>
&lt;td>&lt;strong>true&lt;/strong>, false&lt;/td>
&lt;td>ファイルタイプごとのインデント設定を有効にする&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>editor.insertSpaces&lt;/code>&lt;/td>
&lt;td>true, false&lt;/td>
&lt;td>ソフトタブ（タブキーで半角スペースを挿入）のon/off&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>editor.tabSize&lt;/code>&lt;/td>
&lt;td>&lt;strong>4&lt;/strong>&lt;/td>
&lt;td>インデント幅&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>（*）デフォルト値は太字&lt;/p>
&lt;p>なぜか設定が反映されないときや、一時的に設定を変更したいときは、画面右下のインデント設定をクリックすることでアドホックに変更が可能。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.atmarkit.co.jp/ait/articles/1805/25/news039.html">VS Codeでインデントを設定するには：Visual Studio Code TIPS - ＠IT&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://oua-iea-programmer.blogspot.com/2017/04/visual-studio-code.html">【Visual Studio Code】インデント幅の変更方法と、変えても反映されない時の対処法&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ja.stackoverflow.com/questions/34014/visual-studio-code%e3%81%a7%e8%a8%80%e8%aa%9e%e3%81%94%e3%81%a8%e3%81%ab%e3%82%a4%e3%83%b3%e3%83%87%e3%83%b3%e3%83%88%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%82%92%e3%81%97%e3%81%9f%e3%81%84">vscode - Visual Studio Codeで言語ごとにインデントの設定をしたい - スタック・オーバーフロー&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="フォント設定">フォント設定&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>config&lt;/th>
&lt;th>値（*）&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>editor.fontSize&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>エディタのフォントサイズ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>（*）デフォルト値は太字&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/tkyaji/items/45d5f88047e99c29dda2">Visual Studio Codeでフォントサイズをいい感じにする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ファイルを常に新しいタブで開く">ファイルを常に新しいタブで開く&lt;/h3>
&lt;p>&lt;code>workbench.editor.enablePreview: false&lt;/code> に設定し、プレビューを無効化する。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://code.i-harness.com/">[Visual-Studio-Code] ファイルを常に新しいタブで開くようにvscodeを設定するには？ | CODE Q&amp;amp;A 問題解決 [日本語]&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="テキストの折り返し">テキストの折り返し&lt;/h3>
&lt;p>デフォルトは &lt;code>editor.wordWrap&lt;/code> が折り返さない設定(= &lt;code>off&lt;/code>)になっている。&lt;br>
その他、次のオプションが有る:&lt;/p>
&lt;ul>
&lt;li>&lt;code>on&lt;/code> &amp;hellip; エディタの右端で折り返す&lt;/li>
&lt;li>&lt;code>wordWrapColumn&lt;/code> &amp;hellip; &lt;code>editor.wordWrapColumn&lt;/code> で設定した値で折り返す&lt;/li>
&lt;li>&lt;code>bounded&lt;/code> &amp;hellip; &lt;code>editor.wordWrapColumn&lt;/code> 設定値とエディタの幅の小さい方で折り返す&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1807/27/news035.html">VS Codeでテキストの折り返しを設定するには：Visual Studio Code TIPS - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ショートカットキー">ショートカットキー&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Win/Linux&lt;/th>
&lt;th>Mac&lt;/th>
&lt;th>機能&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Ctrl+,&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+,&lt;/code>&lt;/td>
&lt;td>設定画面を開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+p&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+p&lt;/code>&lt;/td>
&lt;td>ファイルを検索して開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+Shift+p&lt;/code>, &lt;code>F1&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+Shift+p&lt;/code>, &lt;code>F1&lt;/code>&lt;/td>
&lt;td>コマンドパレットを開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+Shift+x&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+Shift+x&lt;/code>&lt;/td>
&lt;td>拡張機能を開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+Shift+@&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+Shift+@&lt;/code>&lt;/td>
&lt;td>ターミナルを開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+k v&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+k v&lt;/code>&lt;/td>
&lt;td>Markdownファイルのプレビュー画面をサイドバイサイドで表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+Shift+v&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+Shift+v&lt;/code>&lt;/td>
&lt;td>Markdownファイルのプレビュー画面を別タブで表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+k Ctrl+s&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+k ⌘+s&lt;/code>&lt;/td>
&lt;td>キーバインド一覧を開く&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+k Ctrl+t&lt;/code>&lt;/td>
&lt;td>&lt;code>⌘+k ⌘+t&lt;/code>&lt;/td>
&lt;td>カラーテーマ(配色)設定&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>リファレンス:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-linux.pdf">keyboard-shortcuts-linux.pdf&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-macos.pdf">keyboard-shortcuts-macos.pdf&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf">keyboard-shortcuts-windows.pdf&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/oruponu/items/ae9c720d4522c1606daf">Visual Studio Code キーボード ショートカット - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.atmarkit.co.jp/ait/articles/1804/20/news030.html">VS CodeでMarkdownをプレビューするには？：Visual Studio Code TIPS - ＠IT&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="キーバインドの変更">キーバインドの変更&lt;/h3>
&lt;p>↑のキーバインド一覧から変更可能&lt;/p>
&lt;h2 id="extensions">Extensions&lt;/h2>
&lt;h3 id="改行コードの表示">改行コードの表示&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://marketplace.visualstudio.com/items?itemName=sohamkamani.code-eol">code-eol&lt;/a>
&lt;ul>
&lt;li>設定値: &lt;code>code-eol.color&lt;/code> &amp;hellip; 改行を表す記号の文字色を16進数のカラーコードで指定。
&lt;ul>
&lt;li>例: &lt;code>&amp;quot;#841a75&amp;quot;&lt;/code> (ラズベリー色)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://marketplace.visualstudio.com/items?itemName=steditor.line-endings">line-endings&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>2018年9月、code-eolを入れて使っている。&lt;/p>
&lt;h3 id="textlint">textlint&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://marketplace.visualstudio.com/items?itemName=taichi.vscode-textlint">vscode-textlint&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>日本語の書き方など指摘・修正してくれるLintツール。&lt;/p>
&lt;p>使い方:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/azu/items/2c565a38df5ed4c9f4e1#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">VS Codeでtextlintを使って文章をチェックする - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="vs-codeの更新">VS Codeの更新&lt;/h3>
&lt;p>Ubuntu:&lt;/p>
&lt;ol>
&lt;li>debパッケージをダウンロード&lt;/li>
&lt;li>&lt;code>sudo dpkg -i code_xxx.deb&lt;/code>&lt;/li>
&lt;/ol></description></item><item><title>A: エディタ</title><link>https://progrhy.me/tech-notes/a/software/terraform/editor/</link><pubDate>Sun, 10 May 2020 08:41:30 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terraform/editor/</guid><description>
&lt;p>各種エディタやIDEでTerraformを書くための設定など。&lt;/p>
&lt;h2 id="intellij-idea">IntelliJ IDEA&lt;/h2>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/program/idea/">IntelliJ IDEA&lt;/a>&lt;/p>
&lt;h3 id="plugins">Plugins&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://plugins.jetbrains.com/plugin/7808-hashicorp-terraform--hcl-language-support">HashiCorp Terraform / HCL language support - IntelliJ IDEs | JetBrains&lt;/a>&lt;/li>
&lt;li>File Watcher &amp;hellip; ファイル保存時に &lt;code>terraform fmt&lt;/code> を実行するため&lt;/li>
&lt;/ul>
&lt;h3 id="設定">設定&lt;/h3>
&lt;ul>
&lt;li>File Watcherによる &lt;code>terraform fmt&lt;/code> を設定する&lt;/li>
&lt;/ul>
&lt;h2 id="visual-studio-code">Visual Studio Code&lt;/h2>
&lt;p>See also &lt;a href="https://progrhy.me/tech-notes/a/program/vscode/">Visual Studio Code&lt;/a>&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/pypypyo14/items/5520f3defa55119f3a1a">VSCodeでTerraformを書くときの設定(2019/11/07追記: HCL2対応) - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="extensions">Extensions&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://marketplace.visualstudio.com/items?itemName=mauve.terraform">Terraform - Visual Studio Marketplace&lt;/a>
&lt;ul>
&lt;li>2020年5月、公式になった&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.hashicorp.com/blog/supporting-the-hashicorp-terraform-extension-for-visual-studio-code/">Supporting the HashiCorp Terraform Extension for Visual Studio Code&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="設定-1">設定&lt;/h3>
&lt;ul>
&lt;li>自動フォーマット（ &lt;code>editor.formatOnSave&lt;/code> ）をONにしておく -&amp;gt; &lt;code>terraform fmt&lt;/code> が掛かるようになる&lt;/li>
&lt;/ul></description></item><item><title>A: シェルスクリプト</title><link>https://progrhy.me/tech-notes/a/cli/shell/script/</link><pubDate>Mon, 04 May 2020 14:49:53 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/cli/shell/script/</guid><description>
&lt;p>関連ページ:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/cli/shell/bash/cookbook/">Bash &amp;gt; Cookbooks&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="about">About&lt;/h2>
&lt;p>シェル上で動作する簡易なプログラミング言語、あるいはそれによって書かれたプログラム。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://e-words.jp/w/%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88.html">シェルスクリプトとは - IT用語辞典 e-Words&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;h3 id="リファレンス">リファレンス&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.unix.com/man-page/posix/1p/sh/">POSIX 1003.1 - man page for sh (posix section 1p) - Unix &amp;amp; Linux Commands&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.unix.org/whitepapers/shdiffs.html">Shell Command Language (www.unix.org))&lt;/a>
&lt;ul>
&lt;li>System V や POSIX の古典的な仕様がまとまってるっぽい雰囲気&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html">Shell Command Language (pubs.opengroup.org)&lt;/a> &amp;hellip; 上と同じ内容のようだ&lt;/li>
&lt;/ul>
&lt;h3 id="コーディング規約">コーディング規約&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://google.github.io/styleguide/shell.xml" title="Shell Style Guide">Shell Style Guide&lt;/a> &amp;hellip; Google の
&lt;ul>
&lt;li>参考: &lt;a href="http://qiita.com/laqiiz/items/5f72ca668f1c58176644" title="Googleの肩に乗ってShellコーディングしちゃおう - Qiita">Googleの肩に乗ってShellコーディングしちゃおう - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="入門サイトなど">入門サイトなど&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://shellscript.sunone.me/">UNIX &amp;amp; Linux コマンド・シェルスクリプト リファレンス&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://motw.mods.jp/shellscript/tutorial.html">シェルスクリプト入門 書き方のまとめ | Memo on the Web&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/katsukii/items/383b241209fe96eae6e7">シェルスクリプトの基礎知識まとめ - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="spec">Spec&lt;/h2>
&lt;h3 id="演算子">演算子&lt;/h3>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/egawa_kun/items/196cd354c0d8e4e0fefc">シェルスクリプト（bash）のif文やwhile文で使う演算子について - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ループ">ループ&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">## 無限ループ&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">while&lt;/span> true&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> true&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">then&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">continue&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 後続の処理をスキップして次の周回へ&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">else&lt;/span>
:
&lt;span style="color:#204a87;font-weight:bold">fi&lt;/span>
:
&lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">## イテレータでループ&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">for&lt;/span> i in &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>get_some_list&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span>
:
&lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://xtech.nikkei.com/it/article/COLUMN/20060228/231135/">【 次の繰り返しに移る「continue」 】 | 日経クロステック（xTECH）&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="parameter-expansion">Parameter Expansion&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02">https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#000">parameter&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">parameter&lt;/span>&lt;span style="color:#204a87;font-weight:bold">:-&lt;/span>&lt;span style="color:#000">word&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> -z &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">var&lt;/span>&lt;span style="color:#000;font-weight:bold">+x&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">then&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;var is unset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">else&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;var is set to &amp;#39;&lt;/span>&lt;span style="color:#000">$var&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://stackoverflow.com/questions/3601515/how-to-check-if-a-variable-is-set-in-bash">shell - How to check if a variable is set in Bash? - Stack Overflow&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="built-ins">Built-Ins&lt;/h2>
&lt;h3 id="-colon">&lt;code>:&lt;/code> (colon)&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#colon">https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#colon&lt;/a>&lt;/li>
&lt;li>Bash: &lt;a href="https://tiswww.case.edu/php/chet/bash/bashref.html#Bourne-Shell-Builtins">https://tiswww.case.edu/php/chet/bash/bashref.html#Bourne-Shell-Builtins&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>何もしないコマンド&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="ユーザー入力を受け付ける">ユーザー入力を受け付ける&lt;/h3>
&lt;p>&lt;code>read&lt;/code> を使う。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#204a87">echo&lt;/span> -n &lt;span style="color:#4e9a06">&amp;#34;Are you sure? (y/N) &amp;#34;&lt;/span>
&lt;span style="color:#204a87">read&lt;/span> answer
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000">$answer&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span> !&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;y&amp;#34;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">]]&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">then&lt;/span>
&lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Canceled.&amp;#34;&lt;/span>
&lt;span style="color:#204a87">exit&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://eng-entrance.com/linux-shellscript-keyboard">【Linux】シェルスクリプトでキーボード入力を受付ける方法&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="コマンドの出力結果にタイムスタンプをつける">コマンドの出力結果にタイムスタンプをつける&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">do_something &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87;font-weight:bold">while&lt;/span> &lt;span style="color:#000">IFS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87">read&lt;/span> -r line&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>date&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06"> &lt;/span>&lt;span style="color:#000">$line&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://serverfault.com/questions/310098/how-to-add-a-timestamp-to-bash-script-log" title="linux - How to add a timestamp to bash script log? - Server Fault">linux - How to add a timestamp to bash script log? - Server Fault&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="topics">Topics&lt;/h2>
&lt;h3 id="オプション解析">オプション解析&lt;/h3>
&lt;p>シェルスクリプトでコマンドラインオプションをどう解析するか。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://qiita.com/b4b4r07/items/dcd6be0bb9c9185475bb">bash によるオプション解析 - Qiita&lt;/a>
&lt;ul>
&lt;li>getopts, getopt, 自前解析のメリット・デメリット。自前解析推し&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://gist.github.com/cosimo/3760587">Example of how to parse options with bash/getopt&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: terraformer</title><link>https://progrhy.me/tech-notes/a/software/terraform/terraformer/</link><pubDate>Fri, 08 May 2020 10:26:09 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terraform/terraformer/</guid><description>
&lt;p>既存のクラウドインフラなどからTerraformの設定ファイルを生成してくれるもの。&lt;/p>
&lt;p>GCPが出してるけど、AWS, Azureなど他のクラウドのほかKubernetes, Datadog, GitHubなどTerraformの多くのプロバイダに対応している。&lt;/p>
&lt;h2 id="install">Install&lt;/h2>
&lt;p>Homebrew:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">brew install terraformer
&lt;/code>&lt;/pre>&lt;/div>&lt;p>※Terraformプロバイダをプラグインとして &lt;code>~/.terraform.d/plugins/{darwin,linux}_amd64/&lt;/code> に配置する必要がある。&lt;/p>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">terraformer import google --projects&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prj1,prj2 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --regions&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>asia-northeast1,asia-northeast2 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --resources&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>networks,subnetworks,gcs
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>./generated/&lt;/code> 以下にリソースの定義ファイルとtfstateファイルが生成される。&lt;/p></description></item><item><title>A: 2020-05-10</title><link>https://progrhy.me/tech-notes/a/memo/20200510/</link><pubDate>Sun, 10 May 2020 15:19:43 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/memo/20200510/</guid><description>
&lt;h2 id="510">5/10&lt;/h2>
&lt;h3 id="terraformのkubernetes-providerを試してみる">TerraformのKubernetes Providerを試してみる&lt;/h3>
&lt;p>※ブログに移した: &lt;a href="https://tech-progrhyme.hatenablog.com/entry/2020/05/10/121145">TerraformのKubernetes ProviderでK8sのリソース管理にトライ - progrhyme&amp;rsquo;s tech blog&lt;/a>&lt;/p>
&lt;h3 id="ubuntuでもanyenvを使うことにした">Ubuntuでもanyenvを使うことにした&lt;/h3>
&lt;p>Ubuntuで最近Ruby触ってなかったので、入っているRubyが古いことに気づいたのだけど、rbenvも &lt;code>git clone&lt;/code> して入れたものなので、古い。&lt;br>
plenv, pyenvも同様である。&lt;/p>
&lt;p>&lt;a href="../2020/20200428/">4/28&lt;/a>にmacOSでanyenvを試したのだけど、Ubuntuでも使ってみることにした。&lt;/p>
&lt;p>&lt;a href="https://github.com/anyenv/anyenv">https://github.com/anyenv/anyenv&lt;/a>&lt;/p>
&lt;p>自分環境のセットアップスクリプトに &lt;code>setup-rbenv.sh&lt;/code> とか入れてるけど、anyenvで管理した方が筋がよさそう。&lt;/p>
&lt;h4 id="anyenv-install">anyenv install&lt;/h4>
&lt;p>Linuxbrewを入れてるので、brewでインストールできた。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">% brew install &lt;span style="color:#000">anyenv&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">==&lt;/span>&amp;gt; Downloading https://linuxbrew.bintray.com/bottles/anyenv-1.1.1.x86_64_linux.bottle.tar.gz
&lt;span style="color:#8f5902;font-style:italic">######################################################################## 100.0%&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">==&lt;/span>&amp;gt; Pouring anyenv-1.1.1.x86_64_linux.bottle.tar.gz
🍺 /home/linuxbrew/.linuxbrew/Cellar/anyenv/1.1.1: &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> files, 48.4KB
% anyenv init
&lt;span style="color:#8f5902;font-style:italic"># Load anyenv automatically by adding&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># the following to ~/.zshrc:&lt;/span>
&lt;span style="color:#204a87">eval&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>anyenv init -&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
% &lt;span style="color:#204a87">eval&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>anyenv init -&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
ANYENV_DEFINITION_ROOT&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>/home/quiche/.config/anyenv/anyenv-install&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> doesn&lt;span style="color:#4e9a06">&amp;#39;t exist. You can initialize it by:
&lt;/span>&lt;span style="color:#4e9a06">&amp;gt; anyenv install --init
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">% anyenv install --init
&lt;/span>&lt;span style="color:#4e9a06">Manifest directory doesn&amp;#39;&lt;/span>t exist: /home/quiche/.config/anyenv/anyenv-install
Do you want to checkout ? &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>y/N&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: y
Cloning https://github.com/anyenv/anyenv-install.git master to /home/quiche/.config/anyenv/anyenv-install...
Cloning into &lt;span style="color:#4e9a06">&amp;#39;/home/quiche/.config/anyenv/anyenv-install&amp;#39;&lt;/span>...
remote: Enumerating objects: 48, &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>.
remote: Total &lt;span style="color:#0000cf;font-weight:bold">48&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>delta 0&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>, reused &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>delta 0&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>, pack-reused &lt;span style="color:#0000cf;font-weight:bold">48&lt;/span>
Unpacking objects: 100% &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>48/48&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>, &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>.
Completed!
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ここまでやって &lt;code>exec $SHELL -l&lt;/code> してもまだPATHには変化なし。&lt;br>
どうも何かしら &lt;code>*env&lt;/code> をインストールしないといけないらしい。&lt;/p>
&lt;p>&lt;code>anyenv install rbenv&lt;/code> してからシェルに再ログインすると、PATHに &lt;code>$HOME/.anyenv/envs/rbenv/shims&lt;/code>, &lt;code>$HOME/.anyenv/envs/rbenv/bin&lt;/code> が追加された。&lt;/p>
&lt;h4 id="rubyのインストールでややハマった">rubyのインストールでややハマった&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">% rbenv install 2.7.1 -v
:
ruby: error &lt;span style="color:#204a87;font-weight:bold">while&lt;/span> loading shared libraries: libruby.so.2.7: cannot open shared object file: No such file or directory
uncommon.mk:1130: recipe &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> target &lt;span style="color:#4e9a06">&amp;#39;revision.tmp&amp;#39;&lt;/span> failed
make: *** &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>revision.tmp&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Error &lt;span style="color:#0000cf;font-weight:bold">127&lt;/span>
BUILD FAILED &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Ubuntu 18.04 using ruby-build 20200401-11-g12af1c3&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>上のようなエラーで失敗した。&lt;br>
どうもこれはrdocの生成でコケているようだ。&lt;/p>
&lt;p>ただ、ビルドログを見たら下のようなエラーも出ていた。&lt;/p>
&lt;pre>&lt;code>% view /tmp/ruby-build.20200510143333.6198.log
:
1660 *** Following extensions are not compiled:$
1661 dbm:$
1662 &amp;gt;-Could not be configured. It will not be installed.$
1663 &amp;gt;-Check ext/dbm/mkmf.log for more details.$
1664 gdbm:$
1665 &amp;gt;-Could not be configured. It will not be installed.$
1666 &amp;gt;-Check ext/gdbm/mkmf.log for more details.$
1667 *** Fix the problems, then remove these directories and try again if you want.$
:
&lt;/code>&lt;/pre>&lt;p>よくわからないままビルドに必要そうなパッケージをインストールしてリトライした。&lt;/p>
&lt;pre>&lt;code>sudo apt install build-essential bison libffi-dev libgdbm-dev libgdbm-compat-dev \
libreadline-dev libssl-dev zlib1g-dev
&lt;/code>&lt;/pre>&lt;p>参考: &lt;a href="https://qiita.com/raccy/items/cd0b39a33dbe764480be">Rubyをソースからコンパイルするときの依存ライブラリ - Qiita&lt;/a>&lt;/p>
&lt;p>上で、いくつかのパッケージは既にインストールされていた。&lt;/p>
&lt;p>リトライした結果、結局、さっきと同じrubyのエラーで失敗した。&lt;br>
ビルドログから、dbm関連のエラーは消えていたので、そこは解消したらしい。&lt;/p>
&lt;p>闇雲に別のまっさらなシェルを立ち上げて再度インストールを試みたところ、成功した。&lt;/p>
&lt;p>まだ &lt;code>~/.rbenv&lt;/code> に古いrbenvが入っていて、 &lt;code>ruby&lt;/code> が &lt;code>~/.rbenv/shims/ruby&lt;/code> を向いていたので、その辺が悪さをしていたのかもしれない。&lt;/p>
&lt;p>これで駄目だったらrdocの生成をオフしようかと思っていた。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hackbaka.hatenablog.com/entry/2018/09/13/151242">Ruby インストール時の rdoc エラー[Ubuntu] - ハッキングバカ&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="clenvでtravis-ciのビルド通知とバッジを修正した">clenvでTravis CIのビルド通知とバッジを修正した&lt;/h3>
&lt;p>&lt;a href="https://github.com/progrhyme/clenv">https://github.com/progrhyme/clenv&lt;/a>&lt;/p>
&lt;p>昔、リポジトリを key-amb -&amp;gt; progrhyme に移したのだけど、そのせいでバッジとSlack通知がおかしくなっていた。&lt;/p>
&lt;p>Slackのインテグレーション自体は生きていたので、 &lt;code>travis&lt;/code> コマンドで設定をし直した。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">gem i travis
travis encrypt &lt;span style="color:#4e9a06">&amp;#34;&amp;lt;Slack Workspace&amp;gt;:&amp;lt;Slack Integration Token&amp;gt;&amp;#34;&lt;/span> --add notifications.slack.rooms
&lt;/code>&lt;/pre>&lt;/div>&lt;p>これで .travis.yml が更新されたので、GitHubにpushして完了。&lt;/p>
&lt;p>バッジも新しいURLで取得した。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.travis-ci.com/user/notifications/#configuring-slack-notifications">https://docs.travis-ci.com/user/notifications/#configuring-slack-notifications&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="次世代のシェルとは">次世代のシェルとは&lt;/h3>
&lt;p>&lt;a href="https://ngs-lang.org/">https://ngs-lang.org/&lt;/a>&lt;/p>
&lt;p>4年前にもブクマしてたやつ。&lt;/p>
&lt;p>これC言語製だったか。&lt;/p>
&lt;p>今さっきググったらGolang製のフォーマッタ/パーサ/インタープリタを見つけた。&lt;/p>
&lt;p>&lt;a href="https://github.com/mvdan/sh">https://github.com/mvdan/sh&lt;/a>&lt;/p>
&lt;p>なんか、そのうち全部JavaScriptになるんじゃないかな、って気もするんだよなぁ。&lt;/p>
&lt;p>macOSはJavaScriptでOSと対話できるようになったし、GNOME ShellもJavaScriptで拡張できるらしいし。&lt;/p>
&lt;p>まあ、よくできたプログラム言語がごろごろある現状、敢えて0から再実装する必要ないよねってことか。&lt;/p>
&lt;p>そんなわけでclenvを再開するモチベーションが湧かない今日この頃。&lt;/p>
&lt;p>Node.jsが筆頭だけど、JavaScriptで実装されたシェルも色々あるみたい。&lt;br>
※ただ、OSのシェルとはどれもちょっと違うかも。&lt;/p>
&lt;p>POSIXはもう気にしなくてもいいだろうと思うものの、どの環境でもスッと動いてほしいとは思う。&lt;br>
そういえばfishってどうだっけと思って、改めてチラ見して&lt;a href="https://progrhy.me/tech-notes/a/cli/shell/#fish-shell">シェル&lt;/a>にメモした。&lt;br>
これはC++製なんですね。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/zakuroishikuro/items/1b02378bf9e940602d87">知らないうちにMacがシステム標準でJavaScriptで操作できるようになってた (JXA) - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gihyo.jp/admin/serial/01/ubuntu-recipe/0492">第492回 GNOME Shellの拡張機能を作ってみよう：Ubuntu Weekly Recipe｜gihyo.jp … 技術評論社&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://developer.mozilla.org/ja/docs/JavaScript/Shells">JavaScript シェル - JavaScript リダイレクト 1 | MDN&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ubuntuでfishを少しだけ試してみた">Ubuntuでfishを少しだけ試してみた&lt;/h3>
&lt;p>Install:&lt;/p>
&lt;p>&lt;a href="https://launchpad.net/~fish-shell/+archive/ubuntu/release-3">https://launchpad.net/~fish-shell/+archive/ubuntu/release-3&lt;/a> の通り:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">sudo apt-add-repository ppa:fish-shell/release-3
sudo apt-get update
sudo apt-get install fish
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>fish&lt;/code> で起動する。&lt;/p>
&lt;p>体感そんな悪くない。&lt;br>
bashで書いたスクリプトはシバン書いてるから実行したら普通に動くし、特に戸惑うことはない感じ。&lt;/p>
&lt;p>少しカスタマイズしたら十分使いやすくなりそう。&lt;/p>
&lt;h4 id="fisherを試す">fisherを試す&lt;/h4>
&lt;p>テーマを使ってみたかったので、fisherを入れてテーマを入れてみる。&lt;/p>
&lt;p>&lt;a href="https://github.com/jorgebucaran/fisher">https://github.com/jorgebucaran/fisher&lt;/a>&lt;/p>
&lt;p>READMEに従ってインストール&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">curl https://git.io/fisher --create-dirs -sLo ~/.config/fish/functions/fisher.fish
&lt;/code>&lt;/pre>&lt;/div>&lt;p>色々ハマったんだけど、最終的に次の要領で、まあまあいい感じになった:&lt;/p>
&lt;h5 id="powerlineのインストール">powerlineのインストール&lt;/h5>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">sudo apt install powerline
&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gist.github.com/TrentSPalmer/63a85b582d42ab4bff665fc2dbba42e2">fish powerline on ubuntu the easy way&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>※↑に書かれている &lt;code>~/.config/fish/config.fish&lt;/code> の設定をすると、fishでpowerlineは使えるが、他のテーマを入れるとおかしくなる。（カニバってしまう？）&lt;/p>
&lt;p>powerlineを使うには対応したフォントが必要らしい。これに中々気づかなかった。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://news.mynavi.jp/itsearch/article/hardware/4775">【連載】にわか管理者のためのLinux運用入門 [210] Powerlineでカッコよく - シェル編（bash、zsh、fish）｜サーバ/ストレージ｜IT製品の事例・解説記事&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://github.com/microsoft/cascadia-code/releases">https://github.com/microsoft/cascadia-code/releases&lt;/a> から、最新版を &lt;code>~/.fonts&lt;/code> にインストールした。&lt;/p>
&lt;p>参考: &lt;a href="http://omoiyari.nishinari.coop/ubuntu-tips/%e3%83%95%e3%82%a9%e3%83%b3%e3%83%88%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab/">フォントのインストール | Ubuntu初心者の集いブログ&lt;/a>&lt;/p>
&lt;h5 id="テーマの追加">テーマの追加&lt;/h5>
&lt;p>この後、fishを起動し、 &lt;code>fisher add oh-my-fish/theme-bobthefish&lt;/code> で、まあまあいい感じになった。&lt;/p>
&lt;p>ただ、プロンプトの左端が &lt;code>I&lt;/code> となっていて、これはスクリーンショットによると本来は矢印記号が出るはずなんじゃないかと思う。&lt;/p>
&lt;p>theme-bobthefish のガイドに従って、 &lt;a href="https://github.com/ryanoasis/nerd-fonts/releases">https://github.com/ryanoasis/nerd-fonts/releases&lt;/a> も入れてみたけど、特に変わらない。&lt;/p>
&lt;h5 id="上手く行かなかったこと">上手く行かなかったこと&lt;/h5>
&lt;p>上まで辿りついたが、 &lt;code>theme-budspencer&lt;/code> だと上手く行かなかった。&lt;br>
プロンプトでENTERだけを押しても改行されない感じになってしまう。&lt;/p>
&lt;h5 id="参考">参考&lt;/h5>
&lt;ul>
&lt;li>&lt;a href="https://nodaki.hatenablog.com/entry/2018/09/24/213942">【Ubuntu】 shellをfish + fisherman に変えた話 - 0.5から始める機械学習&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/minako-ph/items/dba6d65b741e3a30ad16#fisherman%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B">【2019年版】macのターミナルにFishとFishermanを導入する - Qiita&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: 2020-05-09</title><link>https://progrhy.me/tech-notes/a/memo/20200509/</link><pubDate>Sat, 09 May 2020 15:48:56 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/memo/20200509/</guid><description>
&lt;h2 id="59">5/9&lt;/h2>
&lt;h3 id="シェルスクリプトのドキュメントコメントをpodで書くのはもうやめていいかな">シェルスクリプトのドキュメントコメントをPODで書くのはもうやめていいかな&lt;/h3>
&lt;p>いつだったか、何かの本でそういう書き方を見てからずっとそうやってる。&lt;/p>
&lt;p>例:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">#!/usr/bin/env bash
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>
:
&lt;span style="color:#204a87">exit&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
: &lt;span style="color:#4e9a06">&amp;lt;&amp;lt;&amp;#39;__EOF__&amp;#39;
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">=encoding utf8
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">=head1 NAME
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">B&amp;lt;my-script&amp;gt; - short description
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">=head1 DESCRIPTION
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">:
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">=cut
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">__EOF__&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>これでPODに食わせるとドキュメントとして解釈してくれるので、スクリプト内では &lt;code>pod2text $0&lt;/code> とかでヘルプを表示できる。&lt;/p>
&lt;p>…が、そろそろ &lt;code>pod2text&lt;/code> がどの環境にも入っていると想定すべきでないかも…という気がしてきた。&lt;br>
ところが、じゃあどう書いたらいいの？っていうのには決定版がない気がする。&lt;/p>
&lt;p>シェルスクリプトにちゃんとコメントを書こうとしている人たちの間では、主に2つの派閥がある気がする:&lt;/p>
&lt;ol>
&lt;li>スクリプトのヘッダや関数のヘッダとしてドキュメントコメントをそれなりのフォーマットで書きましょう派。&lt;a href="https://google.github.io/styleguide/shellguide.html#s4.1-file-header">Googleのコーディング規約&lt;/a>もこれ&lt;/li>
&lt;li>&lt;code>usage()&lt;/code> 関数内にヒアドキュメントで書きましょう派&lt;/li>
&lt;/ol>
&lt;p>いいとこ取りをしてる感じに見えるのは、 &lt;code>usage()&lt;/code> 関数でコメントをパースしてヘルプっぽく出力してるもの。&lt;br>
下のような例があった:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/ngyuki/items/673d6cb3b36360eaf5cc">シェルスクリプトでヘルプメッセージをコメントに書いて表示する - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://qiita.com/TomKid/items/ab49f8d0cd15b18e5e4a">自作シェルスクリプトにヘルプやらバージョンメッセージを実装？する面白い方法があった - Qiita&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>自分で独自フォーマットのコメントを書いている、という点では、下もこの類型にあたるか:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/ssh0/items/0c14ee8949512a4dc98e">シェルスクリプト群のドキュメント書くの面倒だから自動でREADME.mdを生成する - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/jmcantrell/bashful/blob/master/bin/shdoc">https://github.com/jmcantrell/bashful/blob/master/bin/shdoc&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>godocみたいなのないかな、と思って「shelldoc」とか「shdoc」とかでぐぐるとたくさん出てくる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://shellscript.sunone.me/tips.html">シェルスクリプト Tips | UNIX &amp;amp; Linux コマンド・シェルスクリプト リファレンス&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="microk8sを使ってみる">Microk8sを使ってみる&lt;/h3>
&lt;p>※ブログに移した: &lt;a href="https://tech-progrhyme.hatenablog.com/entry/2020/05/10/110630">UbuntuでKubernetesのテスト環境としてMicrok8sをセットアップした - progrhyme&amp;rsquo;s tech blog&lt;/a>&lt;/p></description></item><item><title>A: Argo CD</title><link>https://progrhy.me/tech-notes/a/software/argo/cd/</link><pubDate>Fri, 08 May 2020 17:20:10 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/argo/cd/</guid><description>
&lt;h2 id="features">Features&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://argoproj.github.io/argo-cd/operator-manual/sso/">SSO Overview - Argo CD - Declarative GitOps CD for Kubernetes&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://github.com/dexidp/dex">dex&lt;/a>を使ってOpen ID対応できる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://argoproj.github.io/argo-cd/user-guide/auto_sync/">Automated Sync Policy - Argo CD - Declarative GitOps CD for Kubernetes&lt;/a>
&lt;ul>
&lt;li>Automatic Pruning
&lt;ul>
&lt;li>デフォルトではリソースの削除はやらないが、このオプションをONにすると、削除同期もやってくれる&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>A: 2020-05-08</title><link>https://progrhy.me/tech-notes/a/memo/20200508/</link><pubDate>Fri, 08 May 2020 10:26:17 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/memo/20200508/</guid><description>
&lt;h2 id="58">5/8&lt;/h2>
&lt;h3 id="terraformerをgcpで使ってみた">terraformerをGCPで使ってみた&lt;/h3>
&lt;p>GCPでdefault networkをimportしたいと思った。&lt;br>
ふつうに &lt;code>terraform import&lt;/code> を使えばいいのだが、terraformerのことを思い出したので、使ってみることにした。&lt;br>
terraformerを使えばHCLファイルを生成することができる。&lt;/p>
&lt;p>terraformerについての一般的な内容は&lt;a href="https://progrhy.me/tech-notes/a/software/terraform/terraformer/">terraformer&lt;/a>にメモしている。&lt;/p>
&lt;p>作業環境: macOS&lt;/p>
&lt;p>Install:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">brew install terraformer
&lt;/code>&lt;/pre>&lt;/div>&lt;p>準備として、 &lt;code>~/.terraform.d/plugins/darwin_amd64/&lt;/code> に &lt;code>terraform-provider-google_v3.20.0_x5&lt;/code> を置く。&lt;br>
今回はterraform実行ディレクトリの &lt;code>.terraform/plugins&lt;/code> からコピーした。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">terraformer import google --projects&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-project &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --regions&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>asia-northeast1 --resources&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>networks,subnetworks
&lt;/code>&lt;/pre>&lt;/div>&lt;p>結果:&lt;/p>
&lt;pre>&lt;code>% tree generated
generated
└── google
└── my-project
├── networks
│   └── asia-northeast1
│   ├── compute_network.tf
│   ├── outputs.tf
│   ├── provider.tf
│   └── terraform.tfstate
└── subnetworks
└── asia-northeast1
├── compute_subnetwork.tf
├── outputs.tf
├── provider.tf
├── terraform.tfstate
└── variables.tf
6 directories, 9 files
&lt;/code>&lt;/pre>&lt;p>tfファイルのサンプル:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-HCL" data-lang="HCL">&lt;span style="color:#a40000">%&lt;/span> &lt;span style="color:#204a87;font-weight:bold">cat&lt;/span> &lt;span style="color:#204a87;font-weight:bold">generated&lt;/span>&lt;span style="color:#a40000">/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">google&lt;/span>&lt;span style="color:#a40000">/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">my&lt;/span>&lt;span style="color:#a40000">-&lt;/span>&lt;span style="color:#204a87;font-weight:bold">project&lt;/span>&lt;span style="color:#a40000">/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">networks&lt;/span>&lt;span style="color:#a40000">/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">asia&lt;/span>&lt;span style="color:#a40000">-&lt;/span>&lt;span style="color:#204a87;font-weight:bold">northeast1&lt;/span>&lt;span style="color:#a40000">/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">compute_network&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#204a87;font-weight:bold">tf&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">resource&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;google_compute_network&amp;#34; &amp;#34;tfer--default&amp;#34;&lt;/span> {
&lt;span style="color:#000"> auto_create_subnetworks&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>
&lt;span style="color:#000"> delete_default_routes_on_create&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;false&amp;#34;&lt;/span>
&lt;span style="color:#000"> description&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Default network for the project&amp;#34;&lt;/span>
&lt;span style="color:#000"> name&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;default&amp;#34;&lt;/span>
&lt;span style="color:#000"> project&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;my-project&amp;#34;&lt;/span>
&lt;span style="color:#000"> routing_mode&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;REGIONAL&amp;#34;&lt;/span>
}
&lt;/code>&lt;/pre>&lt;/div>&lt;p>tfstateのサンプル:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-JSON" data-lang="JSON">&lt;span style="color:#a40000">%&lt;/span> &lt;span style="color:#a40000">cat&lt;/span> &lt;span style="color:#a40000">generated/google/my-project/subnetworks/asia-northeast&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#a40000">/terraform.tfstate&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;version&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;terraform_version&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;0.12.18&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;serial&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;lineage&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;XXXXXXXXXXXX&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;modules&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;root&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;outputs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;google_compute_subnetwork_tfer--default_self_link&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;sensitive&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://www.googleapis.com/compute/v1/projects/my-project/regions/asia-northeast1/subnetworks/default&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;resources&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;google_compute_subnetwork.tfer--default&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;google_compute_subnetwork&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;depends_on&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;primary&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;default&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;attributes&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;creation_timestamp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;2020-05-07T02:07:01.455-07:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;gateway_address&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;10.146.0.1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;default&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;ip_cidr_range&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;10.146.0.0/20&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;log_config.#&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;0&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;default&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#a40000">:&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>terraform_version&lt;/code> がマシンにインストール済みのバージョンと違うのは、terraformerが同梱しているってことなのかな？&lt;/p>
&lt;h3 id="kubernetesのマニフェストをvcsで管理して削除まで正しく同期する方法">KubernetesのマニフェストをVCSで管理して、削除まで正しく同期する方法&lt;/h3>
&lt;p>※5/9 ブログを書いた: &lt;a href="https://tech-progrhyme.hatenablog.com/entry/2020/05/09/125134">Kubernetesのマニフェストをリポジトリ管理しつつ、リソースの削除も反映したい件 - progrhyme&amp;rsquo;s tech blog&lt;/a>&lt;/p>
&lt;p>某所で聞いたりして情報を集めた。&lt;br>
このエントリは後掲の関連リンクの続きである。&lt;/p>
&lt;ol>
&lt;li>管理対象のリソースに &lt;code>label&lt;/code> でバージョン番号を振り、新しいバージョンのリソースを配置した後、古いバージョンのリソースを削除する&lt;/li>
&lt;li>&lt;code>kubectl apply&lt;/code> 時に &lt;code>--prune&lt;/code> オプションを付ける&lt;/li>
&lt;li>Argo CDのAutomatic Pruning機能を使う&lt;/li>
&lt;li>リソースをTerraformで管理する&lt;/li>
&lt;/ol>
&lt;p>関連:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="../20200505/#kubernetes%E3%81%AE%E3%83%9E%E3%83%8B%E3%83%95%E3%82%A7%E3%82%B9%E3%83%88%E3%81%AF%E5%85%A8%E9%83%A8export%E3%81%97%E3%81%A6%E7%AE%A1%E7%90%86%E3%81%97%E3%81%9F%E6%96%B9%E3%81%8C%E3%81%84%E3%81%84%E3%82%93%E3%81%98%E3%82%83%E3%81%AD%E3%81%A3%E3%81%A6%E6%80%9D%E3%81%A3%E3%81%9F">2020-05-05のメモ - Kubernetesのマニフェストは全部exportして管理した方がいいんじゃね？って思った&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>