<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>progrhyme's Tech Notes – ターミナルソフトウェア</title><link>https://progrhy.me/tech-notes/a/software/terminal/</link><description>Recent content in ターミナルソフトウェア on progrhyme's Tech Notes</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Wed, 13 May 2020 22:23:41 +0900</lastBuildDate><atom:link href="https://progrhy.me/tech-notes/a/software/terminal/index.xml" rel="self" type="application/rss+xml"/><item><title>A: iTerm2</title><link>https://progrhy.me/tech-notes/a/software/terminal/iterm2/</link><pubDate>Sat, 16 May 2020 14:18:31 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terminal/iterm2/</guid><description>
&lt;h2 id="about">About&lt;/h2>
&lt;p>macOSで人気の端末アプリ。&lt;br>
ターミナル.app より細かい設定が色々できるらしい。&lt;/p>
&lt;p>起動アプリ名は「iTerm.app」&lt;/p>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.iterm2.com/downloads.html">Downloads&lt;/a> &amp;lt;- インストールはここから&lt;/li>
&lt;li>&lt;a href="https://www.iterm2.com/documentation.html">Documentation&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="keyboard-shortcuts">Keyboard Shortcuts&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Function&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>⌘D&lt;/code>&lt;/td>
&lt;td>画面を左右に分割&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘⇧D&lt;/code>&lt;/td>
&lt;td>画面を上下に分割&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘]&lt;/code>&lt;/td>
&lt;td>画面分割時に次のペインに移動&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘[&lt;/code>&lt;/td>
&lt;td>画面分割時に前のペインに移動&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌥⌘E&lt;/code>&lt;/td>
&lt;td>Expose All Tabs&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘⇧B&lt;/code>&lt;/td>
&lt;td>Toolbeltの表示/非表示&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘;&lt;/code>&lt;/td>
&lt;td>コマンド自動補完のポップアップを呼び出す&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘⇧;&lt;/code>&lt;/td>
&lt;td>（Shell Integration）コマンド履歴を呼び出す&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌥⌘/&lt;/code>&lt;/td>
&lt;td>最近のディレクトリを呼び出す&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>⌘F&lt;/code>&lt;/td>
&lt;td>テキスト検索&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://webrandum.net/iterm2/">MacのターミナルアプリはiTerm2で決まり!!オススメの設定と基本的な機能まとめ – Webrandum&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/memo/2020/20200516/#macbook%E3%81%ABiterm2%E3%82%92%E5%85%A5%E3%82%8C%E3%81%A6%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F">2020-05-16#MacBookにiTerm2を入れて設定してみた&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="背景画像の設定">背景画像の設定&lt;/h3>
&lt;p>&lt;code>Profiles &amp;gt; Window &amp;gt; Background Image&lt;/code> で「Enabled」にチェックを入れると、ローカルのファイルシステムにある画像を選べる。&lt;/p>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://neko-mac.blogspot.com/2015/02/iterm2.html">iTerm2を使いこなす - おしゃれな気分でプログラミング&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;h3 id="テキスト検索モード">テキスト検索モード&lt;/h3>
&lt;p>&lt;code>⌘F&lt;/code> で入れる。&lt;/p>
&lt;ul>
&lt;li>マウス操作せず、 &lt;code>TAB&lt;/code>, &lt;code>⇧TAB&lt;/code> キーで選択範囲を広げられる。&lt;/li>
&lt;li>&lt;code>⌥ENTER&lt;/code> で現在選択されているテキストをペースト&lt;/li>
&lt;/ul>
&lt;h2 id="features">Features&lt;/h2>
&lt;p>&lt;a href="https://iterm2.com/features.html">https://iterm2.com/features.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Toolbelt &amp;hellip; もう1つの作業スペース。 &lt;code>⌘⇧B&lt;/code> で表示できる。&lt;/li>
&lt;li>&lt;a href="https://www.iterm2.com/documentation-tmux-integration.html">tmux Integration&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="シェル変数">シェル変数&lt;/h3>
&lt;p>後掲の&lt;a href="#shell-integration">Shell Integration&lt;/a>を有効にしないと使えないものもあるかもしれない。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>意味&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ITERM_PROFILE&lt;/td>
&lt;td>環境変数&lt;/td>
&lt;td>現在の設定プロファイル。例: &lt;code>Default&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ITERM_SESSION_ID&lt;/td>
&lt;td>環境変数&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://ebc-2in2crc.hatenablog.jp/entry/2019/08/31/170022">iTerm2 のカレントのプロファイルは $ITERM_PROFILE で取得できる。 - 全力で怠けたい&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="shell-integration">Shell Integration&lt;/h3>
&lt;p>&lt;a href="https://www.iterm2.com/documentation-shell-integration.html">https://www.iterm2.com/documentation-shell-integration.html&lt;/a>&lt;/p>
&lt;p>シェルと連携して機能強化できる。&lt;br>
tmuxと一緒には使えないそうだ。&lt;/p>
&lt;p>機能:&lt;/p>
&lt;ul>
&lt;li>Auto Command Completion &amp;hellip; メニューバーから &lt;code>View &amp;gt; Auto Command Completion&lt;/code> で有効化できる&lt;/li>
&lt;/ul>
&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>Auto Command Completionのツールチップ表示中は、タブキーによるシェルの補完や &lt;a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions&lt;/a> による補完は効かない。 &lt;code>Esc&lt;/code> キーでAuto Command Completionを解除できる&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://progrhy.me/tech-notes/a/memo/2020/20200516/#macbook%E3%81%ABiterm2%E3%82%92%E5%85%A5%E3%82%8C%E3%81%A6%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F">2020-05-16#MacBookにiTerm2を入れて設定してみた&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;h3 id="ssh接続時に背景を変更する">SSH接続時に背景を変更する&lt;/h3>
&lt;p>背景色のみを変えることもできるが、リモート接続用の設定プロファイルを（複数）用意し、接続先によって切り替えるということも可能。&lt;/p>
&lt;p>某現場では &lt;code>gcloud compute ssh&lt;/code> を使うことが多いので、下のようなスクリプトを作り、 &lt;code>gcloud-ssh&lt;/code> とaliasした。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#8f5902;font-style:italic">#!/usr/bin/env bash
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>
&lt;span style="color:#204a87">set&lt;/span> -eu
&lt;span style="color:#000">NEW_ITERM_PROFILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">NEW_ITERM_PROFILE&lt;/span>&lt;span style="color:#204a87;font-weight:bold">:-&lt;/span>&lt;span style="color:#000">remote&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;span style="color:#000">original_profile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$ITERM_PROFILE&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># Restore profile in any case&lt;/span>
&lt;span style="color:#204a87">trap&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;echo -ne \&amp;#34;\033]1337;SetProfile=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">original_profile&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">\a\&amp;#34;&amp;#34;&lt;/span> EXIT
&lt;span style="color:#8f5902;font-style:italic"># Set given profile&lt;/span>
&lt;span style="color:#204a87">echo&lt;/span> -ne &lt;span style="color:#4e9a06">&amp;#34;\033]1337;SetProfile=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">NEW_ITERM_PROFILE&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">\a&amp;#34;&lt;/span>
gcloud compute ssh &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000">$@&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">echo&lt;/span> -ne &lt;span style="color:#4e9a06">&amp;#34;\033]1337;SetProfile=&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">original_profile&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">\a&amp;#34;&lt;/span>
&lt;span style="color:#204a87">exit&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE:&lt;/p>
&lt;ul>
&lt;li>最初 &lt;code>INT&lt;/code> でtrapしていたけど、gcloudコマンドが途中でコケたときにtrapできなかったので、 &lt;code>EXIT&lt;/code> にした&lt;/li>
&lt;/ul>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://dev.classmethod.jp/articles/iterm2-ssh-change-profile/">iTerm2でSSHログイン先別にプロファイルを自動的に切替えて事故防止する方法 | Developers.IO&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://dev.classmethod.jp/articles/do-ssh-and-change-bg-color-iterm2/">[macOS] SSHログインしたときだけターミナルの背景色を変えたい (iTerm2) | Developers.IO&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="参考記事">参考記事&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://qiita.com/ruwatana/items/8d9c174250061721ad11">iTerm2のおすすめ設定〜ターミナル作業を効率化する〜 - Qiita&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.rasukarusan.com/entry/2019/04/13/180443">俺よりiTerm使いこなしてるやつおる？ - ハイパーマッスルエンジニアになりたい&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>A: tmux</title><link>https://progrhy.me/tech-notes/a/software/terminal/tmux/</link><pubDate>Fri, 03 Jul 2020 11:32:53 +0900</pubDate><guid>https://progrhy.me/tech-notes/a/software/terminal/tmux/</guid><description>
&lt;h2 id="about">About&lt;/h2>
&lt;p>OSSのターミナルマルチプレクサ。&lt;/p>
&lt;ul>
&lt;li>ソースコード: &lt;a href="https://github.com/tmux/tmux">https://github.com/tmux/tmux&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://man.openbsd.org/tmux.1">https://man.openbsd.org/tmux.1&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>デフォルトの設定ファイルパスは &lt;code>~/.tmux.conf&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code># ログバッファの上限を上げる。デフォルト 2000
set-option -g history-limit 10000
# 256色対応
set-option -g default-terminal screen-256color
&lt;/code>&lt;/pre>&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://blog.asial.co.jp/881" title="screen(だけ)の時代は終わり。tmuxでリモートコンソールを便利に使うTips : アシアルブログ">screen(だけ)の時代は終わり。tmuxでリモートコンソールを便利に使うTips : アシアルブログ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yanor.net/wiki/?UNIX/tmux/256%E8%89%B2%E8%A1%A8%E7%A4%BA%E5%AF%BE%E5%BF%9C">UNIX/tmux/256色表示対応 - yanor.net/wiki&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="cli">CLI&lt;/h2>
&lt;p>参考:&lt;/p>
&lt;ul>
&lt;li>tmux基本のコマンド — nato’s memo 1.0 documentation : &lt;a href="http://room6933.com/mymemo/tmux/tmux-basic.html">http://room6933.com/mymemo/tmux/tmux-basic.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="tmux-コマンド">tmux コマンド&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic"># セッションのリネーム&lt;/span>
tmux rename -t &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> hoge
&lt;span style="color:#8f5902;font-style:italic"># 256色表示&lt;/span>
tmux -2
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="仮想端末操作">仮想端末操作&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">コマンド&lt;/th>
&lt;th style="text-align:left">説明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">&lt;code>&amp;lt;prefix&amp;gt;!&lt;/code>&lt;/td>
&lt;td style="text-align:left">ペイン分割解除&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item></channel></rss>